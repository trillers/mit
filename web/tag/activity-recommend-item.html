<activity-recommend-item>
    <div class="activity-recommend-item" onclick="{showPaDetail}">
        <div>
            <img src="{picshow}" />
        </div>
        <div>
            <p>{name.length > 24 ? name.substring(0, 24)+'...':name}</p>
            <p>{startTimes} {place.length > 8 ? place.substring(0, 8)+'...':place}</p>
            <p>{num}人报名 {likes}人点赞</p>
        </div>
    </div>
    <script>

        var item = this.opts.curritem;
        var self = this;
        self.num = item.meta.apps;
        self.picshow = util.calcImageUrl(item);
        self.likes = item.meta.likes || 0;
        self.startTimes = util.dateFormat(new Date(item.startTime),"MM/dd");
        self.Week = util.getDateWeek(new Date(item.startTime));
        self.startTimes_Week = self.startTimes+" "+self.Week;
        self.name = item.name;
        showPaDetail(e){
            e.preventDefault();
            _czc.push(['_trackEvent', util.getDc().PA.NAME + '(' + util.getDc().PA.ACTION.VIEW + ')', self.parent.name || '', util.convertToValue(self.parent.tags.type).join(',') || '']);
            riot.route('activity/_'+item._id);
        }
    </script>
</activity-recommend-item>
