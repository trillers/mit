<activity-item>
        <div class="screen">
            <a href="#" onclick="{showPaDetail}"><img src="{picshow}" class="activity-cover-img img1" /></a>
            <div class="type-bar {status_background_color}">{statuszw}</div>
            <div class="top-bar">
                <p><img src="/{env}/images/item2.png" width="15" class="vertical" /> <span class="vertical" >{this.opts.curritem.meta.apps || 0}</span></p>
                <p><img src="{likes_imgsrc}" width="15" /> <span class="vertical" >{this.opts.curritem.meta.likes || 0}</span></p>
            </div>
            <div class="bottom-bar">
                <div>
                    <p>{name.length > 15 ? name.substring(0, 15)+'...':name}</p>
                    <p>
                        <span></span>{startTimes_Week} {place.length > 12 ? place.substring(0, 12)+'...':place}
                    </p>
                </div>
            </div>
            <div class="shadow"></div>
        </div>
    <script>
        var getNum = function(json){
            var sum=0;
            for(var s = 0;s< json.applications.length; s++){
                sum = sum + json.applications[s].num;
            }
            return sum;
        };
        var item = this.opts.curritem;

        this.statuszw = __app.enums.ProductActivityStatus.values[item.status];

        if (item.reviewStatus=='r'){
            this.statuszw = __app.enums.ReviewStatus.values[item.reviewStatus];
        }

        //this.num = getNum(item);
        this.num = item.meta.apps;
        var self = this;
        self.env = (__app.settings.env.NODE_ENV=="production")?"public":"web";
        self.picshow = util.calcImageUrl(item);
        self.likes = item.meta.likes || 0;
        self.startTimes = util.dateFormat(new Date(item.startTime),"MM/dd");
        self.Week = util.getDateWeek(new Date(item.startTime));
        self.startTimes_Week = self.startTimes+" "+self.Week;
        self.reviewStatus = item.reviewStatus ? item.reviewStatus :"";
        self.likes_imgsrc = __page.user.meta.pa.likes[item._id] ? "/"+self.env+"/images/item1_like.png":"/"+self.env+"/images/item1.png";
        self.status_background_color = util.events._valueToKey(__app.enums.ProductActivityStatus.names)[item.status];
        showPaDetail(e){
            e.preventDefault();
            _czc.push(['_trackEvent', util.getDc().PA.NAME + '(' + util.getDc().PA.ACTION.VIEW + ')', self.parent.name || '', util.convertToValue(self.parent.tags.type).join(',') || '']);
            riot.route('activity/_'+item._id);
        }
        this.on('update', function(){
            this.likes_imgsrc = __page.user.meta.pa.likes[item._id] ? "/"+self.env+"/images/item1_like.png":"/"+self.env+"/images/item1.png";
        });
    </script>
</activity-item>
