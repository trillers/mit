<teacher-index>
    <div if="{!hidden}">
        <ul class="clazzAccordion">
            <li onclick="{showSubMenu}">
                <span>周六补习班</span>
                <ul>
                    <li>张三</li>
                    <li>李四</li>
                </ul>
            </li>
            <li>
                <span>周日补习班</span>
                <ul>
                    <li>王五</li>
                </ul>
            </li>
        </ul>
        <footer-bar></footer-bar>
    </div>
    <style scoped>
        .clazzAccordion >li{
            background:red;
        }
        .clazzAccordion li >span{
            height:32px;
            line-height:32px;
            display: block;
            padding-left:10px;
            background: rgb(110, 136, 240);
        }
        .clazzAccordion ul{
            overflow: hidden;
            transition: 1s earse;
        }
        .clazzAccordion ul>li{
            padding-left:10px;
            height:32px;
            line-height: 32px;
        }
        .clazzAccordion ul>li:nth-child(odd){
            background: #ECECEC;
        }
        .clazzAccordion ul>li:nth-child(even){
            background: #EFEFEF;
        }
    </style>

    <script>
        var self = nest.presentable(this),
            ClazzFetchByTeacherAction = domain.action('ClazzFetchByTeacherAction');

        showSubMenu(e){
            Object.prototype.findEl = function(type, fn){
                var me = this;
                var dom = me.firstChild;
                findEl();
                function findEl(){
                    if (dom && dom instanceof Element && dom.tagName === type) fn(dom)
                    else{
                        findEl(dom.nextSibling)
                        if (dom.firstChild) {
                            dom = dom.firstChild;
                            findEl();
                        }
                        findEl.call(dom.nextSibling, type, fn);
                    }
                }
            }
            var root = e.currentTarget;
            root.findEl('ul', function(el){
                console.log(el);

            });

        }
        var _open = function(id){

            this.trigger('view-route-to');
        }.bind(self);
        var _refresh = function(){

        }.bind(self);
        this.on('open', function(options){
            ClazzFetchByTeacherAction.execute();
            _open(options);
        });
        this.on('mount',function(){
            ClazzFetchByTeacherAction.onDone(OnClazzFetchByTeacherAction);
            console.info('tag activities is mounted');
        });
        function OnClazzFetchByTeacherAction(data){
            console.log(data);
        }
        this.on('refresh', function(){
            console.info('tag activity is refreshing');
            _refresh();
        });
    </script>
</teacher-index>
