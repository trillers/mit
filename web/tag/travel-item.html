<travel-item>
    <!--<div class="add_info">-->
        <!--<div class="screen recommended">-->
            <!--<a href="#travel/_{_id}">-->
                <!--<img src="{picshow}" data-original="" class="activity-cover-img img1 border_radius"/>-->
            <!--</a>-->
            <!--<div class="scr">-->
                <!--<div class="scr_left">-->
                    <!--<p class="p1">{name}</p>-->
                    <!--<p class="p2">{promotionWords.length > 16 ? promotionWords.substring(0,-->
                        <!--16)+'...':promotionWords}</p>-->
                <!--</div>-->
                <!--<div class="scr_right">-->
                    <!--<p class="p1"><img src= "{path}" /> <span>{likes}</span></p>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="shadow border_radius_shadow"></div>-->
        <!--</div>-->
    <!--</div>-->
    <div class="screen">
        <a href="#travel/_{_id}"><img src="{picshow}" class="activity-cover-img img1" /></a>
        <div class="bottom-bar">
            <div>
                <p>{name.length > 15 ? name.substring(0, 15)+'...':name}</p>
                <p>
                    <span></span>{promotionWords.length > 16 ? promotionWords.substring(0, 16)+'...':promotionWords}
                </p>
            </div>
            <div><img src= "{path}" /> <span>{likes}</span></div>
        </div>
        <div class="shadow"></div>
    </div>
    <script>
        var item = this.opts.curritem;
        var self = this;
        var user = __page.user;

        self.env = __app.settings.env.NODE_ENV;
        var publicOrweb = (self.env=="development")?"web":"public";

        self.picshow = util.calcImageUrl(item);
        self.likes = '0';
        self.path = '';

        var checkFavorite = function(){
            if(user.id){
                var likesObj = user.meta.likes[item._id];
                if(likesObj){
                    self.path = "/" + publicOrweb + "/images/3_06_h.png";
                    self.likes = item.meta['likes'];
                }else{
                    self.path = "/" + publicOrweb + "/images/3_03.png";
                    self.likes = item.meta['likes'];
                }
            }else{
                self.path = "/" + publicOrweb + "/images/3_03.png";
                self.likes = item.meta['likes'];
            }
            console.log(self.path);
        }

        this.on('mount', function(){
            console.info('tag activities is mounted');
            checkFavorite();
            this.update();
        });

    </script>
</travel-item>
