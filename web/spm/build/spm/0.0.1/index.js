!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n;i(12),e.exports=n},function(e,t,i){!function(){function t(e){var t={val:e},i=e.split(/\s+in\s+/);return i[1]&&(t.val=x(0)+i[1],i=i[0].slice(x(0).length).trim().split(/,\s*/),t.key=i[0],t.pos=i[1]),t}function n(e,t,i){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=i),n}function o(e,i,o){function a(e,t,i){f.splice(e,0,t),h.splice(e,0,i)}p(e,"each");var r,c=e.outerHTML,l=e.previousSibling,u=e.parentNode,f=[],h=[];o=t(o),i.one("update",function(){u.removeChild(e)}).one("premount",function(){u.stub&&(u=i.root)}).on("update",function(){var e=k(o.val,i);if(e){if(!Array.isArray(e)){var t=JSON.stringify(e);if(t==r)return;r=t,d(h,function(e){e.unmount()}),f=[],h=[],e=Object.keys(e).map(function(t){return n(o,t,e[t])})}d(m(f,e),function(e){var t=f.indexOf(e),i=h[t];i&&(i.unmount(),f.splice(t,1),h.splice(t,1))});var p=u.childNodes,g=[].indexOf.call(p,l);d(e,function(t,l){var d=e.indexOf(t,l),m=f.indexOf(t,l);if(0>d&&(d=e.lastIndexOf(t,l)),0>m&&(m=f.lastIndexOf(t,l)),0>m){!r&&o.key&&(t=n(o,t,d));var v=new s({tmpl:c},{before:p[g+1+d],parent:i,root:u,item:t});return v.mount(),a(d,t,v)}return o.pos&&h[m][o.pos]!=d&&(h[m].one("update",function(e){e[o.pos]=d}),h[m].update()),d!=m?(u.insertBefore(p[g+m+1],p[g+d+1]),a(d,f.splice(m,1)[0],h.splice(m,1)[0])):void 0}),f=e.slice()}})}function a(e,t,i){g(e,function(e){if(1==e.nodeType){var n=y(e);if(n&&!e.getAttribute("each")){var o=new s(n,{root:e,parent:t});t.tags[e.getAttribute("name")||n.name]=o,i.push(o)}d(e.attributes,function(i){/^(name|id)$/.test(i.name)&&(t[i.value]=e)})}})}function r(e,t,i){function n(e,t,n){if(t.indexOf(x(0))>=0){var o={dom:e,expr:t};i.push(f(o,n))}}g(e,function(e){var i=e.nodeType;if(3==i&&"STYLE"!=e.parentNode.tagName&&n(e,e.nodeValue),1==i){var a=e.getAttribute("each");return a?(o(e,t,a),!1):(d(e.attributes,function(t){var i=t.name,o=i.split("__")[1];return n(e,t.value,{attr:o||i,bool:o}),o?(p(e,i),!1):void 0}),y(e)?!1:void 0)}})}function s(e,t){function i(){d(Object.keys(x),function(e){c[e]=k(x[e],p||s)})}function n(e){if(d(m,function(t){t[e?"mount":"unmount"]()}),p){var t=e?"on":"off";p[t]("update",s.update)[t]("unmount",s.unmount)}}var o,s=w.observable(this),c=v(t.opts)||{},l=h(e.tmpl),p=t.parent,g=[],m=[],y=t.root,b=t.item,_=e.fn,x={};_&&y.riot||(y.riot=!0,f(this,{parent:p,root:y,opts:c,tags:{}},b),d(y.attributes,function(e){x[e.name]=e.value}),this.update=function(e){f(s,e,b),i(),s.trigger("update",b),u(g,s,b),s.trigger("updated")},this.mount=function(){if(i(),_&&_.call(s,c),n(!0),r(l,s,g),s.update(),s.trigger("premount"),_)for(;l.firstChild;)y.appendChild(l.firstChild);else o=l.firstChild,y.insertBefore(o,t.before||null);y.stub&&(s.root=y=p.root),s.trigger("mount")},this.unmount=function(){var e=_?y:o,t=e.parentNode;if(t){if(p)t.removeChild(e);else for(;y.firstChild;)y.removeChild(y.firstChild);n(),s.trigger("unmount"),s.off("*"),delete y.riot}},a(l,this,m))}function c(e,t,i,n,o){i[e]=function(e){e=e||window.event,e.which=e.which||e.charCode||e.keyCode,e.target=e.target||e.srcElement,e.currentTarget=i,e.item=o,t.call(n,e)!==!0&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1);var a=o?n.parent:n;a.update()}}function l(e,t,i){e&&(e.insertBefore(i,t),e.removeChild(t))}function u(e,t,i){d(e,function(e){var n=e.dom,o=e.attr,a=k(e.expr,t),r=e.dom.parentNode;if(null==a&&(a=""),r&&"TEXTAREA"==r.tagName&&(a=a.replace(/riot-/g,"")),e.value!==a){if(e.value=a,!o)return n.nodeValue=a;if(p(n,o),"function"==typeof a)c(o,a,n,t,i);else if("if"==o){var s=e.stub;a?s&&l(s.parentNode,s,n):(s=e.stub=s||document.createTextNode(""),l(n.parentNode,n,s))}else if(/^(show|hide)$/.test(o))"hide"==o&&(a=!a),n.style.display=a?"":"none";else if("value"==o)n.value=a;else if("riot-"==o.slice(0,5))o=o.slice(5),a?n.setAttribute(o,a):p(n,o);else{if(e.bool){if(n[o]=a,!a)return;a=o}"object"!=typeof a&&n.setAttribute(o,a)}}})}function d(e,t){for(var i,n=0,o=(e||[]).length;o>n;n++)i=e[n],null!=i&&t(i,n)===!1&&n--;return e}function p(e,t){e.removeAttribute(t)}function f(e,t,i){return t&&d(Object.keys(t),function(i){e[i]=t[i]}),i?f(e,i):e}function h(e){var t=e.trim().slice(1,3).toLowerCase(),i=/td|th/.test(t)?"tr":"tr"==t?"tbody":"div",n=document.createElement(i);return n.stub=!0,n.innerHTML=e,n}function g(e,t){if(e)if(t(e)===!1)g(e.nextSibling,t);else for(e=e.firstChild;e;)g(e,t),e=e.nextSibling}function m(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function v(e){function t(){}return t.prototype=e,new t}function y(e){return C[e.tagName.toLowerCase()]}function b(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function _(e,t,i){var n=C[t];return n&&e&&(n=new s(n,{root:e,opts:i})),n&&n.mount?(n.mount(),T.push(n),n.on("unmount",function(){T.splice(T.indexOf(n),1)})):void 0}var w={version:"WIP",settings:{}};w.observable=function(e){e=e||{};var t={},i=0;return e.on=function(n,o){return"function"==typeof o&&(o._id="undefined"==typeof o._id?i++:o._id,n.replace(/\S+/g,function(e,i){(t[e]=t[e]||[]).push(o),o.typed=i>0})),e},e.off=function(i,n){return"*"==i?t={}:i.replace(/\S+/g,function(e){if(n)for(var i,o=t[e],a=0;i=o&&o[a];++a)i._id==n._id&&(o.splice(a,1),a--);else t[e]=[]}),e},e.one=function(t,i){return i&&(i.one=1),e.on(t,i)},e.trigger=function(i){for(var n,o=[].slice.call(arguments,1),a=t[i]||[],r=0;n=a[r];++r)n.busy||(n.busy=1,n.apply(e,n.typed?[i].concat(o):o),n.one?(a.splice(r,1),r--):a[r]!==n&&r--,n.busy=0);return e},e},function(e,t){function i(){return r.hash.slice(1)}function n(e){return e.split("/")}function o(e){e.type&&(e=i()),e!=a&&(s.trigger.apply(null,["H"].concat(n(e))),a=e)}if(this.top){var a,r=location,s=e.observable(),c=window,l=e.route=function(e){e[0]?(r.hash=e,o(e)):s.on("H",e)};l.exec=function(e){e.apply(null,n(i()))},l.parser=function(e){n=e},c.addEventListener?c.addEventListener(t,o,!1):c.attachEvent("on"+t,o)}}(w,"hashchange");var x=function(e,t,i){return function(n){return t=w.settings.brackets||e,i!=t&&(i=t.split(" ")),n&&n.test?t==e?n:RegExp(n.source.replace(/\{/g,i[0].replace(/(?=.)/g,"\\")).replace(/\}/g,i[1].replace(/(?=.)/g,"\\")),n.global?"g":""):i[n]}}("{ }"),k=function(){function e(e,i){return e=(e||x(0)+x(1)).replace(x(/\\{/g),"￰").replace(x(/\\}/g),"￱"),i=n(e,x(/{[\s\S]*?}/g)),new Function("d","return "+(i[0]||i[2]||i[3]?"["+i.map(function(e,i){return i%2?t(e,!0):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':t(i[1])).replace(/\uFFF0/g,x(0)).replace(/\uFFF1/g,x(1))+";")}function t(e,t){return e=e.replace(/\n/g," ").replace(x(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+e.replace(/\W*([\w- ]+)\W*:([^,]+)/g,function(e,t,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+t.trim()+'":"",'})+'].join(" ").trim()':i(e,t)}function i(e,t){return e=e.trim(),e?"(function(v){try{v="+(e.replace(a,function(e,t,i){return i?"(d."+i+"===undefined?window."+i+":d."+i+")":e})||"x")+"}finally{return "+(t===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function n(e,t){var i=[],n=0;return e.replace(t,function(t,o){i.push(e.slice(n,o),t),n=o+t.length}),i.concat(e.slice(n))}var o={},a=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,i){return t&&(o[t]=o[t]||e(t))(i)}}(),T=[],C={};w.tag=function(e,t,i,n){"function"==typeof i?n=i:i&&b(i),C[e]={name:e,tmpl:t,fn:n}},w.mount=function(e,t,i){function n(e){var n=t||e.tagName.toLowerCase(),a=_(e,n,i);a&&o.push(a)}"*"==e&&(e=Object.keys(C).join(", ")),"object"==typeof t&&(i=t,t=0);var o=[];return e.tagName?(n(e),o[0]):(d(document.querySelectorAll(e),n),o)},w.update=function(){return d(T,function(e){e.update()})},w.mountTo=w.mount,function(t){function n(e,t,i){var n=w.util.brackets;return e=t.whitespace?e.replace(/\n/g,"\\n"):e.replace(/\s+/g," "),e=e.trim().replace(E,""),e=e.replace(n(x),'="$1"$2'),e=e.replace(k,function(e,t,i,o){return o.indexOf(n(0))>=0&&(t=t.toLowerCase(),v.indexOf(t)>=0?t="riot-"+t:g.indexOf(t)>=0&&(t="__"+t)),t+'="'+o+'"'}),t.expr&&(e=e.replace(n(T),function(e,o){var a=r(o,t,i).trim().replace(/\r?\n|\r/g,"").trim();return";"==a.slice(-1)&&(a=a.slice(0,-1)),n(0)+a+n(1)})),e=e.replace(S,function(e,t,i){var n="<"+t+(i?" "+i.trim():"")+">";return-1==m.indexOf(t.toLowerCase())&&(n+="</"+t+">"),n}),e=e.replace(/'/g,"\\'"),e=e.replace(n(/\\{|\\}/g),"\\$&"),t.compact&&(e=e.replace(/> </g,"><")),e}function o(e){e=e.replace($,"").replace(F,"");var t=e.split("\n"),i="";return t.forEach(function(e,n){var o=e.trim();if("}"!=o[0]&&o.indexOf("(")>0&&-1==o.indexOf("function")){var a=/[{}]/.exec(o.slice(-1)),r=a&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);r&&!/^(if|while|switch|for)$/.test(r[2])&&(t[n]=r[1]+"this."+r[2]+" = function("+r[3]+") {","}"==a[0]?t[n]+=" "+o.slice(r[0].length-1,-1)+"}.bind(this)":i=r[1])}e.slice(0,i.length+1)==i+"}"&&(t[n]=i+"}.bind(this);",i="")}),t.join("\n")}function a(e,t){return t.replace(I,"").replace(D,function(t,i,n){return i+" "+n.split(/\s*,\s*/g).map(function(t){return"@"==t[0]?t:e+" "+t.replace(/:scope\s*/,"")}).join(",")}).trim()}function r(e,t,i){var n=t.parser||(i?b[i]:o);if(!n)throw new Error('Parser not found "'+i+'"');return n(e,t)}function s(e,t){var i=y[e];if(!i)throw new Error('Template parser not found "'+e+'"');return i(t)}function c(e,t,i){return"scoped-css"==i&&(e=a(t,e)),e.replace(/\s+/g," ").replace(/\\/g,"\\\\").replace(/'/g,"\\'").trim()}function l(e,t,i,n){return"riot.tag('"+e+"', '"+t+"'"+(i?", '"+i+"'":"")+", function(opts) {"+n+"\n});"}function u(e,t){return t=t||{},t.brackets&&(w.settings.brackets=t.brackets),t.template&&(e=s(t.template,e)),e=e.replace(_,function(e,i,o){return l(i,n(o,t),"","")}),e.replace(C,function(e,i,o,a){o=o||"";var s=t.type;a.trim()||(o=o.replace(N,function(e,t,i,n){return i&&(s=i.replace("text/","")),a=n,""}));var u="",d="css";return o=o.replace(A,function(e,t,i,n){return t&&"scoped"==t.trim()?d="scoped-css":i&&(d=i.replace("text/","")),u=n,""}),l(i,n(o,t,s),c(u,i,d),r(a,t,s))})}function d(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(i.responseText)},i.open("GET",e,!0),i.send("")}function p(e){var t=/[ \t]+/.exec(e);return t&&(e=e.replace(new RegExp("^"+t[0],"gm"),"")),e}function f(e){var t=O.createElement("script"),i=O.documentElement;t.text=u(e),i.appendChild(t),i.removeChild(t)}function h(e){var t=O.querySelectorAll('script[type="riot/tag"]');[].map.call(t,function(i,n){function o(i){f(i),n+1==t.length&&(M.trigger("ready"),j=!0,e&&e())}var a=i.getAttribute("src");return a?d(a,o):o(p(i.innerHTML))})}var g="allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,typemustmatch,visible".split(","),m="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(","),v=["style","src","d"],y={},b={},_=/^<([\w\-]+)>(.*)<\/\1>/gim,x=/=({[^}]+})([\s\/\>])/g,k=/([\w\-]+)=(["'])([^\2]+?)\2/g,T=/{\s*([^}]+)\s*}/g,C=/^<([\w\-]+)>([^\x00]*[\w\/}]>$)?([^\x00]*?)^<\/\1>/gim,N=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,A=/<style(\s+type=['"]?([^>'"]+)['"]?|\s+scoped)?>([^\x00]*?)<\/style>/gm,D=/(^|\}|\{)\s*([^\{\}]+)\s*(?=\{)/g,I=/\/\*[^\x00]*?\*\//gm,E=/<!--.*?-->/g,S=/<([\w\-]+)([^>]*)\/\s*>/g,$=/^\s*\/\/.*$/gm,F=/\/\*[^\x00]*?\*\//gm;if(t)return this.riot=i(9)(process.env.RIOT||"../riot"),e.exports={html:n,compile:u,style:c};var M,j,O=document;w.compile=function(e,t){if("string"==typeof e){if("<"==e.trim()[0]){var i=p(u(e));return t||f(i),i}return d(e,function(e){var i=p(u(e));f(i),t&&t(i,e)})}return"function"!=typeof e&&(e=void 0),j?e&&e():(M?e&&M.on("ready",e):(M=w.observable(),h(e)),void 0)};var L=w.mount;w.mount=function(e,t,i){var n;return w.compile(function(){n=L(e,t,i)}),n},w.mountTo=w.mount}(!this.top),w.util={brackets:x,tmpl:k},e.exports=w}()},function(e,t,i){var n,o;(function(e){!function(i,a){function r(e){var t=e.length,i=ht.type(e);return ht.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e){var t=It[e]={};return ht.each(e.match(mt)||[],function(e,i){t[i]=!0}),t}function c(e,t,i,n){if(ht.acceptData(e)){var o,r,s=ht.expando,c=e.nodeType,l=c?ht.cache:e,u=c?e[s]:e[s]&&s;if(u&&l[u]&&(n||l[u].data)||i!==a||"string"!=typeof t)return u||(u=c?e[s]=at.pop()||ht.guid++:s),l[u]||(l[u]=c?{}:{toJSON:ht.noop}),("object"==typeof t||"function"==typeof t)&&(n?l[u]=ht.extend(l[u],t):l[u].data=ht.extend(l[u].data,t)),r=l[u],n||(r.data||(r.data={}),r=r.data),i!==a&&(r[ht.camelCase(t)]=i),"string"==typeof t?(o=r[t],null==o&&(o=r[ht.camelCase(t)])):o=r,o}}function l(e,t,i){if(ht.acceptData(e)){var n,o,a=e.nodeType,r=a?ht.cache:e,s=a?e[ht.expando]:ht.expando;if(r[s]){if(t&&(n=i?r[s]:r[s].data)){ht.isArray(t)?t=t.concat(ht.map(t,ht.camelCase)):t in n?t=[t]:(t=ht.camelCase(t),t=t in n?[t]:t.split(" ")),o=t.length;for(;o--;)delete n[t[o]];if(i?!d(n):!ht.isEmptyObject(n))return}(i||(delete r[s].data,d(r[s])))&&(a?ht.cleanData([e],!0):ht.support.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}function u(e,t,i){if(i===a&&1===e.nodeType){var n="data-"+t.replace(St,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Et.test(i)?ht.parseJSON(i):i}catch(o){}ht.data(e,t,i)}else i=a}return i}function d(e){var t;for(t in e)if(("data"!==t||!ht.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function p(){return!0}function f(){return!1}function h(){try{return et.activeElement}catch(e){}}function g(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function m(e,t,i){if(ht.isFunction(t))return ht.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ht.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(Vt.test(t))return ht.filter(t,e,i);t=ht.filter(t,e)}return ht.grep(e,function(e){return ht.inArray(e,t)>=0!==i})}function v(e){var t=Zt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function y(e,t){return ht.nodeName(e,"table")&&ht.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ht.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=ci.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var i,n=0;null!=(i=e[n]);n++)ht._data(i,"globalEval",!t||ht._data(t[n],"globalEval"))}function x(e,t){if(1===t.nodeType&&ht.hasData(e)){var i,n,o,a=ht._data(e),r=ht._data(t,a),s=a.events;if(s){delete r.handle,r.events={};for(i in s)for(n=0,o=s[i].length;o>n;n++)ht.event.add(t,i,s[i][n])}r.data&&(r.data=ht.extend({},r.data))}}function k(e,t){var i,n,o;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ht.support.noCloneEvent&&t[ht.expando]){o=ht._data(t);for(n in o.events)ht.removeEvent(t,n,o.handle);t.removeAttribute(ht.expando)}"script"===i&&t.text!==e.text?(b(t).text=e.text,_(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ht.support.html5Clone&&e.innerHTML&&!ht.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&ai.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function T(e,t){var i,n,o=0,r=typeof e.getElementsByTagName!==Q?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Q?e.querySelectorAll(t||"*"):a;if(!r)for(r=[],i=e.childNodes||e;null!=(n=i[o]);o++)!t||ht.nodeName(n,t)?r.push(n):ht.merge(r,T(n,t));return t===a||t&&ht.nodeName(e,t)?ht.merge([e],r):r}function C(e){ai.test(e.type)&&(e.defaultChecked=e.checked)}function N(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=Di.length;o--;)if(t=Di[o]+i,t in e)return t;return n}function A(e,t){return e=t||e,"none"===ht.css(e,"display")||!ht.contains(e.ownerDocument,e)}function D(e,t){for(var i,n,o,a=[],r=0,s=e.length;s>r;r++)n=e[r],n.style&&(a[r]=ht._data(n,"olddisplay"),i=n.style.display,t?(a[r]||"none"!==i||(n.style.display=""),""===n.style.display&&A(n)&&(a[r]=ht._data(n,"olddisplay",$(n.nodeName)))):a[r]||(o=A(n),(i&&"none"!==i||!o)&&ht._data(n,"olddisplay",o?i:ht.css(n,"display"))));for(r=0;s>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[r]||"":"none"));return e}function I(e,t,i){var n=wi.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function E(e,t,i,n,o){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>a;a+=2)"margin"===i&&(r+=ht.css(e,i+Ai[a],!0,o)),n?("content"===i&&(r-=ht.css(e,"padding"+Ai[a],!0,o)),"margin"!==i&&(r-=ht.css(e,"border"+Ai[a]+"Width",!0,o))):(r+=ht.css(e,"padding"+Ai[a],!0,o),"padding"!==i&&(r+=ht.css(e,"border"+Ai[a]+"Width",!0,o)));return r}function S(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=hi(e),r=ht.support.boxSizing&&"border-box"===ht.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=gi(e,t,a),(0>o||null==o)&&(o=e.style[t]),xi.test(o))return o;n=r&&(ht.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+E(e,t,i||(r?"border":"content"),n,a)+"px"}function $(e){var t=et,i=Ti[e];return i||(i=F(e,t),"none"!==i&&i||(fi=(fi||ht("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(fi[0].contentWindow||fi[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=F(e,t),fi.detach()),Ti[e]=i),i}function F(e,t){var i=ht(t.createElement(e)).appendTo(t.body),n=ht.css(i[0],"display");return i.remove(),n}function M(e,t,i,n){var o;if(ht.isArray(t))ht.each(t,function(t,o){i||Ei.test(e)?n(e,o):M(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==ht.type(t))n(e,t);else for(o in t)M(e+"["+o+"]",t[o],i,n)}function j(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,a=t.toLowerCase().match(mt)||[];if(ht.isFunction(i))for(;n=a[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function O(e,t,i,n){function o(s){var c;return a[s]=!0,ht.each(e[s]||[],function(e,s){var l=s(t,i,n);return"string"!=typeof l||r||a[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),c}var a={},r=e===Xi;return o(t.dataTypes[0])||!a["*"]&&o("*")}function L(e,t){var i,n,o=ht.ajaxSettings.flatOptions||{};for(n in t)t[n]!==a&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&ht.extend(!0,e,i),e}function P(e,t,i){for(var n,o,r,s,c=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),o===a&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in c)if(c[s]&&c[s].test(o)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}n||(n=s)}r=r||n}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function W(e,t,i,n){var o,a,r,s,c,l={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)l[r.toLowerCase()]=e.converters[r];for(a=u.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=u.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(r=l[c+" "+a]||l["* "+a],!r)for(o in l)if(s=o.split(" "),s[1]===a&&(r=l[c+" "+s[0]]||l["* "+s[0]])){r===!0?r=l[o]:l[o]!==!0&&(a=s[0],u.unshift(s[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}function q(){try{return new i.XMLHttpRequest}catch(e){}}function B(){try{return new i.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function H(){return setTimeout(function(){nn=a}),nn=ht.now()}function U(e,t,i){for(var n,o=(ln[t]||[]).concat(ln["*"]),a=0,r=o.length;r>a;a++)if(n=o[a].call(i,t,e))return n}function R(e,t,i){var n,o,a=0,r=cn.length,s=ht.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=nn||H(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,a=1-n,r=0,c=l.tweens.length;c>r;r++)l.tweens[r].run(a);return s.notifyWith(e,[l,a,i]),1>a&&c?i:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ht.extend({},t),opts:ht.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:nn||H(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ht.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)l.tweens[i].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(z(u,l.opts.specialEasing);r>a;a++)if(n=cn[a].call(l,e,u,l.opts))return n;return ht.map(u,U,l),ht.isFunction(l.opts.start)&&l.opts.start.call(e,l),ht.fx.timer(ht.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function z(e,t){var i,n,o,a,r;for(i in e)if(n=ht.camelCase(i),o=t[n],a=e[i],ht.isArray(a)&&(o=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),r=ht.cssHooks[n],r&&"expand"in r){a=r.expand(a),delete e[n];for(i in a)i in e||(e[i]=a[i],t[i]=o)}else t[n]=o}function V(e,t,i){var n,o,a,r,s,c,l=this,u={},d=e.style,p=e.nodeType&&A(e),f=ht._data(e,"fxshow");i.queue||(s=ht._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,ht.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ht.css(e,"display")&&"none"===ht.css(e,"float")&&(ht.support.inlineBlockNeedsLayout&&"inline"!==$(e.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ht.support.shrinkWrapBlocks||l.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],an.exec(o)){if(delete t[n],a=a||"toggle"===o,o===(p?"hide":"show"))continue;u[n]=f&&f[n]||ht.style(e,n)}if(!ht.isEmptyObject(u)){f?"hidden"in f&&(p=f.hidden):f=ht._data(e,"fxshow",{}),a&&(f.hidden=!p),p?ht(e).show():l.done(function(){ht(e).hide()}),l.done(function(){var t;ht._removeData(e,"fxshow");for(t in u)ht.style(e,t,u[t])});for(n in u)r=U(p?f[n]:0,n,l),n in f||(f[n]=r.start,p&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function X(e,t,i,n,o){return new X.prototype.init(e,t,i,n,o)}function J(e,t){var i,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)i=Ai[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function Y(e){return ht.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Z,K,Q=typeof a,G=i.location,et=i.document,tt=et.documentElement,it=i.jQuery,nt=i.$,ot={},at=[],rt="1.10.2",st=at.concat,ct=at.push,lt=at.slice,ut=at.indexOf,dt=ot.toString,pt=ot.hasOwnProperty,ft=rt.trim,ht=function(e,t){return new ht.fn.init(e,t,K)},gt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,mt=/\S+/g,vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,yt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,bt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_t=/^[\],:{}\s]*$/,wt=/(?:^|:|,)(?:\s*\[)+/g,xt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,kt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Tt=/^-ms-/,Ct=/-([\da-z])/gi,Nt=function(e,t){return t.toUpperCase()},At=function(e){(et.addEventListener||"load"===e.type||"complete"===et.readyState)&&(Dt(),ht.ready())},Dt=function(){et.addEventListener?(et.removeEventListener("DOMContentLoaded",At,!1),i.removeEventListener("load",At,!1)):(et.detachEvent("onreadystatechange",At),i.detachEvent("onload",At))};ht.fn=ht.prototype={jquery:rt,constructor:ht,init:function(e,t,i){var n,o;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:yt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ht?t[0]:t,ht.merge(this,ht.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:et,!0)),bt.test(n[1])&&ht.isPlainObject(t))for(n in t)ht.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(o=et.getElementById(n[2]),o&&o.parentNode){if(o.id!==n[2])return i.find(e);this.length=1,this[0]=o}return this.context=et,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ht.isFunction(e)?i.ready(e):(e.selector!==a&&(this.selector=e.selector,this.context=e.context),ht.makeArray(e,this))},selector:"",length:0,toArray:function(){return lt.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ht.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ht.each(this,e,t)},ready:function(e){return ht.ready.promise().done(e),this},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(ht.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ct,sort:[].sort,splice:[].splice},ht.fn.init.prototype=ht.fn,ht.extend=ht.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"==typeof s||ht.isFunction(s)||(s={}),l===c&&(s=this,--c);l>c;c++)if(null!=(o=arguments[c]))for(n in o)e=s[n],i=o[n],s!==i&&(u&&i&&(ht.isPlainObject(i)||(t=ht.isArray(i)))?(t?(t=!1,r=e&&ht.isArray(e)?e:[]):r=e&&ht.isPlainObject(e)?e:{},s[n]=ht.extend(u,r,i)):i!==a&&(s[n]=i));return s},ht.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),noConflict:function(e){return i.$===ht&&(i.$=nt),e&&i.jQuery===ht&&(i.jQuery=it),ht},isReady:!1,readyWait:1,holdReady:function(e){e?ht.readyWait++:ht.ready(!0)},ready:function(e){if(e===!0?!--ht.readyWait:!ht.isReady){if(!et.body)return setTimeout(ht.ready);ht.isReady=!0,e!==!0&&--ht.readyWait>0||(Z.resolveWith(et,[ht]),ht.fn.trigger&&ht(et).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ht.type(e)},isArray:Array.isArray||function(e){return"array"===ht.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?ot[dt.call(e)]||"object":typeof e},isPlainObject:function(e){var t;if(!e||"object"!==ht.type(e)||e.nodeType||ht.isWindow(e))return!1;try{if(e.constructor&&!pt.call(e,"constructor")&&!pt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ht.support.ownLast)for(t in e)return pt.call(e,t);for(t in e);return t===a||pt.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||et;var n=bt.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=ht.buildFragment([e],t,o),o&&ht(o).remove(),ht.merge([],n.childNodes))},parseJSON:function(e){return i.JSON&&i.JSON.parse?i.JSON.parse(e):null===e?e:"string"==typeof e&&(e=ht.trim(e),e&&_t.test(e.replace(xt,"@").replace(kt,"]").replace(wt,"")))?new Function("return "+e)():(ht.error("Invalid JSON: "+e),void 0)},parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{i.DOMParser?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(o){t=a}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ht.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&ht.trim(e)&&(i.execScript||function(e){i.eval.call(i,e)})(e)},camelCase:function(e){return e.replace(Tt,"ms-").replace(Ct,Nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n,o=0,a=e.length,s=r(e);if(i){if(s)for(;a>o&&(n=t.apply(e[o],i),n!==!1);o++);else for(o in e)if(n=t.apply(e[o],i),n===!1)break}else if(s)for(;a>o&&(n=t.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=t.call(e[o],o,e[o]),n===!1)break;return e},trim:ft&&!ft.call("﻿ ")?function(e){return null==e?"":ft.call(e)}:function(e){return null==e?"":(e+"").replace(vt,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(r(Object(e))?ht.merge(i,"string"==typeof e?[e]:e):ct.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(ut)return ut.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){var i=t.length,n=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[n++]=t[o];else for(;t[o]!==a;)e[n++]=t[o++];return e.length=n,e},grep:function(e,t,i){var n,o=[],a=0,r=e.length;for(i=!!i;r>a;a++)n=!!t(e[a],a),i!==n&&o.push(e[a]);return o},map:function(e,t,i){var n,o=0,a=e.length,s=r(e),c=[];if(s)for(;a>o;o++)n=t(e[o],o,i),null!=n&&(c[c.length]=n);else for(o in e)n=t(e[o],o,i),null!=n&&(c[c.length]=n);return st.apply([],c)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(o=e[t],t=e,e=o),ht.isFunction(e)?(i=lt.call(arguments,2),n=function(){return e.apply(t||this,i.concat(lt.call(arguments)))},n.guid=e.guid=e.guid||ht.guid++,n):a},access:function(e,t,i,n,o,r,s){var c=0,l=e.length,u=null==i;if("object"===ht.type(i)){o=!0;for(c in i)ht.access(e,t,c,i[c],!0,r,s)}else if(n!==a&&(o=!0,ht.isFunction(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(ht(e),i)})),t))for(;l>c;c++)t(e[c],i,s?n:n.call(e[c],c,t(e[c],i)));return o?e:u?t.call(e):l?t(e[0],i):r},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var o,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];o=i.apply(e,n||[]);for(a in t)e.style[a]=r[a];return o}}),ht.ready.promise=function(e){if(!Z)if(Z=ht.Deferred(),"complete"===et.readyState)setTimeout(ht.ready);else if(et.addEventListener)et.addEventListener("DOMContentLoaded",At,!1),i.addEventListener("load",At,!1);else{et.attachEvent("onreadystatechange",At),i.attachEvent("onload",At);var t=!1;try{t=null==i.frameElement&&et.documentElement}catch(n){}t&&t.doScroll&&!function o(){if(!ht.isReady){try{t.doScroll("left")}catch(e){return setTimeout(o,50)}Dt(),ht.ready()}}()}return Z.promise(e)},ht.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ot["[object "+t+"]"]=t.toLowerCase()}),K=ht(et),function(e,t){function i(e,t,i,n){var o,a,r,s,c,l,u,d,h,g;if((t?t.ownerDocument||t:q)!==$&&S(t),t=t||$,i=i||[],!e||"string"!=typeof e)return i;if(1!==(s=t.nodeType)&&9!==s)return[];if(M&&!n){if(o=bt.exec(e))if(r=o[1]){if(9===s){if(a=t.getElementById(r),!a||!a.parentNode)return i;if(a.id===r)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(r))&&P(t,a)&&a.id===r)return i.push(a),i}else{if(o[2])return et.apply(i,t.getElementsByTagName(e)),i;if((r=o[3])&&k.getElementsByClassName&&t.getElementsByClassName)return et.apply(i,t.getElementsByClassName(r)),i}if(k.qsa&&(!j||!j.test(e))){if(d=u=W,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=p(e),(u=t.getAttribute("id"))?d=u.replace(xt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+f(l[c]);h=pt.test(e)&&t.parentNode||t,g=l.join(",")}if(g)try{return et.apply(i,h.querySelectorAll(g)),i}catch(m){}finally{u||t.removeAttribute("id")}}}return w(e.replace(lt,"$1"),t,i,n)}function n(){function e(i,n){return t.push(i+=" ")>C.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function o(e){return e[W]=!0,e}function a(e){var t=$.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null
}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)C.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function c(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function u(e){return o(function(t){return t=+t,o(function(i,n){for(var o,a=e([],i.length,t),r=a.length;r--;)i[o=a[r]]&&(i[o]=!(n[o]=i[o]))})})}function d(){}function p(e,t){var n,o,a,r,s,c,l,u=R[e+" "];if(u)return t?0:u.slice(0);for(s=e,c=[],l=C.preFilter;s;){(!n||(o=ut.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),c.push(a=[])),n=!1,(o=dt.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(lt," ")}),s=s.slice(n.length));for(r in C.filter)!(o=vt[r].exec(s))||l[r]&&!(o=l[r](o))||(n=o.shift(),a.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?i.error(e):R(e,c).slice(0)}function f(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function h(e,t,i){var n=t.dir,o=i&&"parentNode"===n,a=H++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,a)}:function(t,i,r){var s,c,l,u=B+" "+a;if(r){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(l=t[W]||(t[W]={}),(c=l[n])&&c[0]===u){if((s=c[1])===!0||s===T)return s===!0}else if(c=l[n]=[u],c[1]=e(t,i,r)||T,c[1]===!0)return!0}}function g(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function m(e,t,i,n,o){for(var a,r=[],s=0,c=e.length,l=null!=t;c>s;s++)(a=e[s])&&(!i||i(a,n,o))&&(r.push(a),l&&t.push(s));return r}function v(e,t,i,n,a,r){return n&&!n[W]&&(n=v(n)),a&&!a[W]&&(a=v(a,r)),o(function(o,r,s,c){var l,u,d,p=[],f=[],h=r.length,g=o||_(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:m(g,p,e,s,c),y=i?a||(o?e:h||n)?[]:r:v;if(i&&i(v,y,s,c),n)for(l=m(y,f),n(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[f[u]]=!(v[f[u]]=d));if(o){if(a||e){if(a){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(v[u]=d);a(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=a?it.call(o,d):p[u])>-1&&(o[l]=!(r[l]=d))}}else y=m(y===r?y.splice(h,y.length):y),a?a(null,r,y,c):et.apply(r,y)})}function y(e){for(var t,i,n,o=e.length,a=C.relative[e[0].type],r=a||C.relative[" "],s=a?1:0,c=h(function(e){return e===t},r,!0),l=h(function(e){return it.call(t,e)>-1},r,!0),u=[function(e,i,n){return!a&&(n||i!==I)||((t=i).nodeType?c(e,i,n):l(e,i,n))}];o>s;s++)if(i=C.relative[e[s].type])u=[h(g(u),i)];else{if(i=C.filter[e[s].type].apply(null,e[s].matches),i[W]){for(n=++s;o>n&&!C.relative[e[n].type];n++);return v(s>1&&g(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),i,n>s&&y(e.slice(s,n)),o>n&&y(e=e.slice(n)),o>n&&f(e))}u.push(i)}return g(u)}function b(e,t){var n=0,a=t.length>0,r=e.length>0,s=function(o,s,c,l,u){var d,p,f,h=[],g=0,v="0",y=o&&[],b=null!=u,_=I,w=o||r&&C.find.TAG("*",u&&s.parentNode||s),x=B+=null==_?1:Math.random()||.1;for(b&&(I=s!==$&&s,T=n);null!=(d=w[v]);v++){if(r&&d){for(p=0;f=e[p++];)if(f(d,s,c)){l.push(d);break}b&&(B=x,T=++n)}a&&((d=!f&&d)&&g--,o&&y.push(d))}if(g+=v,a&&v!==g){for(p=0;f=t[p++];)f(y,h,s,c);if(o){if(g>0)for(;v--;)y[v]||h[v]||(h[v]=Q.call(l));h=m(h)}et.apply(l,h),b&&!o&&h.length>0&&g+t.length>1&&i.uniqueSort(l)}return b&&(B=x,I=_),y};return a?o(s):s}function _(e,t,n){for(var o=0,a=t.length;a>o;o++)i(e,t[o],n);return n}function w(e,t,i,n){var o,a,r,s,c,l=p(e);if(!n&&1===l.length){if(a=l[0]=l[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&k.getById&&9===t.nodeType&&M&&C.relative[a[1].type]){if(t=(C.find.ID(r.matches[0].replace(kt,Tt),t)||[])[0],!t)return i;e=e.slice(a.shift().value.length)}for(o=vt.needsContext.test(e)?0:a.length;o--&&(r=a[o],!C.relative[s=r.type]);)if((c=C.find[s])&&(n=c(r.matches[0].replace(kt,Tt),pt.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=n.length&&f(a),!e)return et.apply(i,n),i;break}}return D(e,l)(n,t,!M,i,pt.test(e)),i}var x,k,T,C,N,A,D,I,E,S,$,F,M,j,O,L,P,W="sizzle"+-new Date,q=e.document,B=0,H=0,U=n(),R=n(),z=n(),V=!1,X=function(e,t){return e===t?(V=!0,0):0},J=typeof t,Y=1<<31,Z={}.hasOwnProperty,K=[],Q=K.pop,G=K.push,et=K.push,tt=K.slice,it=K.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ot="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=at.replace("w","w#"),st="\\["+ot+"*("+at+")"+ot+"*(?:([*^$|!~]?=)"+ot+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+ot+"*\\]",ct=":("+at+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),ut=new RegExp("^"+ot+"*,"+ot+"*"),dt=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),pt=new RegExp(ot+"*[+~]"),ft=new RegExp("="+ot+"*([^\\]'\"]*)"+ot+"*\\]","g"),gt=new RegExp(ct),mt=new RegExp("^"+rt+"$"),vt={ID:new RegExp("^#("+at+")"),CLASS:new RegExp("^\\.("+at+")"),TAG:new RegExp("^("+at.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ct),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,xt=/'|\\/g,kt=new RegExp("\\\\([\\da-f]{1,6}"+ot+"?|("+ot+")|.)","ig"),Tt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{et.apply(K=tt.call(q.childNodes),q.childNodes),K[q.childNodes.length].nodeType}catch(Ct){et={apply:K.length?function(e,t){G.apply(e,tt.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}A=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},k=i.support={},S=i.setDocument=function(e){var t=e?e.ownerDocument||e:q,i=t.defaultView;return t!==$&&9===t.nodeType&&t.documentElement?($=t,F=t.documentElement,M=!A(t),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){S()}),k.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=a(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),k.getById=a(function(e){return F.appendChild(e).id=W,!t.getElementsByName||!t.getElementsByName(W).length}),k.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==J&&M){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(e){var t=e.replace(kt,Tt);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(kt,Tt);return function(e){var i=typeof e.getAttributeNode!==J&&e.getAttributeNode("id");return i&&i.value===t}}),C.find.TAG=k.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==J?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[o++];)1===i.nodeType&&n.push(i);return n}return a},C.find.CLASS=k.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==J&&M?t.getElementsByClassName(e):void 0},O=[],j=[],(k.qsa=yt.test(t.querySelectorAll))&&(a(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||j.push("\\["+ot+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||j.push(":checked")}),a(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&j.push("[*^$]="+ot+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(k.matchesSelector=yt.test(L=F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&a(function(e){k.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",ct)}),j=j.length&&new RegExp(j.join("|")),O=O.length&&new RegExp(O.join("|")),P=yt.test(F.contains)||F.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=F.compareDocumentPosition?function(e,i){if(e===i)return V=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!k.sortDetached&&i.compareDocumentPosition(e)===n?e===t||P(q,e)?-1:i===t||P(q,i)?1:E?it.call(E,e)-it.call(E,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,o=0,a=e.parentNode,r=i.parentNode,c=[e],l=[i];if(e===i)return V=!0,0;if(!a||!r)return e===t?-1:i===t?1:a?-1:r?1:E?it.call(E,e)-it.call(E,i):0;if(a===r)return s(e,i);for(n=e;n=n.parentNode;)c.unshift(n);for(n=i;n=n.parentNode;)l.unshift(n);for(;c[o]===l[o];)o++;return o?s(c[o],l[o]):c[o]===q?-1:l[o]===q?1:0},t):$},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==$&&S(e),t=t.replace(ft,"='$1']"),!(!k.matchesSelector||!M||O&&O.test(t)||j&&j.test(t)))try{var n=L.call(e,t);if(n||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return i(t,$,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==$&&S(e),P(e,t)},i.attr=function(e,i){(e.ownerDocument||e)!==$&&S(e);var n=C.attrHandle[i.toLowerCase()],o=n&&Z.call(C.attrHandle,i.toLowerCase())?n(e,i,!M):t;return o===t?k.attributes||!M?e.getAttribute(i):(o=e.getAttributeNode(i))&&o.specified?o.value:null:o},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,o=0;if(V=!k.detectDuplicates,E=!k.sortStable&&e.slice(0),e.sort(X),V){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return e},N=i.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=N(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)i+=N(t);return i},C=i.selectors={cacheLength:50,createPseudo:o,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(kt,Tt),e[3]=(e[4]||e[5]||"").replace(kt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&gt.test(n)&&(i=p(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(kt,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ot+")"+e+"("+ot+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==J&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var a=i.attr(o,e);return null==a?"!="===t:t?(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,c){var l,u,d,p,f,h,g=a!==r?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?m.firstChild:m.lastChild],r&&y){for(u=m[W]||(m[W]={}),l=u[e]||[],f=l[0]===B&&l[1],p=l[0]===B&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[B,f,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===B)p=l[1];else for(;(d=++f&&d&&d[g]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[W]||(d[W]={}))[e]=[B,p]),d!==t)););return p-=o,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(e,t){var n,a=C.pseudos[e]||C.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return a[W]?a(t):a.length>1?(n=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,i){for(var n,o=a(e,t),r=o.length;r--;)n=it.call(e,o[r]),e[n]=!(i[n]=o[r])}):function(e){return a(e,0,n)}):a}},pseudos:{not:o(function(e){var t=[],i=[],n=D(e.replace(lt,"$1"));return n[W]?o(function(e,t,i,o){for(var a,r=n(e,null,o,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))}):function(e,o,a){return t[0]=e,n(t,null,a,i),!i.pop()}}),has:o(function(e){return function(t){return i(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||N(t)).indexOf(e)>-1}}),lang:o(function(e){return mt.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(kt,Tt).toLowerCase(),function(t){var i;do if(i=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return wt.test(e.nodeName)},input:function(e){return _t.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,i){return[0>i?i+t:i]}),even:u(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:u(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:u(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:u(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=c(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=l(x);d.prototype=C.filters=C.pseudos,C.setFilters=new d,D=i.compile=function(e,t){var i,n=[],o=[],a=z[e+" "];if(!a){for(t||(t=p(e)),i=t.length;i--;)a=y(t[i]),a[W]?n.push(a):o.push(a);a=z(e,b(o,n))}return a},k.sortStable=W.split("").sort(X).join("")===W,k.detectDuplicates=V,S(),k.sortDetached=a(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||r(nt,function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}),ht.find=i,ht.expr=i.selectors,ht.expr[":"]=ht.expr.pseudos,ht.unique=i.uniqueSort,ht.text=i.getText,ht.isXMLDoc=i.isXML,ht.contains=i.contains}(i);var It={};ht.Callbacks=function(e){e="string"==typeof e?It[e]||s(e):ht.extend({},e);var t,i,n,o,r,c,l=[],u=!e.once&&[],d=function(a){for(i=e.memory&&a,n=!0,r=c||0,c=0,o=l.length,t=!0;l&&o>r;r++)if(l[r].apply(a[0],a[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,l&&(u?u.length&&d(u.shift()):i?l=[]:p.disable())},p={add:function(){if(l){var n=l.length;!function a(t){ht.each(t,function(t,i){var n=ht.type(i);"function"===n?e.unique&&p.has(i)||l.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),t?o=l.length:i&&(c=n,d(i))}return this},remove:function(){return l&&ht.each(arguments,function(e,i){for(var n;(n=ht.inArray(i,l,n))>-1;)l.splice(n,1),t&&(o>=n&&o--,r>=n&&r--)}),this},has:function(e){return e?ht.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=i=a,this},disabled:function(){return!l},lock:function(){return u=a,i||p.disable(),this},locked:function(){return!u},fireWith:function(e,i){return!l||n&&!u||(i=i||[],i=[e,i.slice?i.slice():i],t?u.push(i):d(i)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},ht.extend({Deferred:function(e){var t=[["resolve","done",ht.Callbacks("once memory"),"resolved"],["reject","fail",ht.Callbacks("once memory"),"rejected"],["notify","progress",ht.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ht.Deferred(function(i){ht.each(t,function(t,a){var r=a[0],s=ht.isFunction(e[t])&&e[t];o[a[1]](function(){var e=s&&s.apply(this,arguments);e&&ht.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ht.extend(e,n):n}},o={};return n.pipe=n.then,ht.each(t,function(e,a){var r=a[2],s=a[3];n[a[1]]=r.add,s&&r.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?n:this,arguments),this},o[a[0]+"With"]=r.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,a=lt.call(arguments),r=a.length,s=1!==r||e&&ht.isFunction(e.promise)?r:0,c=1===s?e:ht.Deferred(),l=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?lt.call(arguments):o,n===t?c.notifyWith(i,n):--s||c.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)a[o]&&ht.isFunction(a[o].promise)?a[o].promise().done(l(o,n,a)).fail(c.reject).progress(l(o,i,t)):--s;return s||c.resolveWith(n,a),c.promise()}}),ht.support=function(e){var t,n,o,a,r,s,c,l,u,d=et.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!t.length)return e;a=et.createElement("select"),s=a.appendChild(et.createElement("option")),o=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==d.className,e.leadingWhitespace=3===d.firstChild.nodeType,e.tbody=!d.getElementsByTagName("tbody").length,e.htmlSerialize=!!d.getElementsByTagName("link").length,e.style=/top/.test(n.getAttribute("style")),e.hrefNormalized="/a"===n.getAttribute("href"),e.opacity=/^0.5/.test(n.style.opacity),e.cssFloat=!!n.style.cssFloat,e.checkOn=!!o.value,e.optSelected=s.selected,e.enctype=!!et.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==et.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,a.disabled=!0,e.optDisabled=!s.disabled;try{delete d.test}catch(p){e.deleteExpando=!1}o=et.createElement("input"),o.setAttribute("value",""),e.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),r=et.createDocumentFragment(),r.appendChild(o),e.appendChecked=o.checked,e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+u,"t"),e[u+"Bubbles"]=c in i||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ht(e))break;return e.ownLast="0"!==u,ht(function(){var t,n,o,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=et.getElementsByTagName("body")[0];r&&(t=et.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(t).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",e.reliableHiddenOffsets=l&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ht.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===d.offsetWidth}),i.getComputedStyle&&(e.pixelPosition="1%"!==(i.getComputedStyle(d,null)||{}).top,e.boxSizingReliable="4px"===(i.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(et.createElement("div")),n.style.cssText=d.style.cssText=a,n.style.marginRight=n.style.width="0",d.style.width="1px",e.reliableMarginRight=!parseFloat((i.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==Q&&(d.innerHTML="",d.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==d.offsetWidth,e.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(t),t=d=o=n=null)}),t=a=r=s=n=o=null,e}({});var Et=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,St=/([A-Z])/g;ht.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ht.cache[e[ht.expando]]:e[ht.expando],!!e&&!d(e)},data:function(e,t,i){return c(e,t,i)},removeData:function(e,t){return l(e,t)},_data:function(e,t,i){return c(e,t,i,!0)},_removeData:function(e,t){return l(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ht.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ht.fn.extend({data:function(e,t){var i,n,o=null,r=0,s=this[0];if(e===a){if(this.length&&(o=ht.data(s),1===s.nodeType&&!ht._data(s,"parsedAttrs"))){for(i=s.attributes;r<i.length;r++)n=i[r].name,0===n.indexOf("data-")&&(n=ht.camelCase(n.slice(5)),u(s,n,o[n]));ht._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ht.data(this,e)}):arguments.length>1?this.each(function(){ht.data(this,e,t)}):s?u(s,e,ht.data(s,e)):null},removeData:function(e){return this.each(function(){ht.removeData(this,e)})}}),ht.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ht._data(e,t),i&&(!n||ht.isArray(i)?n=ht._data(e,t,ht.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ht.queue(e,t),n=i.length,o=i.shift(),a=ht._queueHooks(e,t),r=function(){ht.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete a.stop,o.call(e,r,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ht._data(e,i)||ht._data(e,i,{empty:ht.Callbacks("once memory").add(function(){ht._removeData(e,t+"queue"),ht._removeData(e,i)})})}}),ht.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ht.queue(this[0],e):t===a?this:this.each(function(){var i=ht.queue(this,e,t);ht._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ht.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ht.dequeue(this,e)})},delay:function(e,t){return e=ht.fx?ht.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=ht.Deferred(),r=this,s=this.length,c=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=a),e=e||"fx";s--;)i=ht._data(r[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(c));return c(),o.promise(t)}});var $t,Ft,Mt=/[\t\r\n\f]/g,jt=/\r/g,Ot=/^(?:input|select|textarea|button|object)$/i,Lt=/^(?:a|area)$/i,Pt=/^(?:checked|selected)$/i,Wt=ht.support.getSetAttribute,qt=ht.support.input;ht.fn.extend({attr:function(e,t){return ht.access(this,ht.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ht.removeAttr(this,e)})},prop:function(e,t){return ht.access(this,ht.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ht.propFix[e]||e,this.each(function(){try{this[e]=a,delete this[e]}catch(t){}})},addClass:function(e){var t,i,n,o,a,r=0,s=this.length,c="string"==typeof e&&e;if(ht.isFunction(e))return this.each(function(t){ht(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(mt)||[];s>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mt," "):" ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i.className=ht.trim(n)}return this},removeClass:function(e){var t,i,n,o,a,r=0,s=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ht.isFunction(e))return this.each(function(t){ht(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(mt)||[];s>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mt," "):"")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=e?ht.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ht.isFunction(e)?this.each(function(i){ht(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,o=ht(this),a=e.match(mt)||[];t=a[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(i===Q||"boolean"===i)&&(this.className&&ht._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ht._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Mt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=ht.isFunction(e),this.each(function(t){var o;1===this.nodeType&&(o=n?e.call(this,t,ht(this).val()):e,null==o?o="":"number"==typeof o?o+="":ht.isArray(o)&&(o=ht.map(o,function(e){return null==e?"":e+""})),i=ht.valHooks[this.type]||ht.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==a||(this.value=o))});if(o)return i=ht.valHooks[o.type]||ht.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(t=i.get(o,"value"))!==a?t:(t=o.value,"string"==typeof t?t.replace(jt,""):null==t?"":t)}}}),ht.extend({valHooks:{option:{get:function(e){var t=ht.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,r=a?null:[],s=a?o+1:n.length,c=0>o?s:a?o:0;s>c;c++)if(i=n[c],!(!i.selected&&c!==o||(ht.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&ht.nodeName(i.parentNode,"optgroup"))){if(t=ht(i).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var i,n,o=e.options,a=ht.makeArray(t),r=o.length;r--;)n=o[r],(n.selected=ht.inArray(ht(n).val(),a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}},attr:function(e,t,i){var n,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===Q?ht.prop(e,t,i):(1===r&&ht.isXMLDoc(e)||(t=t.toLowerCase(),n=ht.attrHooks[t]||(ht.expr.match.bool.test(t)?Ft:$t)),i===a?n&&"get"in n&&null!==(o=n.get(e,t))?o:(o=ht.find.attr(e,t),null==o?a:o):null!==i?n&&"set"in n&&(o=n.set(e,i,t))!==a?o:(e.setAttribute(t,i+""),i):(ht.removeAttr(e,t),void 0))},removeAttr:function(e,t){var i,n,o=0,a=t&&t.match(mt);if(a&&1===e.nodeType)for(;i=a[o++];)n=ht.propFix[i]||i,ht.expr.match.bool.test(i)?qt&&Wt||!Pt.test(i)?e[n]=!1:e[ht.camelCase("default-"+i)]=e[n]=!1:ht.attr(e,i,""),e.removeAttribute(Wt?i:n)},attrHooks:{type:{set:function(e,t){if(!ht.support.radioValue&&"radio"===t&&ht.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r=1!==s||!ht.isXMLDoc(e),r&&(t=ht.propFix[t]||t,o=ht.propHooks[t]),i!==a?o&&"set"in o&&(n=o.set(e,i,t))!==a?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ht.find.attr(e,"tabindex");return t?parseInt(t,10):Ot.test(e.nodeName)||Lt.test(e.nodeName)&&e.href?0:-1}}}}),Ft={set:function(e,t,i){return t===!1?ht.removeAttr(e,i):qt&&Wt||!Pt.test(i)?e.setAttribute(!Wt&&ht.propFix[i]||i,i):e[ht.camelCase("default-"+i)]=e[i]=!0,i}},ht.each(ht.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ht.expr.attrHandle[t]||ht.find.attr;ht.expr.attrHandle[t]=qt&&Wt||!Pt.test(t)?function(e,t,n){var o=ht.expr.attrHandle[t],r=n?a:(ht.expr.attrHandle[t]=a)!=i(e,t,n)?t.toLowerCase():null;return ht.expr.attrHandle[t]=o,r}:function(e,t,i){return i?a:e[ht.camelCase("default-"+t)]?t.toLowerCase():null}}),qt&&Wt||(ht.attrHooks.value={set:function(e,t,i){return ht.nodeName(e,"input")?(e.defaultValue=t,void 0):$t&&$t.set(e,t,i)}}),Wt||($t={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:a}},ht.expr.attrHandle.id=ht.expr.attrHandle.name=ht.expr.attrHandle.coords=function(e,t,i){var n;return i?a:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},ht.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:a},set:$t.set},ht.attrHooks.contenteditable={set:function(e,t,i){$t.set(e,""===t?!1:t,i)}},ht.each(["width","height"],function(e,t){ht.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ht.support.hrefNormalized||ht.each(["href","src"],function(e,t){ht.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ht.support.style||(ht.attrHooks.style={get:function(e){return e.style.cssText||a},set:function(e,t){return e.style.cssText=t+""}}),ht.support.optSelected||(ht.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ht.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ht.propFix[this.toLowerCase()]=this}),ht.support.enctype||(ht.propFix.enctype="encoding"),ht.each(["radio","checkbox"],function(){ht.valHooks[this]={set:function(e,t){return ht.isArray(t)?e.checked=ht.inArray(ht(e).val(),t)>=0:void 0
}},ht.support.checkOn||(ht.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Bt=/^(?:input|select|textarea)$/i,Ht=/^key/,Ut=/^(?:mouse|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,zt=/^([^.]*)(?:\.(.+)|)$/;ht.event={global:{},add:function(e,t,i,n,o){var r,s,c,l,u,d,p,f,h,g,m,v=ht._data(e);if(v){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ht.guid++),(s=v.events)||(s=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ht===Q||e&&ht.event.triggered===e.type?a:ht.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(mt)||[""],c=t.length;c--;)r=zt.exec(t[c])||[],h=m=r[1],g=(r[2]||"").split(".").sort(),h&&(u=ht.event.special[h]||{},h=(o?u.delegateType:u.bindType)||h,u=ht.event.special[h]||{},p=ht.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ht.expr.match.needsContext.test(o),namespace:g.join(".")},l),(f=s[h])||(f=s[h]=[],f.delegateCount=0,u.setup&&u.setup.call(e,n,g,d)!==!1||(e.addEventListener?e.addEventListener(h,d,!1):e.attachEvent&&e.attachEvent("on"+h,d))),u.add&&(u.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),o?f.splice(f.delegateCount++,0,p):f.push(p),ht.event.global[h]=!0);e=null}},remove:function(e,t,i,n,o){var a,r,s,c,l,u,d,p,f,h,g,m=ht.hasData(e)&&ht._data(e);if(m&&(u=m.events)){for(t=(t||"").match(mt)||[""],l=t.length;l--;)if(s=zt.exec(t[l])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(d=ht.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,p=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=p.length;a--;)r=p[a],!o&&g!==r.origType||i&&i.guid!==r.guid||s&&!s.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(p.splice(a,1),r.selector&&p.delegateCount--,d.remove&&d.remove.call(e,r));c&&!p.length&&(d.teardown&&d.teardown.call(e,h,m.handle)!==!1||ht.removeEvent(e,f,m.handle),delete u[f])}else for(f in u)ht.event.remove(e,f+t[l],i,n,!0);ht.isEmptyObject(u)&&(delete m.handle,ht._removeData(e,"events"))}},trigger:function(e,t,n,o){var r,s,c,l,u,d,p,f=[n||et],h=pt.call(e,"type")?e.type:e,g=pt.call(e,"namespace")?e.namespace.split("."):[];if(c=d=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!Rt.test(h+ht.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),s=h.indexOf(":")<0&&"on"+h,e=e[ht.expando]?e:new ht.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=g.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=a,e.target||(e.target=n),t=null==t?[e]:ht.makeArray(t,[e]),u=ht.event.special[h]||{},o||!u.trigger||u.trigger.apply(n,t)!==!1)){if(!o&&!u.noBubble&&!ht.isWindow(n)){for(l=u.delegateType||h,Rt.test(l+h)||(c=c.parentNode);c;c=c.parentNode)f.push(c),d=c;d===(n.ownerDocument||et)&&f.push(d.defaultView||d.parentWindow||i)}for(p=0;(c=f[p++])&&!e.isPropagationStopped();)e.type=p>1?l:u.bindType||h,r=(ht._data(c,"events")||{})[e.type]&&ht._data(c,"handle"),r&&r.apply(c,t),r=s&&c[s],r&&ht.acceptData(c)&&r.apply&&r.apply(c,t)===!1&&e.preventDefault();if(e.type=h,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),t)===!1)&&ht.acceptData(n)&&s&&n[h]&&!ht.isWindow(n)){d=n[s],d&&(n[s]=null),ht.event.triggered=h;try{n[h]()}catch(m){}ht.event.triggered=a,d&&(n[s]=d)}return e.result}},dispatch:function(e){e=ht.event.fix(e);var t,i,n,o,r,s=[],c=lt.call(arguments),l=(ht._data(this,"events")||{})[e.type]||[],u=ht.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ht.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(n=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((ht.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,c),i!==a&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,r,s=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],r=0;c>r;r++)n=t[r],i=n.selector+" ",o[i]===a&&(o[i]=n.needsContext?ht(i,this).index(l)>=0:ht.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&s.push({elem:l,handlers:o})}return c<t.length&&s.push({elem:this,handlers:t.slice(c)}),s},fix:function(e){if(e[ht.expando])return e;var t,i,n,o=e.type,a=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Ut.test(o)?this.mouseHooks:Ht.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new ht.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i];return e.target||(e.target=a.srcElement||et),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||et,o=n.documentElement,i=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||r===a||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ht.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ht.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==a&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=ht.extend(new ht.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ht.event.trigger(o,null,t):ht.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},ht.removeEvent=et.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===Q&&(e[n]=null),e.detachEvent(n,i))},ht.Event=function(e,t){return this instanceof ht.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?p:f):this.type=e,t&&ht.extend(this,t),this.timeStamp=e&&e.timeStamp||ht.now(),this[ht.expando]=!0,void 0):new ht.Event(e,t)},ht.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=p,this.stopPropagation()}},ht.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ht.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==n&&!ht.contains(n,o))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),ht.support.submitBubbles||(ht.event.special.submit={setup:function(){return ht.nodeName(this,"form")?!1:(ht.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=ht.nodeName(t,"input")||ht.nodeName(t,"button")?t.form:a;i&&!ht._data(i,"submitBubbles")&&(ht.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ht._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ht.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ht.nodeName(this,"form")?!1:(ht.event.remove(this,"._submit"),void 0)}}),ht.support.changeBubbles||(ht.event.special.change={setup:function(){return Bt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ht.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ht.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ht.event.simulate("change",this,e,!0)})),!1):(ht.event.add(this,"beforeactivate._change",function(e){var t=e.target;Bt.test(t.nodeName)&&!ht._data(t,"changeBubbles")&&(ht.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ht.event.simulate("change",this.parentNode,e,!0)}),ht._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ht.event.remove(this,"._change"),!Bt.test(this.nodeName)}}),ht.support.focusinBubbles||ht.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ht.event.simulate(t,e.target,ht.event.fix(e),!0)};ht.event.special[t]={setup:function(){0===i++&&et.addEventListener(e,n,!0)},teardown:function(){0===--i&&et.removeEventListener(e,n,!0)}}}),ht.fn.extend({on:function(e,t,i,n,o){var r,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=a);for(r in e)this.on(r,t,i,e[r],o);return this}if(null==i&&null==n?(n=t,i=t=a):null==n&&("string"==typeof t?(n=i,i=a):(n=i,i=t,t=a)),n===!1)n=f;else if(!n)return this;return 1===o&&(s=n,n=function(e){return ht().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=ht.guid++)),this.each(function(){ht.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ht(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=a),i===!1&&(i=f),this.each(function(){ht.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){ht.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ht.event.trigger(e,t,i,!0):void 0}});var Vt=/^.[^:#\[\.,]*$/,Xt=/^(?:parents|prev(?:Until|All))/,Jt=ht.expr.match.needsContext,Yt={children:!0,contents:!0,next:!0,prev:!0};ht.fn.extend({find:function(e){var t,i=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(ht(e).filter(function(){for(t=0;o>t;t++)if(ht.contains(n[t],this))return!0}));for(t=0;o>t;t++)ht.find(e,n[t],i);return i=this.pushStack(o>1?ht.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=ht(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ht.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(m(this,e||[],!0))},filter:function(e){return this.pushStack(m(this,e||[],!1))},is:function(e){return!!m(this,"string"==typeof e&&Jt.test(e)?ht(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,o=this.length,a=[],r=Jt.test(e)||"string"!=typeof e?ht(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ht.find.matchesSelector(i,e))){i=a.push(i);break}return this.pushStack(a.length>1?ht.unique(a):a)},index:function(e){return e?"string"==typeof e?ht.inArray(this[0],ht(e)):ht.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ht(e,t):ht.makeArray(e&&e.nodeType?[e]:e),n=ht.merge(this.get(),i);return this.pushStack(ht.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ht.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ht.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ht.dir(e,"parentNode",i)},next:function(e){return g(e,"nextSibling")},prev:function(e){return g(e,"previousSibling")},nextAll:function(e){return ht.dir(e,"nextSibling")},prevAll:function(e){return ht.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ht.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ht.dir(e,"previousSibling",i)},siblings:function(e){return ht.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ht.sibling(e.firstChild)},contents:function(e){return ht.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ht.merge([],e.childNodes)}},function(e,t){ht.fn[e]=function(i,n){var o=ht.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ht.filter(n,o)),this.length>1&&(Yt[e]||(o=ht.unique(o)),Xt.test(e)&&(o=o.reverse())),this.pushStack(o)}}),ht.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ht.find.matchesSelector(n,e)?[n]:[]:ht.find.matches(e,ht.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,i){for(var n=[],o=e[t];o&&9!==o.nodeType&&(i===a||1!==o.nodeType||!ht(o).is(i));)1===o.nodeType&&n.push(o),o=o[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Zt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Kt=/ jQuery\d+="(?:null|\d+)"/g,Qt=new RegExp("<(?:"+Zt+")[\\s/>]","i"),Gt=/^\s+/,ei=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ti=/<([\w:]+)/,ii=/<tbody/i,ni=/<|&#?\w+;/,oi=/<(?:script|style|link)/i,ai=/^(?:checkbox|radio)$/i,ri=/checked\s*(?:[^=]|=\s*.checked.)/i,si=/^$|\/(?:java|ecma)script/i,ci=/^true\/(.*)/,li=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ui={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ht.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},di=v(et),pi=di.appendChild(et.createElement("div"));ui.optgroup=ui.option,ui.tbody=ui.tfoot=ui.colgroup=ui.caption=ui.thead,ui.th=ui.td,ht.fn.extend({text:function(e){return ht.access(this,function(e){return e===a?ht.text(this):this.empty().append((this[0]&&this[0].ownerDocument||et).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ht.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||ht.cleanData(T(i)),i.parentNode&&(t&&ht.contains(i.ownerDocument,i)&&w(T(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ht.cleanData(T(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ht.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ht.clone(this,e,t)})},html:function(e){return ht.access(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===a)return 1===t.nodeType?t.innerHTML.replace(Kt,""):a;if(!("string"!=typeof e||oi.test(e)||!ht.support.htmlSerialize&&Qt.test(e)||!ht.support.leadingWhitespace&&Gt.test(e)||ui[(ti.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ei,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(ht.cleanData(T(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ht.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],o=e[t++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),ht(this).remove(),o.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=st.apply([],e);var n,o,a,r,s,c,l=0,u=this.length,d=this,p=u-1,f=e[0],h=ht.isFunction(f);if(h||!(1>=u||"string"!=typeof f||ht.support.checkClone)&&ri.test(f))return this.each(function(n){var o=d.eq(n);h&&(e[0]=f.call(this,n,o.html())),o.domManip(e,t,i)});if(u&&(c=ht.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=c.firstChild,1===c.childNodes.length&&(c=n),n)){for(r=ht.map(T(c,"script"),b),a=r.length;u>l;l++)o=c,l!==p&&(o=ht.clone(o,!0,!0),a&&ht.merge(r,T(o,"script"))),t.call(this[l],o,l);if(a)for(s=r[r.length-1].ownerDocument,ht.map(r,_),l=0;a>l;l++)o=r[l],si.test(o.type||"")&&!ht._data(o,"globalEval")&&ht.contains(s,o)&&(o.src?ht._evalUrl(o.src):ht.globalEval((o.text||o.textContent||o.innerHTML||"").replace(li,"")));c=n=null}return this}}),ht.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ht.fn[e]=function(e){for(var i,n=0,o=[],a=ht(e),r=a.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ht(a[n])[t](i),ct.apply(o,i.get());return this.pushStack(o)}}),ht.extend({clone:function(e,t,i){var n,o,a,r,s,c=ht.contains(e.ownerDocument,e);if(ht.support.html5Clone||ht.isXMLDoc(e)||!Qt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(pi.innerHTML=e.outerHTML,pi.removeChild(a=pi.firstChild)),!(ht.support.noCloneEvent&&ht.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ht.isXMLDoc(e)))for(n=T(a),s=T(e),r=0;null!=(o=s[r]);++r)n[r]&&k(o,n[r]);if(t)if(i)for(s=s||T(e),n=n||T(a),r=0;null!=(o=s[r]);r++)x(o,n[r]);else x(e,a);return n=T(a,"script"),n.length>0&&w(n,!c&&T(e,"script")),n=s=o=null,a},buildFragment:function(e,t,i,n){for(var o,a,r,s,c,l,u,d=e.length,p=v(t),f=[],h=0;d>h;h++)if(a=e[h],a||0===a)if("object"===ht.type(a))ht.merge(f,a.nodeType?[a]:a);else if(ni.test(a)){for(s=s||p.appendChild(t.createElement("div")),c=(ti.exec(a)||["",""])[1].toLowerCase(),u=ui[c]||ui._default,s.innerHTML=u[1]+a.replace(ei,"<$1></$2>")+u[2],o=u[0];o--;)s=s.lastChild;if(!ht.support.leadingWhitespace&&Gt.test(a)&&f.push(t.createTextNode(Gt.exec(a)[0])),!ht.support.tbody)for(a="table"!==c||ii.test(a)?"<table>"!==u[1]||ii.test(a)?0:s:s.firstChild,o=a&&a.childNodes.length;o--;)ht.nodeName(l=a.childNodes[o],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(ht.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else f.push(t.createTextNode(a));for(s&&p.removeChild(s),ht.support.appendChecked||ht.grep(T(f,"input"),C),h=0;a=f[h++];)if((!n||-1===ht.inArray(a,n))&&(r=ht.contains(a.ownerDocument,a),s=T(p.appendChild(a),"script"),r&&w(s),i))for(o=0;a=s[o++];)si.test(a.type||"")&&i.push(a);return s=null,p},cleanData:function(e,t){for(var i,n,o,a,r=0,s=ht.expando,c=ht.cache,l=ht.support.deleteExpando,u=ht.event.special;null!=(i=e[r]);r++)if((t||ht.acceptData(i))&&(o=i[s],a=o&&c[o])){if(a.events)for(n in a.events)u[n]?ht.event.remove(i,n):ht.removeEvent(i,n,a.handle);c[o]&&(delete c[o],l?delete i[s]:typeof i.removeAttribute!==Q?i.removeAttribute(s):i[s]=null,at.push(o))}},_evalUrl:function(e){return ht.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ht.fn.extend({wrapAll:function(e){if(ht.isFunction(e))return this.each(function(t){ht(this).wrapAll(e.call(this,t))});if(this[0]){var t=ht(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ht.isFunction(e)?this.each(function(t){ht(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ht(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ht.isFunction(e);return this.each(function(i){ht(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ht.nodeName(this,"body")||ht(this).replaceWith(this.childNodes)}).end()}});var fi,hi,gi,mi=/alpha\([^)]*\)/i,vi=/opacity\s*=\s*([^)]*)/,yi=/^(top|right|bottom|left)$/,bi=/^(none|table(?!-c[ea]).+)/,_i=/^margin/,wi=new RegExp("^("+gt+")(.*)$","i"),xi=new RegExp("^("+gt+")(?!px)[a-z%]+$","i"),ki=new RegExp("^([+-])=("+gt+")","i"),Ti={BODY:"block"},Ci={position:"absolute",visibility:"hidden",display:"block"},Ni={letterSpacing:0,fontWeight:400},Ai=["Top","Right","Bottom","Left"],Di=["Webkit","O","Moz","ms"];ht.fn.extend({css:function(e,t){return ht.access(this,function(e,t,i){var n,o,r={},s=0;if(ht.isArray(t)){for(o=hi(e),n=t.length;n>s;s++)r[t[s]]=ht.css(e,t[s],!1,o);return r}return i!==a?ht.style(e,t,i):ht.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){A(this)?ht(this).show():ht(this).hide()})}}),ht.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=gi(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ht.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,c=ht.camelCase(t),l=e.style;if(t=ht.cssProps[c]||(ht.cssProps[c]=N(l,c)),s=ht.cssHooks[t]||ht.cssHooks[c],i===a)return s&&"get"in s&&(o=s.get(e,!1,n))!==a?o:l[t];if(r=typeof i,"string"===r&&(o=ki.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ht.css(e,t)),r="number"),!(null==i||"number"===r&&isNaN(i)||("number"!==r||ht.cssNumber[c]||(i+="px"),ht.support.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&(i=s.set(e,i,n))===a)))try{l[t]=i}catch(u){}}},css:function(e,t,i,n){var o,r,s,c=ht.camelCase(t);return t=ht.cssProps[c]||(ht.cssProps[c]=N(e.style,c)),s=ht.cssHooks[t]||ht.cssHooks[c],s&&"get"in s&&(r=s.get(e,!0,i)),r===a&&(r=gi(e,t,n)),"normal"===r&&t in Ni&&(r=Ni[t]),""===i||i?(o=parseFloat(r),i===!0||ht.isNumeric(o)?o||0:r):r}}),i.getComputedStyle?(hi=function(e){return i.getComputedStyle(e,null)},gi=function(e,t,i){var n,o,r,s=i||hi(e),c=s?s.getPropertyValue(t)||s[t]:a,l=e.style;return s&&(""!==c||ht.contains(e.ownerDocument,e)||(c=ht.style(e,t)),xi.test(c)&&_i.test(t)&&(n=l.width,o=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=s.width,l.width=n,l.minWidth=o,l.maxWidth=r)),c}):et.documentElement.currentStyle&&(hi=function(e){return e.currentStyle},gi=function(e,t,i){var n,o,r,s=i||hi(e),c=s?s[t]:a,l=e.style;return null==c&&l&&l[t]&&(c=l[t]),xi.test(c)&&!yi.test(t)&&(n=l.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),l.left="fontSize"===t?"1em":c,c=l.pixelLeft+"px",l.left=n,r&&(o.left=r)),""===c?"auto":c}),ht.each(["height","width"],function(e,t){ht.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&bi.test(ht.css(e,"display"))?ht.swap(e,Ci,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,i,n){var o=n&&hi(e);return I(e,i,n?E(e,t,n,ht.support.boxSizing&&"border-box"===ht.css(e,"boxSizing",!1,o),o):0)}}}),ht.support.opacity||(ht.cssHooks.opacity={get:function(e,t){return vi.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=ht.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ht.trim(a.replace(mi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=mi.test(a)?a.replace(mi,o):a+" "+o)}}),ht(function(){ht.support.reliableMarginRight||(ht.cssHooks.marginRight={get:function(e,t){return t?ht.swap(e,{display:"inline-block"},gi,[e,"marginRight"]):void 0}}),!ht.support.pixelPosition&&ht.fn.position&&ht.each(["top","left"],function(e,t){ht.cssHooks[t]={get:function(e,i){return i?(i=gi(e,t),xi.test(i)?ht(e).position()[t]+"px":i):void 0}}})}),ht.expr&&ht.expr.filters&&(ht.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ht.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ht.css(e,"display"))},ht.expr.filters.visible=function(e){return!ht.expr.filters.hidden(e)}),ht.each({margin:"",padding:"",border:"Width"},function(e,t){ht.cssHooks[e+t]={expand:function(i){for(var n=0,o={},a="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+Ai[n]+t]=a[n]||a[n-2]||a[0];return o}},_i.test(e)||(ht.cssHooks[e+t].set=I)});var Ii=/%20/g,Ei=/\[\]$/,Si=/\r?\n/g,$i=/^(?:submit|button|image|reset|file)$/i,Fi=/^(?:input|select|textarea|keygen)/i;ht.fn.extend({serialize:function(){return ht.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ht.prop(this,"elements");return e?ht.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ht(this).is(":disabled")&&Fi.test(this.nodeName)&&!$i.test(e)&&(this.checked||!ai.test(e))}).map(function(e,t){var i=ht(this).val();return null==i?null:ht.isArray(i)?ht.map(i,function(e){return{name:t.name,value:e.replace(Si,"\r\n")}}):{name:t.name,value:i.replace(Si,"\r\n")}}).get()}}),ht.param=function(e,t){var i,n=[],o=function(e,t){t=ht.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===a&&(t=ht.ajaxSettings&&ht.ajaxSettings.traditional),ht.isArray(e)||e.jquery&&!ht.isPlainObject(e))ht.each(e,function(){o(this.name,this.value)});else for(i in e)M(i,e[i],t,o);return n.join("&").replace(Ii,"+")},ht.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ht.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ht.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Mi,ji,Oi=ht.now(),Li=/\?/,Pi=/#.*$/,Wi=/([?&])_=[^&]*/,qi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hi=/^(?:GET|HEAD)$/,Ui=/^\/\//,Ri=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,zi=ht.fn.load,Vi={},Xi={},Ji="*/".concat("*");try{ji=G.href}catch(Yi){ji=et.createElement("a"),ji.href="",ji=ji.href}Mi=Ri.exec(ji.toLowerCase())||[],ht.fn.load=function(e,t,i){if("string"!=typeof e&&zi)return zi.apply(this,arguments);var n,o,r,s=this,c=e.indexOf(" ");return c>=0&&(n=e.slice(c,e.length),e=e.slice(0,c)),ht.isFunction(t)?(i=t,t=a):t&&"object"==typeof t&&(r="POST"),s.length>0&&ht.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?ht("<div>").append(ht.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,o||[e.responseText,t,e])}),this},ht.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ht.fn[t]=function(e){return this.on(t,e)}}),ht.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ji,type:"GET",isLocal:Bi.test(Mi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ji,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ht.parseJSON,"text xml":ht.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,ht.ajaxSettings),t):L(ht.ajaxSettings,e)},ajaxPrefilter:j(Vi),ajaxTransport:j(Xi),ajax:function(e,t){function i(e,t,i,n){var o,d,y,b,w,k=t;2!==_&&(_=2,c&&clearTimeout(c),u=a,s=n||"",x.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(b=P(p,x,i)),b=W(p,b,x,o),o?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ht.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(ht.etag[r]=w)),204===e||"HEAD"===p.type?k="nocontent":304===e?k="notmodified":(k=b.state,d=b.data,y=b.error,o=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(t||k)+"",o?g.resolveWith(f,[d,k,x]):g.rejectWith(f,[x,k,y]),x.statusCode(v),v=a,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[x,p,o?d:y]),m.fireWith(f,[x,k]),l&&(h.trigger("ajaxComplete",[x,p]),--ht.active||ht.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=a),t=t||{};var n,o,r,s,c,l,u,d,p=ht.ajaxSetup({},t),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?ht(f):ht.event,g=ht.Deferred(),m=ht.Callbacks("once memory"),v=p.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=qi.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=b[i]=b[i]||e,y[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),i(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((e||p.url||ji)+"").replace(Pi,"").replace(Ui,Mi[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=ht.trim(p.dataType||"*").toLowerCase().match(mt)||[""],null==p.crossDomain&&(n=Ri.exec(p.url.toLowerCase()),p.crossDomain=!(!n||n[1]===Mi[1]&&n[2]===Mi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Mi[3]||("http:"===Mi[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ht.param(p.data,p.traditional)),O(Vi,p,t,x),2===_)return x;l=p.global,l&&0===ht.active++&&ht.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Hi.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(Li.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Wi.test(r)?r.replace(Wi,"$1_="+Oi++):r+(Li.test(r)?"&":"?")+"_="+Oi++)),p.ifModified&&(ht.lastModified[r]&&x.setRequestHeader("If-Modified-Since",ht.lastModified[r]),ht.etag[r]&&x.setRequestHeader("If-None-Match",ht.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ji+"; q=0.01":""):p.accepts["*"]);for(o in p.headers)x.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(p.beforeSend.call(f,x,p)===!1||2===_))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](p[o]);if(u=O(Xi,p,t,x)){x.readyState=1,l&&h.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(c=setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,u.send(y,i)}catch(k){if(!(2>_))throw k;i(-1,k)}}else i(-1,"No Transport");return x},getJSON:function(e,t,i){return ht.get(e,t,i,"json")},getScript:function(e,t){return ht.get(e,a,t,"script")}}),ht.each(["get","post"],function(e,t){ht[t]=function(e,i,n,o){return ht.isFunction(i)&&(o=o||n,n=i,i=a),ht.ajax({url:e,type:t,dataType:o,data:i,success:n})}}),ht.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ht.globalEval(e),e
}}}),ht.ajaxPrefilter("script",function(e){e.cache===a&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ht.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=et.head||ht("head")[0]||et.documentElement;return{send:function(n,o){t=et.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||o(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(a,!0)}}}});var Zi=[],Ki=/(=)\?(?=&|$)|\?\?/;ht.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zi.pop()||ht.expando+"_"+Oi++;return this[e]=!0,e}}),ht.ajaxPrefilter("json jsonp",function(e,t,n){var o,r,s,c=e.jsonp!==!1&&(Ki.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ki.test(e.data)&&"data");return c||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=ht.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,c?e[c]=e[c].replace(Ki,"$1"+o):e.jsonp!==!1&&(e.url+=(Li.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||ht.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=i[o],i[o]=function(){s=arguments},n.always(function(){i[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,Zi.push(o)),s&&ht.isFunction(r)&&r(s[0]),s=r=a}),"script"):void 0});var Qi,Gi,en=0,tn=i.ActiveXObject&&function(){var e;for(e in Qi)Qi[e](a,!0)};ht.ajaxSettings.xhr=i.ActiveXObject?function(){return!this.isLocal&&q()||B()}:q,Gi=ht.ajaxSettings.xhr(),ht.support.cors=!!Gi&&"withCredentials"in Gi,Gi=ht.support.ajax=!!Gi,Gi&&ht.ajaxTransport(function(e){if(!e.crossDomain||ht.support.cors){var t;return{send:function(n,o){var r,s,c=e.xhr();if(e.username?c.open(e.type,e.url,e.async,e.username,e.password):c.open(e.type,e.url,e.async),e.xhrFields)for(s in e.xhrFields)c[s]=e.xhrFields[s];e.mimeType&&c.overrideMimeType&&c.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");try{for(s in n)c.setRequestHeader(s,n[s])}catch(l){}c.send(e.hasContent&&e.data||null),t=function(i,n){var s,l,u,d;try{if(t&&(n||4===c.readyState))if(t=a,r&&(c.onreadystatechange=ht.noop,tn&&delete Qi[r]),n)4!==c.readyState&&c.abort();else{d={},s=c.status,l=c.getAllResponseHeaders(),"string"==typeof c.responseText&&(d.text=c.responseText);try{u=c.statusText}catch(p){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(f){n||o(-1,f)}d&&o(s,u,d,l)},e.async?4===c.readyState?setTimeout(t):(r=++en,tn&&(Qi||(Qi={},ht(i).unload(tn)),Qi[r]=t),c.onreadystatechange=t):t()},abort:function(){t&&t(a,!0)}}}});var nn,on,an=/^(?:toggle|show|hide)$/,rn=new RegExp("^(?:([+-])=|)("+gt+")([a-z%]*)$","i"),sn=/queueHooks$/,cn=[V],ln={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=rn.exec(t),a=o&&o[3]||(ht.cssNumber[e]?"":"px"),r=(ht.cssNumber[e]||"px"!==a&&+n)&&rn.exec(ht.css(i.elem,e)),s=1,c=20;if(r&&r[3]!==a){a=a||r[3],o=o||[],r=+n||1;do s=s||".5",r/=s,ht.style(i.elem,e,r+a);while(s!==(s=i.cur()/n)&&1!==s&&--c)}return o&&(r=i.start=+r||+n||0,i.unit=a,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};ht.Animation=ht.extend(R,{tweener:function(e,t){ht.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],ln[i]=ln[i]||[],ln[i].unshift(t)},prefilter:function(e,t){t?cn.unshift(e):cn.push(e)}}),ht.Tween=X,X.prototype={constructor:X,init:function(e,t,i,n,o,a){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(ht.cssNumber[i]?"":"px")},cur:function(){var e=X.propHooks[this.prop];return e&&e.get?e.get(this):X.propHooks._default.get(this)},run:function(e){var t,i=X.propHooks[this.prop];return this.pos=t=this.options.duration?ht.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):X.propHooks._default.set(this),this}},X.prototype.init.prototype=X.prototype,X.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ht.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ht.fx.step[e.prop]?ht.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ht.cssProps[e.prop]]||ht.cssHooks[e.prop])?ht.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},X.propHooks.scrollTop=X.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ht.each(["toggle","show","hide"],function(e,t){var i=ht.fn[t];ht.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(J(t,!0),e,n,o)}}),ht.fn.extend({fadeTo:function(e,t,i,n){return this.filter(A).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=ht.isEmptyObject(e),a=ht.speed(t,i,n),r=function(){var t=R(this,ht.extend({},e),a);(o||ht._data(this,"finish"))&&t.stop(!0)};return r.finish=r,o||a.queue===!1?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=a),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=ht.timers,r=ht._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&sn.test(o)&&n(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(i),t=!1,a.splice(o,1));(t||!i)&&ht.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ht._data(this),n=i[e+"queue"],o=i[e+"queueHooks"],a=ht.timers,r=n?n.length:0;for(i.finish=!0,ht.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ht.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ht.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ht.speed=function(e,t,i){var n=e&&"object"==typeof e?ht.extend({},e):{complete:i||!i&&t||ht.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ht.isFunction(t)&&t};return n.duration=ht.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ht.fx.speeds?ht.fx.speeds[n.duration]:ht.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ht.isFunction(n.old)&&n.old.call(this),n.queue&&ht.dequeue(this,n.queue)},n},ht.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ht.timers=[],ht.fx=X.prototype.init,ht.fx.tick=function(){var e,t=ht.timers,i=0;for(nn=ht.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||ht.fx.stop(),nn=a},ht.fx.timer=function(e){e()&&ht.timers.push(e)&&ht.fx.start()},ht.fx.interval=13,ht.fx.start=function(){on||(on=setInterval(ht.fx.tick,ht.fx.interval))},ht.fx.stop=function(){clearInterval(on),on=null},ht.fx.speeds={slow:600,fast:200,_default:400},ht.fx.step={},ht.expr&&ht.expr.filters&&(ht.expr.filters.animated=function(e){return ht.grep(ht.timers,function(t){return e===t.elem}).length}),ht.fn.offset=function(e){if(arguments.length)return e===a?this:this.each(function(t){ht.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return t=r.documentElement,ht.contains(t,o)?(typeof o.getBoundingClientRect!==Q&&(n=o.getBoundingClientRect()),i=Y(r),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},ht.offset={setOffset:function(e,t,i){var n=ht.css(e,"position");"static"===n&&(e.style.position="relative");var o,a,r=ht(e),s=r.offset(),c=ht.css(e,"top"),l=ht.css(e,"left"),u=("absolute"===n||"fixed"===n)&&ht.inArray("auto",[c,l])>-1,d={},p={};u?(p=r.position(),o=p.top,a=p.left):(o=parseFloat(c)||0,a=parseFloat(l)||0),ht.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+a),"using"in t?t.using.call(e,d):r.css(d)}},ht.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ht.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ht.nodeName(e[0],"html")||(i=e.offset()),i.top+=ht.css(e[0],"borderTopWidth",!0),i.left+=ht.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ht.css(n,"marginTop",!0),left:t.left-i.left-ht.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||tt;e&&!ht.nodeName(e,"html")&&"static"===ht.css(e,"position");)e=e.offsetParent;return e||tt})}}),ht.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);ht.fn[e]=function(n){return ht.access(this,function(e,n,o){var r=Y(e);return o===a?r?t in r?r[t]:r.document.documentElement[n]:e[n]:(r?r.scrollTo(i?ht(r).scrollLeft():o,i?o:ht(r).scrollTop()):e[n]=o,void 0)},e,n,arguments.length,null)}}),ht.each({Height:"height",Width:"width"},function(e,t){ht.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ht.fn[n]=function(n,o){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return ht.access(this,function(t,i,n){var o;return ht.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):n===a?ht.css(t,i,s):ht.style(t,i,n,s)},t,r?n:a,r,null)}})}),ht.fn.size=function(){return this.length},ht.fn.andSelf=ht.fn.addBack,"object"==typeof e&&e&&"object"==typeof e.exports?e.exports=ht:(i.jQuery=i.$=ht,n=[],o=function(){return ht}.apply(t,n),!(o!==a&&(e.exports=o)))}(window)}).call(t,i(28)(e))},function(e,t,i){function n(e){for(var t="",i=0;e>i;i++){var n=Math.ceil(35*Math.random());t+=b[n]}return t}function o(e){var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return 10>i&&(i="0"+i),10>n&&(n="0"+n),t+"-"+i+"-"+n}function a(e){var t=new Date(f,e,1),i=new Date(f,e+1,1),n=(i-t)/864e5;return n}var r=i(2),s=i(1),c=i(13),l=new Date,u=l.getDay(),d=l.getDate(),p=l.getMonth(),f=l.getYear();f+=2e3>f?1900:0;var h=" 00:00:00",g=" 23:59:59",m=new Date;m.setDate(1),m.setMonth(m.getMonth()+1);var v=(m.getYear(),m.getMonth()),y="http://7u2kxz.com2.z0.glb.qiniucdn.com/",b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_={PA:{NAME:"活动",ACTION:{PUBLISH:"发起",VIEW:"浏览",COLLECT:"收藏",APPLICATE:"报名",SHARE:"分享",LIKES:"点赞"}}},w=function(e){return["fa","of","pt","tr","tb","tn","ex","ca","ch"].indexOf(e)>-1?"/public/images/def_img_"+e+".jpg":"/public/images/pabanner.png"},x={getDc:function(){return _},trim:function(){return string.replace(/( +)$/g,"").replace(/^( +)/g,"")},extend:function(e,t){for(var i in t)e[i]=t[i];return e},setImageHeight:function(e){var t=Math.round(360*e("#wary").width()/640);e(".img1").css("height",t)},dateFormatstr:function(e){var t=e.split("-");return t[1]+"/"+t[2]},htmlParser:{parse:function(e){return e.replace(/<br>/g,"\n")},unparse:function(e){return e.replace(/\\n/g,"<br>")}},dateFormat:function(e,t){function i(e){return e.length<2&&(e="0"+e),e}for(var n="",o=0,a=/MM/,r=/dd/,s=/yyyy/,c=[a,r,s],l=[],u=i(e.getFullYear().toString()),d=i((parseInt(e.getMonth())+1).toString()),p=i(parseInt(e.getDate()).toString()),f=0;f<c.length;f++)try{if(0===t.match(c[f]).index){o=t.match(c[f]).toString().length,n=t.charAt(o),l=t.split(n);break}}catch(h){console.warn("dateformat failed---"+h)}for(fieldkey in l)for(regkey in c)if(l[fieldkey].match(c[regkey]))switch(l[fieldkey].match(c[regkey]).toString()){case"yyyy":t=t.replace("yyyy",u);case"MM":t=t.replace("MM",d);case"dd":t=t.replace("dd",p)}return t},getDateWeek:function(e){var t=new Array("周日","周一","周二","周三","周四","周五","周六");return t[e.getDay()]},validator:function(){return c},uploadtips:function(e,t){if("show"===e){var i=200,n=r("#wary").outerWidth(),o=(parseInt(n)-i)/2,a='<div id="uploadtips" style="position: absolute;z-index: 99999999999999;top:100px;left:'+o+'px;width:200px;height:60px;background-color:rgba(0,0,0,0.6);border-radius: 5px;line-height: 60px;text-align: center;color:white"><span>'+t+"</span></div>";r("#wary").append(a)}else r("#uploadtips").remove()},plugin:function(e){return function(){e.fn.plg1=function(){}}(e),e},tipssuccess:function(e,t,i){function n(){var e=r(window).scrollTop();u.show().css("top",e+120+"px")}function o(){u.animate({opacity:0},1e3,function(){r(".succeed").remove()})}var a=r("#wary").outerWidth(),s=.31*parseInt(a)-20+"px",c=["/public/images/5.0.2.png","/public/images/5.0.1.png"],l='<div class="succeed display_none" style="height:'+s+';z-index: 999;border-radius: 8px;background:rgba(0,0,0,0.6);text-align: center;"><img id="tipsimg" style="width:50%;display:inline-block;" src='+c[e]+' /><p id="tipsmsg" style="color:white;margin-top:10px;font-size:12px;">'+t+"</p></div>";i&&(s=.32*parseInt(a)-20+"px",l='<div class="succeed display_none" style="margin-left:-27.5%;width:55%;z-index: 999;height:'+s+';border-radius: 8px;background:rgba(0,0,0,0.6);text-align: center;"><img id="tipsimg" style="width:30%;display:inline-block;" src='+c[e]+' /><p id="tipsmsg" style="color:white;margin-top:10px">'+t+"</p></div>"),r("#wary").append(l);var u=r(".succeed");if(i){var d=r(window).width();r(window).on("resize",function(){d=r(window).width();var e=u.outerWidth(),t=parseInt(e)-70;d>430&&(t=parseInt(e)-90),d>768&&(t=parseInt(e)-150),u.height(t)})}else r(window).on("resize",function(){var e=u.outerWidth(),t=parseInt(e)-20;u.height(t)});setTimeout(n,100),setTimeout(o,1e3)},getBrowser:function(){var e={versions:function(){{var e=navigator.userAgent;navigator.appVersion}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}},language:(navigator.browserLanguage||navigator.language).toLowerCase()};return e.versions()},getWxhref:function(){var e=x.getBrowser().android?"weixin://profile/gh_ad1cd17862c0":"http://mp.weixin.qq.com/s?__biz=MzA3MjIwNTk4Mg==&mid=204371161&idx=1&sn=51f61cc7634389147a7050a5a2e97a6f#rd";return e},compareDate:function(e,t){var i=new Date(e),n=new Date(t);return Date.parse(i)>Date.parse(n)},formatDate:function(e){var t=6e4,i=60*t,n=24*i,o=30*n,a=(new Date).getTime(),r=a-new Date(e),s=r/o,c=r/(7*n),l=r/n,u=r/i,d=r/t;return result=s>=1?parseInt(s)+"个月前":c>=1?parseInt(c)+"周前":l>=1?parseInt(l)+"天前":u>=1?parseInt(u)+"小时前":d>=1?parseInt(d)+"分钟前":"刚刚"},parseImgUrl:function(e){var t="";return t=e.meta&&""!=e.meta&&"undefined"!=e.meta.split("|")[0]&&this.imageAdaptCfg4qn_copy.getCfg(e.meta.split("|")[0],e.meta.split("|")[1],e.url)||e.url,"http://"+t},calcImageUrl:function(e){var t="";if(e.images&&e.images[0]){var i=e.images[0];t=i.url&&""!=i.url?i.meta&&""!=i.meta&&"undefined"!=i.meta.split("|")[0]&&this.imageAdaptCfg4qn.getCfg(i.meta.split("|")[0],i.meta.split("|")[1],i.url)||i.url:i.mediaId&&""!=i.mediaId?x.getBrowser().ios===!0&&i.name?y+i.name+"?imageMogr2/auto-orient":"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token="+__page.at+"&media_id="+i.mediaId:e&&e.tags.type&&e.tags.type[0]&&w(e.tags.type[0])||e.pics&&e.pics[0]||"/public/images/pabanner.png"}else if(e.coverPics&&e.coverPics[0]){var i=e.coverPics[0];t=""!=i?i:e.pics&&e.pics[0]||"/public/images/pabanner.png"}else t=e&&e.tags.type&&e.tags.type[0]&&w(e.tags.type[0])||e.pics&&e.pics[0]||"/public/images/pabanner.png";return t},sharepic:function(e){var t="";if(e.images&&e.images[0]){var i=e.images[0];return i.url&&""!=i.url?t=i.meta&&""!=i.meta&&"undefined"!=i.meta.split("|")[0]&&this.imageAdaptCfg4qn.getCfg(i.meta.split("|")[0],i.meta.split("|")[1],i.url).split("?")[0]+"?imageMogr2/auto-orient"||i.url:x.calcImageUrl.call(this,e)}return x.calcImageUrl.call(this,e)},getYesterday:function(e){var t=e-864e5,i=new Date;i.setTime(t);var n=i.getFullYear(),o=i.getDate(),a=i.getMonth()+1;10>a&&(a="0"+a);var r=n+"-"+a+"-"+o;return r},imageAdaptCfg4qn:{viewportw:window.outerWidth>=640&&640||document.documentElement.clientWidth||window.innerWidth,usragent:function(){return x.getBrowser()},getviewporth:function(e){return e*this.rate.toFixed(0)},rate:.5625,mogroptions:{autoorient:"auto-orient"},getmogroptions:function(){var e="imageMogr2/";for(var t in this.mogroptions)e+=this.mogroptions[t];return e},getCfg:function(e,t,i){var n=e&&t&&(t/e).toFixed(2),o=0,a=0,r=this.viewportw,s=0,c="";return this.usragent().ios===!0&&(r=2*this.viewportw),n>this.rate?(o=e>r&&r||e,a=(o*this.rate+1).toFixed(0)):(s=this.getviewporth(r),a=t>s&&s||t,o=(a/this.rate+1).toFixed(0)),c="?imageView2/1/w/"+o+"/h/"+a+"|"+this.getmogroptions(),i+=c}},imageAdaptCfg4qn_copy:{viewportw:window.outerWidth>=640&&640||document.documentElement.clientWidth||window.innerWidth,usragent:function(){return x.getBrowser()},getviewporth:function(e){return e*this.rate.toFixed(0)},rate:1,mogroptions:{autoorient:"auto-orient"},getmogroptions:function(){var e="imageMogr2/";for(var t in this.mogroptions)e+=this.mogroptions[t];return e},getCfg:function(e,t,i){var n=e&&t&&(t/e).toFixed(2),o=0,a=0,r=this.viewportw,s=0,c="";return this.usragent().ios===!0&&(r=2*this.viewportw),n>this.rate?(o=e>r&&r||e,a=(o*this.rate+1).toFixed(0)):(s=this.getviewporth(r),a=t>s&&s||t,o=(a/this.rate+1).toFixed(0)),c="?imageView2/1/w/"+o+"/h/"+a+"|"+this.getmogroptions(),i+=c}},convertToValue:function(e){for(var e=e||[],t=[],i=0,n=e.length;n>i;i+=1)t[i]=__app.enums.TypeTags.values[e[i]];return t},getFileName:function(){return n(3)+(new Date).getTime().toString()},replaceImgTemplate:function(e){return e.replace(/\%\%(.*?)\%\%/g,'<img filename="$1" src="http://7u2kxz.com2.z0.glb.qiniucdn.com/$1">')},getLastDayStartDate:function(){var e=new Date(f,p,d);return o(e)+h},getLastDayEndDate:function(){var e=new Date(f,p,d+3);return o(e)+g},getWeekStartDate:function(){var e=new Date(f,p,d-u+1);return o(e)+h},getWeekEndDate:function(){var e=new Date(f,p,d+(7-u));return o(e)+g},getNextWeekStartDate:function(){var e=new Date(f,p,d+(7-u)+1);return o(e)+h},getNextWeekEndDate:function(){var e=new Date(f,p,d+(14-u));return o(e)+g},getMonthStartDate:function(){var e=new Date(f,p,1);return o(e)+h},getMonthEndDate:function(){var e=new Date(f,p,a(p));return o(e)+g},getNextMonthStartDate:function(){var e=new Date(f,v,1);return o(e)+h},getNextMonthEndDate:function(){var e=new Date(f,v,a(v));return o(e)+g},forbidOperation:function(){var e=r("<div/>"),t=r(window).height(),i=r("body").height();e.addClass("forbidShadow");var n=t>i?t:i;e.css({position:"absolute",top:"0px",left:"0px;",height:n+"px",background:"#000",width:"100%",opacity:"0"}).css("z-index","999"),r("body").append(e)},removeforbidOperation:function(){r(".forbidShadow")&&r(".forbidShadow").remove()},forbidOperation_cp:function(){var e=r("<div/>"),t=r(window).height(),i=r("body").height();e.addClass("forbidShadow1");var n=t>i?t:i;e.css({position:"absolute",top:"0px",left:"0px;",height:n+"px",background:"#000",width:"100%",opacity:"0"}).css("z-index","999"),r("body").append(e)},removeforbidOperation_cp:function(){r(".forbidShadow1")&&r(".forbidShadow1").remove()},setCookie:function(e,t,i){var n=new Date,o=i;n.setTime(n.getTime()+24*o*3600*1e3),document.cookie=e+"="+t+";expires="+n.toGMTString()},getCookie:function(e){for(var t,i=document.cookie.replace(/[ ]/g,""),n=i.split(";"),o=0;o<n.length;o++){var a=n[o].split("=");if(e==a[0]){t=a[1];break}}return t}};x.wedgt={imgPreviewer:function(e,t,i){function n(){r(".imgPreviewerUl").parent().remove(),e.css({height:"auto",overflow:"auto"}),r("body").css({height:"auto",overflow:"auto",minHeight:"auto"})}function o(e){e.preventDefault(),e||(e=window.event),w=parseInt(u.css("marginLeft"),10),f=(new Date).getTime(),h=e.touches[0].pageX,g=e.touches[0].pageY,m=e.touches[0].pageX,v=e.touches[0].pageY}function a(e){e.preventDefault();var t=e||window.event;y=t.touches[0].pageX,b=t.touches[0].pageY,y>m&&0===_||m>y&&_===x-1||(m>y?u.css({marginLeft:w-Math.abs(y-h)+"px"}):u.css({marginLeft:w+Math.abs(y-h)+"px"}),m=y)}function s(){var e=(new Date).getTime()-f,t=y-h,i=b-g,o=0>y-h;if((100>e&&0===y&&0===b||100>e&&Math.abs(t)<5&&Math.abs(5>i))&&n(),Math.abs(t)>=C&&o){if(_===x-1)return u.css({marginLeft:"-"+_*parseInt(k,10)+"px"}),void 0;_++,u.css({marginLeft:"-"+_*parseInt(k,10)+"px"})}else if(Math.abs(t)>=C&&!o){if(0===_)return u.css({marginLeft:"0px"}),void 0;_--,u.css({marginLeft:"-"+_*parseInt(k,10)+"px"})}else u.css({marginLeft:"-"+_*parseInt(k,10)+"px"});c(_),y=0,b=0}function c(e){r(".picPrevIndexSpan").each(function(){r(this).removeClass("picIndexSpanSelected")}),r("#picIndexSpan"+e).addClass("picIndexSpanSelected")}var l,u,d,p,f,h=0,g=0,m=0,v=0,y=0,b=0,_=i.currentIndex||0,w=0,x=t.length,k=e.outerWidth()+"px",T=r(window).height()+"px",C=.3*parseInt(k,10),N='<div class="imgPreviewer" style="position:absolute;z-index:44444444;top:0px;left:0px;width:'+k+";height:"+T+';overflow: hidden;background-color:black"><ul class="imgPreviewerUl" style="overflow:hidden;width:'+100*x+'%;margin:0px;padding: 0px;transition:all 0.2s ease-out;">';for(l=0;x>l;l++)d=t[l].meta.split("|")[0]/t[l].meta.split("|")[1],p=parseInt(k,10)/d,N+='<li style="width:'+100/x+"%;height:"+T+";float:left;line-height:"+T+'"><img src="http://'+t[l].url+'" style="width:100%;height:'+p+'px"/></li>';for(N+='</ul><div style="background-color: rgba(0,0,0,0.4);width:100%;height:80px;line-height: 40px;color:white;position: absolute;bottom:0px;left: 0px;text-align: center"><div style="height:40px;width:100%;line-height: 40px">',l=0;x>l;l++)N+='<span class="picPrevIndexSpan" id="picIndexSpan'+l+'"></span>';N+='</div><p style="text-align:left;text-indent:15px;">'+i.msg+"</p></div></div>",e.append(N),c(_),e.css({height:T,overflow:"hidden"}),r("body").css({height:T,overflow:"hidden",minHeight:T}),u=r(".imgPreviewerUl"),document.querySelector(".imgPreviewerUl").addEventListener("touchstart",o,!1),document.querySelector(".imgPreviewerUl").addEventListener("touchmove",a,!1),document.querySelector(".imgPreviewerUl").addEventListener("touchend",s,!1),document.querySelector(".imgPreviewer").addEventListener("click",n,!1)}},x.wedgt.imgPreviewer.refresh=function(e){r(".imgPreviewerUl").parent().remove(),e.css({height:"auto",overflow:"auto"}),r("body").css({height:"auto",overflow:"auto",minHeight:"auto"})};var k={Bold:"boldClass",Italic:"italicClass",TextAlign:"textAlignClass",JustifyLeft:"justifyLeftClass",JustifyCenter:"justifyCenterClass",JustifyRight:"justifyRightClass",Img:"imgClass",Color:"fontColorClass",redColor:"colorRedClass",greenColor:"colorGreenClass",blueColor:"colorBlueClass",grayColor:"colorGrayClass",orangeColor:"colorOrangeClass",purpleColor:"colorPurpleClass",Size:"sizeClass",littleSize:"sizeLittleClass",bigSize:"sizeBigClass"},T={red:"red",blue:"blue",green:"green",purple:"purple",orange:"orange",gray:"gray"},C={"#ff0000":"red","#ffa500":"orange","#0000ff":"blue","#008000":"green","#800080":"purple","#808080":"gray"};x.wedgt.WcEditor=function(e){this.modules={};for(var t in e.modules)this.modules[t]=t;return this.container=e.container,this.initialed=!1,s.observable(this),this},x.wedgt.WcEditor.Module=function(e){this.name=e.name,this.type=e.type,this.option=e.option,this.cmd=e.cmd,this.before=e.before,this.after=e.after,this.on=!1},x.wedgt.WcEditor.Module.prototype={getName:function(){return this.name},getType:function(){return this.type},getOption:function(){return this.option},getCmd:function(){return this.cmd},getBefore:function(){return this.before},getAfter:function(){return this.after},getOn:function(){return this.on},setOn:function(e){this.on=e}},x.wedgt.WcEditor.prototype.init=function(){var e=this;if(!e.initialed){var t='<ul class="funcheader"></ul>';r("#"+this.container).css("overflow","hidden"),r("#"+this.container).append(t),$container=r("#"+this.container),this.modules.Bold&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.Bold,type:"cmd",option:null,cmd:{name:"Bold",bool:null,param:null}})),this.modules.Img&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.Img,type:"cmd",cmd:{name:"insertImage",bool:!1,param:null},before:function(t){var i=x.getFileName();e.off("chooseImgComplete").on("chooseImgComplete",function(e){t&&t(e,i)}),e.trigger("chooseImgBegin",{fileName:i})},after:function(e,t,i){return r("#contentdiv img:not([fileName])").attr("fileName",t).attr("localId",e),i?i():void 0}})),this.modules.Italic&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.Italic,type:"cmd",option:null,cmd:{name:"Italic",bool:null,param:null}})),this.modules.TextAlign&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.TextAlign,type:"nav",option:[{name:"JustifyLeft",bool:null,param:null},{name:"JustifyCenter",bool:null,param:null},{name:"JustifyRight",bool:null,param:null}],cmd:null})),this.modules.Color&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.Color,type:"nav",option:[{name:"redColor",bool:null,param:T.red},{name:"blueColor",bool:null,param:T.blue},{name:"greenColor",bool:null,param:T.green},{name:"orangeColor",bool:null,param:T.orange},{name:"purpleColor",bool:null,param:T.purple},{name:"grayColor",bool:null,param:T.gray}],cmd:{name:"ForeColor"}})),this.modules.Size&&this.addModule(new x.wedgt.WcEditor.Module({name:this.modules.Size,type:"nav",option:[{name:"littleSize",bool:null,param:3},{name:"bigSize",bool:null,param:5}],cmd:{name:"FontSize"}})),e.initialed=!0}},x.wedgt.WcEditor.prototype.reset=function(){var e=this;console.log($container),$container.find(".contentcontainer").remove();var t='<div class="contentcontainer"><div id="contentdiv" contenteditable="true" class="editorcontent"></div></div>';$container.append(t),r(".editorSubMenu").addClass("display_none"),r("#contentdiv").css("cursor","pointer").off("touchend").on("touchend",function(){e.getFocusPos(function(t){e._getStyleBubble(r(t.endContainer).parent(),function(t){e._setMenu(t)})})})},x.wedgt.WcEditor.prototype._getStyleBubble=function(e,t){function i(e){return o=e,"contentdiv"===o.attr("id")?t(a):("FONT"===e.get(0).tagName&&(a.Size||o.attr("size")&&(a.Size=o.attr("size")),a.Color||o.attr("color")&&(a.Color=o.attr("color"))),"DIV"===e.get(0).tagName&&(a.TextAlign||o.attr("style")&&(a.TextAlign=o.css("textAlign"))),"B"===e.get(0).tagName&&(a.Bold||(a.Bold="Bold")),Object.keys(a).length===Object.keys(n.modules).length?t(a):(i(o.parent()),void 0))}var n=this,o=r(e),a={};i(o)},x.wedgt.WcEditor.prototype._setMenu=function(e){var t=this,i=t.modules;r(".funcheader").find("input").each(function(){var t=r(this),n=t.attr("id");t.removeClass(k[n]+"-h").removeClass(k[n]+"Parent-h"),e[n]&&("nav"===i[n].getType()?(t.addClass(k[n]+"Parent-h"),t.prev().find("input").each(function(){var t=r(this),i=t.attr("id"),o=e[n],a={};"Color"===n&&(o=C[o]),a=new RegExp(o,"ig"),a.test(i)&&t.addClass(k[i]+"-h")})):t.addClass(k[n]+"Parent-h"))})},x.wedgt.WcEditor.prototype.addModule=function(e){function t(e,t,i){var n="<input id="+t+" type='button' class='"+k[t]+"'/>";e.append(n),i(r("#"+t))}var i=this;i.modules[e.name]=e;var n=e.name,o=e.cmd,a=e.option,s=e.before,c=e.after,l='<li class="'+k[n]+'Parent"></li>';r(".funcheader").append(l);var u="<div class='"+k[n]+"FuncContainer editorSubMenu display_none'></div>";if(r("."+k[n]+"Parent").append(u),"nav"===e.type){t(r("."+k[n]+"Parent"),n,function(e){e.css("cursor","pointer").off("click").on("click",function(){e.addClass(k[n]+"Parent-h");var t=parseInt(e.prev().outerWidth())/2-parseInt(e.outerWidth())/2;return e.prev().css({marginLeft:"-"+t+"px"}),r("#contentdiv").focus(),r(".editorSubMenu").not("."+k[n]+"FuncContainer").addClass("display_none"),r("."+k[n]+"FuncContainer").toggleClass("display_none"),!1})});for(var d=0,p=a.length;p>d;d++)!function(e){t(r("."+k[n]+"FuncContainer"),a[e].name,function(t){t.css("cursor","pointer").off("click").on("click",function(){var n=t.parent();t.toggleClass(k[a[e].name]+"-h"),r("#contentdiv").focus(),t.siblings().each(function(){r(this).removeClass(k[r(this).attr("id")]+"-h")});var s=null!=o?o.name:a[e].name;document.execCommand(s,a[e].bool,a[e].param),n.addClass("display_none"),i._renderNavInput(n)||n.next().removeClass(k[n.next().attr("id")]+"Parent-h")})})}(d)}else t(r("."+k[n]+"Parent"),n,function(e){e.css("cursor","pointer").off("click").on("click",function(){e.toggleClass(k[n]+"Parent-h"),r("#contentdiv").focus(),s?s(function(e,t){return document.execCommand(o.name,o.bool,e),c?(c(e,t,function(){}),void 0):void 0}):(r("#contentdiv").focus(),document.execCommand(o.name,o.bool,o.param),c&&c())})});r(".editorSubMenu").css("cursor","pointer").off("click").on("click",function(){return!1}),r(document).css("cursor","pointer"),r(document).off("click").on("click",function(){r(".editorSubMenu").addClass("display_none")})},x.wedgt.WcEditor.prototype._renderNavInput=function(e){var t=!1;return e.find("input").each(function(){r(this).hasClass(k[r(this).attr("id")]+"-h")&&(t=!0)}),t},x.wedgt.WcEditor.prototype.getFocusPos=function(e){setTimeout(function(){return e(document&&document.getSelection&&document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0)||null)},100)},x.wedgt.WcEditor.prototype.getContentHtml=function(){return r("#contentdiv").html()},x.wedgt.WcEditor.prototype.getEncodeContentHtml=function(){return encodeURI(r("#contentdiv").html())},x.wedgt.WcEditor.prototype.setContentHtml=function(e){var t=decodeURI(e);t=t.replace(/<(.*?)script(.*?)>(.*?)<(.*?)\/script(.*?)>/gi,"&lt$1script$2&gt$3&lt$4/script$5&gt"),r("#contentdiv").html(t)};x.map={_uniqueMap:{},_innerEventDispatcher:{swipeLeft:function(e,t,i){x.map._innerEventDispatcher._swipe(e,t,i)},swipeRight:function(e,t,i){x.map._innerEventDispatcher._swipe(e,t,i)},tap:function(e,t,i){console.log(e);var n,o,a,r,s,c,l=0,u=0,d=null,p=function(e){e||(e=window.event),l=e.touches[0].pageX,u=e.touches[0].pageY,a=0,r=0,n=(new Date).getTime()},f=function(e){var t=e;clearTimeout(d),d=setTimeout(function(){a=t.touches[0].pageX,r=t.touches[0].pageY},100)},h=function(){o=(new Date).getTime(),s=a-l,c=r-u,(100>o-n&&0===a&&0===r||100>o-n&&5>s&&5>c)&&t.trigger("tap")};return"off"===i?(e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",f,!1),e.removeEventListener("touchend",h,!1),void 0):(e.addEventListener("touchstart",p,!1),e.addEventListener("touchmove",f,!1),e.addEventListener("touchend",h,!1),void 0)},_swipe:function(e,t,i){var n,o=0,a=null,r=function(e){e.preventDefault(),e||(e=window.event),o=e.touches[0].pageX},s=function(e){var t=e;clearTimeout(a),a=setTimeout(function(){n=t.touches[0].pageX},100)},c=function(e){var i=(e.touches[0],n-o);i>20?t.trigger("swipeRight"):20>i&&(alert(11),t.trigger("swipeLeft"))};return"off"===i?(e.removeEventListener("touchstart",r,!1),e.removeEventListener("touchmove",s,!1),e.removeEventListener("touchend",c,!1),void 0):(e.addEventListener("touchstart",r,!1),e.addEventListener("touchmove",s,!1),e.addEventListener("touchend",c,!1),void 0)}}},x.events={observable:function(e,t){console.log(e);var i;if(t&&t.unique&&(i=t.unique),e&&e._createdFlag)return e;i===!0&&x&&!x.map._uniqueMap[e]&&(x.map._uniqueMap[e]=e);var n=i===!0&&e||Object.create(e);return obser_proto={_createdFlag:!0,on:function(t,i){if(this._isExst(t))return this;var o={};return o[t]=i,this.events.push(o),x&&x.map._innerEventDispatcher[t]&&x.map._innerEventDispatcher[t](e,n,"on"),this},off:function(t){var o=this._index(t);return o>=0&&(this.events.splice(o,1),0===this.events.length&&i===!0&&delete x.map._uniqueMap[e],x&&x.map._innerEventDispatcher[t]&&x.map._innerEventDispatcher[t](e,n,"off")),this
},events:[],trigger:function(e){var t,i=this.events.length;for(t=0;i>t;t+=1)if(this.events[t][e])return this.events[t][e].call(n)},_isExst:function(e){return this._index(e)>=0?!0:!1},_index:function(e){var t,i,n,o=this.events;for(t=0,i=o.length;i>t;t+=1)if(o[t][e])return n=t;return-1}},x.extend(n,obser_proto),n},_valueToKey:function(e){var t={};for(var i in e)t[e[i]]=i;return t},htmlToTemplate:function(e){var t=r(this._wrapdiv(e));return t.find("img").each(function(){r(this).replaceWith("%%"+r(this).attr("filename")+"%%")}),t.html()},_wrapdiv:function(e){return e="<div>"+e+"</div>"},_unwrapdiv:function(e){return r(e).html()}},e.exports=x},function(e){var t={};t.extend=function(e,t){for(var i in t)e[i]=t[i];return e},t.getArguments=function(e){return Array.prototype.slice.call(e,0)},t.remove=function(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)};var i={};t.nextId=function(e){return i[e]||(i[e]=1),i[e]++},e.exports=t},function(e,t,i){var n=i(26),o=n.domain();o.restApi({baseUrl:__app.settings.api.url}),e.exports=o},function(e){e.exports={name:"riot",version:"2.0.12",description:"A React- like, 3.5K user interface library",homepage:"https://muut.com/riotjs/",repository:{type:"git",url:"git://github.com/muut/riotjs.git"},authors:["Muut, Inc. and other contributors"],license:"MIT",keywords:["seajs","cmd","custom tags","custom elements","web components","virtual dom","shadow dom","polymer","react","jsx","minimal","minimalist","client-side","framework","declarative","templating","template","data binding","mvc","router","model","view","controller","riotjs","riot.js"],ignore:["**/*","!/riot.js","!/riot.min.js","!/compiler.js","!/compiler.min.js","!/riot+compiler.js","!/riot+compiler.min.js"],main:"riot.js"}},function(e){e.exports={name:"seedriot",version:"2.0.11",main:"riot+compiler.js",description:"micro check library",homepage:"",authors:"",license:"MIT",moduleType:["commonJs","amd","cmd"],keywords:["riot","type","presence","regexp","string","arithmetic","object","array","environment","time","configuration"],devDependencies:{grunt:"~0.4.5","grunt-contrib-jshint":"~0.10.0","grunt-contrib-uglify":"~0.5.0","grunt-mocha-phantomjs":"0.6.0"},ignore:["**/.*","node_modules","bower_components","test","tests"],spm:{main:"riot+compiler.js"},_release:"2.0.11",_resolution:{type:"version",tag:"v2.0.11",commit:"a86c768b1a2d58cf9816bd0009dfbc7e815592a5"},_target:"*",_originalSource:"riot"}},function(e,t,i){var n={},o=i(4),a=500,r=[{code:100,msg:"unknown error"},{code:101,msg:"ajax request timeout"},{code:102,msg:"ajax request abort"},{code:200,msg:"server side error"},{code:201,msg:"ajax parser error"},{code:500,msg:"wrong biz code, custom error code should be >500"}],s=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e[""+n.code]=n}},c={};s(c,r);var l={unknown:"100",error:"200",wrongcode:""+a},u={timeout:"101",abort:"102",error:"200",parsererror:"201"};o.extend(l,u);var d=function(e,t){this.code=e,this.msg=t};d.prototype.toString=function(){return"code: "+this.code+", msg: "+this.msg};var p={};p.codes=l,p.ajaxError=function(e,t){var i=e&&l[e]?l[e]:l.unknown,n=c[i];return new d(n.code,t||n.msg)},p.bizError=function(e,t){var i=new d(e,t);return a>e&&console.error("wrong biz error code: "+JSON.stringify(i)),i},n.ApiError=d,n.ApiErrorFactory=p,e.exports=n},function(e,t,i){function n(e){return i(o(e))}function o(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./bower":6,"./bower.json":6,"./package":7,"./package.json":7,"./riot+compiler":1,"./riot+compiler.js":1};n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=9},function(e,t,i){var n=i(2);n=i(27),util=i(3);i(16);riot=i(1),nest=i(15),$=n,i(11),i(14),domain=i(21);var o=__page.jc;o?(wx.config(o),wx.error(function(e){console.log(e)})):console.error("no js config found");var a=a||[];a.push(["_setAccount","1254786218"]);var r={init:function(){return this}};!function(e){function t(){util.forbidOperation()}function i(){util.removeforbidOperation()}e(document).ajaxStart(t).ajaxComplete(i),e(window).resize(function(){}),e(".img_home").click(function(){e(".home_gy").removeClass("home_gy_set1"),e(".home_gy").addClass("home_gy_set")}),e(".home_close").click(function(){e(".home_gy").removeClass("home_gy_set"),e(".home_gy").addClass("home_gy_set1")}),window.newActivity={},window.revokedActivity={},riot.observable(window.newActivity),riot.observable(window.revokedActivity)}(n),e.exports=r},function(e,t,i){var n=i(2);n.fn.simslider=function(e){function t(){l>=c-1?(s.find(">ul").css({left:"0%"}),l=0,d.docs&&(s.find(".bannerdocs").find("li").removeClass("docsihov"),s.find(".bannerdocs").find("li:eq("+l+")").addClass("docsihov"))):(s.find(">ul").css({left:"-"+100*(l+1)+"%"}),d.docs&&(s.find(".bannerdocs").find("li").removeClass("docsihov"),s.find(".bannerdocs").find("li:eq("+(l+1)+")").addClass("docsihov")),l++)}function i(){0>=l?(s.find(">ul").css({left:"-"+100*(c-1)+"%"}),l=c-1,d.docs&&(s.find(".bannerdocs").find("li").removeClass("docsihov"),s.find(".bannerdocs").find("li:eq("+l+")").addClass("docsihov"))):(s.find(">ul").css({left:"-"+100*(l-1)+"%"}),d.docs&&(s.find(".bannerdocs").find("li").removeClass("docsihov"),s.find(".bannerdocs").find("li:eq("+(l-1)+")").addClass("docsihov")),l--)}function o(e){var e=e||window.event;p=e.originalEvent.targetTouches[0].pageX}function a(e){e.preventDefault();var e=e||window.event;f=e.originalEvent.targetTouches[0].pageX}function r(){p-f>100?t():f-p>100&&i()}var s=this,c=this.find(">ul>li").length,l=0,u={docs:!0,docscolor:"white"},d=n.extend(u,e);this.css({width:"100%"}),this.find(">ul").css({width:100*c+"%",position:"relative",overflow:"hidden"}),this.find(">ul>li").css({width:parseFloat(100/c).toFixed(6)+"%"}),setInterval(t,5e3);var p,f;if(s.on("touchstart",o),s.on("touchmove",a),s.on("touchend",r),d.docs){for(var h="<div class='bannerdocs' style='width:100%;position:absolute;bottom:6px'><ul style='width:"+11*c+"px'>",g=0;c>g;g++)h+=0!=g?"<li class='docsidef' style='display:block;width:6px;height:6px;border-radius:50em;margin-right:5px;'></li>":"<li class='docsihov docsidef' style='display:block;width:6px;height:6px;border-radius:50em;margin-right:5px;'></li>";h+="</ul></div>",s.append(h)}},e.exports=null},function(e,t,i){var n=i(1);i(18)();var o=(i(10).init(),i(3)),a=i(17),r=new a({defaultHash:"activity/index"});r.routeView("debug/index",nest.viewable({name:"debug/index",mount:function(){var e=n.mount("debug-index",{});this.tag=e[0]},route:function(e){this.context=e,this.tag.trigger("open")}})),r.routeView("activity/index",nest.viewable({name:"activity/index",mount:function(e){var t=n.mount("activity-index",{filter:e.req.query,app:this.parent});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),r.history.push("activity/index"),this.tag.trigger("open",e.req.query)}})),r.routeView("activity/list",nest.viewable({name:"activity/list",mount:function(e){var t=n.mount("activity-list",{filter:e.req.query,app:this.parent});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),r.history.push("activity/list"),this.tag.trigger("open",e.req.query)}})),r.routeView("mine/index",nest.viewable({name:"mine/index",mount:function(e){var t=n.mount("mine-index",{filter:e.req.query});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),r.history.push("mine/index"),this.tag.trigger("open",e.req.query)}})),r.routeView("travel/index",nest.viewable({name:"travel/index",mount:function(e){var t=n.mount("travel-index",{filter:e.req.query});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.query)}})),r.routeView("activity/_:id",nest.viewable({name:"activity/_:id",mount:function(e){var t=n.mount("activity-detail",{_id:e.req.params.id,app:this.parent});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",{id:e.req.params.id,share:e.req.query.share,guest:e.req.query.guest})}})),r.routeView("travel/_:id",nest.viewable({name:"travel/_:id",mount:function(e){var t=n.mount("travel-detail",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/new",nest.viewable({name:"activity/new",mount:function(){var e=n.mount("activity-new",{});this.tag=e[0]},route:function(e){this.context=e,this.tag.trigger("open")}})),r.routeView("activity/search",nest.viewable({name:"activity/search",mount:function(){var e=n.mount("activity-search",{app:this.parent});this.tag=e[0]},route:function(e){this.context=e,r.history.push("activity/search"),this.tag.trigger("open")}})),r.routeView("activity/edit/_:id",nest.viewable({name:"activity/edit/_:id",mount:function(e){var t=n.mount("activity-edit",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/createsuccess/_:id",nest.viewable({name:"activity/createsuccess/_:id",mount:function(e){var t=n.mount("activity-createsuccess",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/add-randomnotes",nest.viewable({name:"activity/add-randomnotes",mount:function(e){var t=n.mount("add-randomnotes",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.on("init",function(){var e=o.getCookie("attentionUrl"),t=e||window.location.hash;t||(t=r.defaultHash),n.route(t),e&&o.setCookie("attentionUrl","",-1)}),r.init(),e.exports=r},function(e){!function(t,i){e.exports=i()}(this,function(e){function t(e){return function(){return!e.apply(null,l.call(arguments))}}function i(t){return function(){var i=l.call(arguments),n=i.length;1===n&&e.array(i[0])&&(i=i[0],n=i.length);for(var o=0;n>o;o++)if(!t.call(null,i[o]))return!1;return!0}}function n(t){return function(){var i=l.call(arguments),n=i.length;1===n&&e.array(i[0])&&(i=i[0],n=i.length);for(var o=0;n>o;o++)if(t.call(null,i[o]))return!0;return!1}}function o(t,i){e[t]=function(e){return i[t].test(e)}}function a(){var o=e;for(var a in o)if(u.call(o,a)&&e.function(o[a]))for(var r=o[a].api||["not","all","any"],s=0;s<r.length;s++)"not"===r[s]&&(e.not[a]=t(e[a])),"all"===r[s]&&(e.all[a]=i(e[a])),"any"===r[s]&&(e.any[a]=n(e[a]))}var r=this,s=r.is;e={},e.VERSION="0.7.1",e.not={},e.all={},e.any={};var c=Object.prototype.toString,l=Array.prototype.slice,u=Object.prototype.hasOwnProperty;e.arguments=function(t){return e.not.null(t)&&("[object Arguments]"===c.call(t)||"object"==typeof t&&"callee"in t)},e.array=Array.isArray||function(e){return"[object Array]"===c.call(e)},e.boolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},e.date=function(e){return"[object Date]"===c.call(e)},e.error=function(e){return"[object Error]"===c.call(e)},e.function=function(e){return"[object Function]"===c.call(e)||"function"==typeof e},e.nan=function(e){return e!==e},e.null=function(e){return null===e||"[object Null]"===c.call(e)},e.number=function(t){return e.not.nan(t)&&"[object Number]"===c.call(t)},e.object=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},e.json=function(e){return"[object Object]"===c.call(e)},e.regexp=function(e){return"[object RegExp]"===c.call(e)},e.sameType=function(t,i){return e.nan(t)||e.nan(i)?e.nan(t)===e.nan(i):c.call(t)===c.call(i)},e.sameType.api=["not"],e.string=function(e){return"[object String]"===c.call(e)},e.char=function(t){return e.string(t)&&1===t.length},e.undefined=function(e){return void 0===e},e.empty=function(t){if(e.object(t)){var i=Object.getOwnPropertyNames(t).length;return 0===i||1===i&&e.array(t)||2===i&&e.arguments(t)?!0:!1}return""===t},e.existy=function(e){return null!==e&&void 0!==e},e.truthy=function(t){return e.existy(t)&&t!==!1&&e.not.nan(t)&&""!==t&&0!==t},e.falsy=t(e.truthy),e.space=function(t){if(e.char(t)){var i=t.charCodeAt(0);return i>8&&14>i||32===i}return!1},e.equal=function(t,i){return e.all.number(t,i)?t===i&&1/t===1/i:e.all.string(t,i)||e.all.regexp(t,i)?""+t==""+i:e.all.boolean(t,i)?t===i:!1},e.equal.api=["not"],e.even=function(t){return e.number(t)&&t%2===0},e.odd=function(t){return e.number(t)&&t%2!==0},e.positive=function(t){return e.number(t)&&t>0},e.negative=function(t){return e.number(t)&&0>t},e.above=function(t,i){return e.all.number(t,i)&&t>i},e.above.api=["not"],e.under=function(t,i){return e.all.number(t,i)&&i>t},e.under.api=["not"],e.within=function(t,i,n){return e.all.number(t,i,n)&&t>i&&n>t},e.within.api=["not"],e.decimal=function(t){return e.number(t)&&t%1!==0},e.integer=function(t){return e.number(t)&&t%1===0},e.finite=isFinite||function(t){return 1/0!==t&&t!==-1/0&&e.not.nan(t)},e.infinite=t(e.finite);var d={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,alphaNumeric:/^[A-Za-z0-9]+$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,dateString:/^(1[0-2]|0?[1-9])\/(3[01]|[12][0-9]|0?[1-9])\/(?:[0-9]{2})?[0-9]{2}$/,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-(?!00)[0-9]{2}-(?!0000)[0-9]{4}$/,affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,hexadecimal:/^[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/};for(var p in d)d.hasOwnProperty(p)&&o(p,d);e.include=String.prototype.includes||function(e,t){return e.indexOf(t)>-1},e.include.api=["not"],e.upperCase=function(t){return e.string(t)&&t===t.toUpperCase()},e.lowerCase=function(t){return e.string(t)&&t===t.toLowerCase()},e.startWith=function(t,i){return e.string(t)&&0===t.indexOf(i)},e.startWith.api=["not"],e.endWith=function(t,i){return e.string(t)&&t.indexOf(i)>-1&&t.indexOf(i)===t.length-i.length},e.endWith.api=["not"],e.capitalized=function(t){if(e.not.string(t))return!1;for(var i=t.split(" "),n=[],o=0;o<i.length;o++)n.push(i[o][0]===i[o][0].toUpperCase());return e.all.truthy.apply(null,n)},e.palindrome=function(t){return e.string(t)&&t==t.split("").reverse().join("")};var f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=["january","february","march","april","may","june","july","august","september","october","november","december"];if(e.today=function(t){var i=new Date,n=i.toDateString();return e.date(t)&&t.toDateString()===n},e.yesterday=function(t){var i=new Date,n=new Date(i.setDate(i.getDate()-1)).toDateString();return e.date(t)&&t.toDateString()===n},e.tomorrow=function(t){var i=new Date,n=new Date(i.setDate(i.getDate()+1)).toDateString();return e.date(t)&&t.toDateString()===n},e.past=function(t){var i=new Date;return e.date(t)&&t.getTime()<i.getTime()},e.future=t(e.past),e.day=function(t,i){return e.date(t)&&i.toLowerCase()===f[t.getDay()]},e.day.api=["not"],e.month=function(t,i){return e.date(t)&&i.toLowerCase()===h[t.getMonth()]},e.month.api=["not"],e.year=function(t,i){return e.date(t)&&e.number(i)&&i===t.getFullYear()},e.year.api=["not"],e.leapYear=function(t){return e.number(t)&&(t%4===0&&t%100!==0||t%400===0)},e.weekend=function(t){return e.date(t)&&(6===t.getDay()||0===t.getDay())},e.weekday=t(e.weekend),e.inDateRange=function(t,i,n){if(e.not.date(t)||e.not.date(i)||e.not.date(n))return!1;var o=t.getTime(),a=i.getTime(),r=n.getTime();return o>a&&r>o},e.inDateRange.api=["not"],e.inLastWeek=function(t){return e.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},e.inLastMonth=function(t){return e.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},e.inLastYear=function(t){return e.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},e.inNextWeek=function(t){return e.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},e.inNextMonth=function(t){return e.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},e.inNextYear=function(t){return e.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},e.quarterOfYear=function(t,i){return e.date(t)&&e.number(i)&&i===Math.floor((t.getMonth()+3)/3)},e.quarterOfYear.api=["not"],e.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()<n},"undefined"!=typeof window){var g="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"",m="navigator"in window&&"vendor"in navigator&&navigator.vendor.toLowerCase()||"",v="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";e.chrome=function(){return/chrome|chromium/i.test(g)&&/google inc/.test(m)},e.chrome.api=["not"],e.firefox=function(){return/firefox/i.test(g)},e.firefox.api=["not"],e.ie=function(e){return e?e>=11?"ActiveXObject"in window:new RegExp("msie "+e).test(g):/msie/i.test(g)||"ActiveXObject"in window},e.ie.api=["not"],e.opera=function(){return/^Opera\//.test(g)||/\x20OPR\//.test(g)},e.opera.api=["not"],e.safari=function(){return/safari/i.test(g)&&/apple computer/i.test(m)},e.safari.api=["not"],e.ios=function(){return e.iphone()||e.ipad()||e.ipod()},e.ios.api=["not"],e.iphone=function(){return/iphone/i.test(g)},e.iphone.api=["not"],e.ipad=function(){return/ipad/i.test(g)},e.ipad.api=["not"],e.ipod=function(){return/ipod/i.test(g)},e.ipod.api=["not"],e.android=function(){return/android/i.test(g)},e.android.api=["not"],e.androidPhone=function(){return/android/i.test(g)&&/mobile/i.test(g)},e.androidPhone.api=["not"],e.androidTablet=function(){return/android/i.test(g)&&!/mobile/i.test(g)},e.androidTablet.api=["not"],e.blackberry=function(){return/blackberry/i.test(g)},e.blackberry.api=["not"],e.desktop=function(){return e.not.mobile()&&e.not.tablet()},e.desktop.api=["not"],e.linux=function(){return/linux/i.test(v)},e.linux.api=["not"],e.mac=function(){return/mac/i.test(v)},e.mac.api=["not"],e.windows=function(){return/win/i.test(v)},e.windows.api=["not"],e.windowsPhone=function(){return e.windows()&&/phone/i.test(g)},e.windowsPhone.api=["not"],e.windowsTablet=function(){return e.windows()&&e.not.windowsPhone()&&/touch/i.test(g)},e.windowsTablet.api=["not"],e.mobile=function(){return e.iphone()||e.ipod()||e.androidPhone()||e.blackberry()||e.windowsPhone()},e.mobile.api=["not"],e.tablet=function(){return e.ipad()||e.androidTablet()||e.windowsTablet()},e.tablet.api=["not"],e.online=function(){return navigator.onLine},e.online.api=["not"],e.offline=t(e.online),e.offline.api=["not"],e.touchDevice=function(){return"ontouchstart"in window||"DocumentTouch"in window&&document instanceof DocumentTouch},e.touchDevice.api=["not"]}return e.propertyCount=function(t,i){if(!e.object(t)||!e.number(i))return!1;if(Object.keys)return Object.keys(t).length===i;var n,o=[];for(n in t)u.call(t,n)&&o.push(n);return o.length===i},e.propertyCount.api=["not"],e.propertyDefined=function(t,i){return e.object(t)&&e.string(i)&&i in t},e.propertyDefined.api=["not"],e.windowObject=function(e){return"object"==typeof e&&"setInterval"in e},e.domNode=function(t){return e.object(t)&&t.nodeType>0},e.inArray=function(t,i){if(e.not.array(i))return!1;for(var n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},e.inArray.api=["not"],e.sorted=function(t){if(e.not.array(t))return!1;for(var i=0;i<t.length;i++)if(t[i]>t[i+1])return!1;return!0},a(),e.setRegexp=function(e,t){for(var i in d)u.call(d,i)&&t===i&&(d[i]=e)},e.setNamespace=function(){return r.is=s,this},e})},function(e){!function(t,i){var n=i(t);t.wx=t.jWeixin=n,e.exports=null}(window,function(e,t){function i(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(i),function(e){r(t,e,n)}):l(t,n)}function n(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),r(t,e,i)}):n?l(t,n):l(t,i)}function o(e){return e=e||{},e.appId=C.appId,e.verifyAppId=C.appId,e.verifySignType="sha1",e.verifyTimestamp=C.timestamp+"",e.verifyNonceStr=C.nonceStr,e.verifySignature=C.signature,e}function a(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function r(e,t,i){var n,o,a;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,n=t.errMsg,n||(n=t.err_msg,delete t.err_msg,n=s(e,n,i),t.errMsg=n),i=i||{},i._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),o=n.indexOf(":"),a=n.substring(o+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function s(e,t){var i,n,o,a;if(t){switch(i=t.indexOf(":"),e){case h.config:n="config";break;case h.openProductSpecificView:n="openProductSpecificView";break;default:n=t.substring(0,i),n=n.replace(/_/g," "),n=n.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),n=n.substring(0,1).toLowerCase()+n.substring(1),n=n.replace(/ /g,""),-1!=n.indexOf("Wcpay")&&(n=n.replace("Wcpay","WCPay")),o=g[n],o&&(n=o)}a=t.substring(i+1),"confirm"==a&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),a=a.replace(/_/g," "),a=a.toLowerCase(),("access denied"==a||"no permission to execute"==a)&&(a="permission denied"),"config"==n&&"function not exist"==a&&(a="ok"),t=n+":"+a}return t}function c(e){var t,i,n,o;if(e){for(t=0,i=e.length;i>t;++t)n=e[t],o=h[n],o&&(e[t]=o);return e}}function l(e,t){if(C.debug&&!t.isInnerInvoke){var i=g[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(){if(!("6.0.2">x||T.systemType<0)){var e=new Image;T.appId=C.appId,T.initTime=k.initEndTime-k.initStartTime,T.preVerifyTime=k.preVerifyEndTime-k.preVerifyStartTime,D.getNetworkType({isInnerInvoke:!0,success:function(t){T.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+T.version+"&o="+T.isPreVerifyOk+"&s="+T.systemType+"&c="+T.clientVersion+"&a="+T.appId+"&n="+T.networkType+"&i="+T.initTime+"&p="+T.preVerifyTime+"&u="+T.url;e.src=i}})}}function d(){return(new Date).getTime()}function p(t){b&&(e.WeixinJSBridge?t():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",t,!1))}function f(){D.invoke||(D.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(i),n)},D.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var h,g,m,v,y,b,_,w,x,k,T,C,N,A,D;return e.jWeixin?void 0:(h={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,t={};for(e in h)t[h[e]]=e;return t}(),m=window.document,v=m.title,y=navigator.userAgent.toLowerCase(),b=-1!=y.indexOf("micromessenger"),_=-1!=y.indexOf("android"),w=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),x=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),k={initStartTime:d(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},T={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:w?1:_?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},C={},N={_completes:[]},A={state:0,res:{}},p(function(){k.initEndTime=d()}),D={config:function(e){C=e,l("config",e);var t=C.check===!1?!1:!0;p(function(){var e,n,o;if(t)i(h.config,{verifyJsApiList:c(C.jsApiList)},function(){N._complete=function(e){k.preVerifyEndTime=d(),A.state=1,A.res=e},N.success=function(){T.isPreVerifyOk=0},N.fail=function(e){N._fail?N._fail(e):A.state=-1};var e=N._completes;return e.push(function(){C.debug||u()}),N.complete=function(){for(var t=0,i=e.length;i>t;++t)e[t]();N._completes=[]},N}()),k.preVerifyStartTime=d();else{for(A.state=1,e=N._completes,n=0,o=e.length;o>n;++n)e[n]();N._completes=[]}}),C.beta&&f()},ready:function(e){0!=A.state?e():(N._completes.push(e),!b&&C.debug&&e())},error:function(e){"6.0.2">x||(-1==A.state?e(A.res):N._fail=e)},checkJsApi:function(e){var t=function(e){var t,i,n=e.checkResult;for(t in n)i=g[t],i&&(n[i]=n[t],delete n[t]);return e};i("checkJsApi",{jsApiList:c(e.jsApiList)},function(){return e._complete=function(e){if(_){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=t(e)},e}())},onMenuShareTimeline:function(e){n(h.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||v,desc:e.title||v,img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){n(h.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||v,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){n(h.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(h.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"]},function(){return e._complete=function(e){if(_){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){i(h.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,i,n,o=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(i=o.indexOf(":"),n=o.substring(i+1)){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(h.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,i;w&&(t=e.resultStr,t&&(i=JSON.parse(t),e.resultStr=i&&i.scan_code&&i.scan_code.scan_result))},e}())},openProductSpecificView:function(e){i(h.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var t,n,o,a,r=e.cardList,s=[];
for(t=0,n=r.length;n>t;++t)o=r[t],a={card_id:o.cardId,card_ext:o.cardExt},s.push(a);i(h.addCard,{card_list:s},function(){return e._complete=function(e){var t,i,n,o=e.card_list;if(o){for(o=JSON.parse(o),t=0,i=o.length;i>t;++t)n=o[t],n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=n.is_succ?!0:!1,delete n.card_id,delete n.card_ext,delete n.is_succ;e.cardList=o,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:C.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,n,o,a,r=e.cardList,s=[];for(t=0,n=r.length;n>t;++t)o=r[t],a={card_id:o.cardId,code:o.code},s.push(a);i(h.openCard,{card_list:s},e)},chooseWXPay:function(e){i(h.chooseWXPay,a(e),e)}},t&&(e.wx=e.jWeixin=D),D)})},function(e,t,i){var n=i(1),o=i(2),a=i(3),r=document.getElementById("welcome_pag"),s={name:"thing",fetched:!1,idAttribute:"_id",url:"/thing/"},c=function(e,t){n.observable(e),e._m=a.extend({},s),e._m=a.extend(e._m,t);var i=e._m;e.fetched=function(e){return"undefined"==typeof e?i.fetched:i.fetched=e},e.has=function(e){return null!=this.get(e)},e.isNew=function(){return!this.has(i.idAttribute)},e.toObject=function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},e.fetch=function(t,n){"undefined"==typeof n&&"object"==typeof t&&(n=t,t=null);var r=i;if(n&&(r=a.extend({},i))&&a.extend(r,n),t||(t=this[i.idAttribute]),!t)return console.error("fail to fetch: no id"),!1;var s=r.url+"_"+t,c=o.ajax({type:r.method||"GET",url:s});return c.done(function(t){t.status?e.trigger("fetch",t.result,n):e.trigger("fetch-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),c},e.append=function(t,n){"undefined"==typeof n&&"object"==typeof t&&(n=t,t=null);var r=i;if(n&&(r=a.extend({},i))&&a.extend(r,n),t||(t=this[i.idAttribute]),!t)return console.error("fail to append: no id"),!1;var s=r.url+"_"+t,c=o.ajax({type:r.method||"GET",url:s});return c.done(function(t){t.status?e.trigger("append",t.result,n):e.trigger("append-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),c};var r=function(e){var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")};return e.save=function(t,n){var s=i;n&&(s=a.extend({},i))&&a.extend(s,n);var c=this.isNew()?"POST":"PUT",l=this.isNew()?s.url:s.url+"_"+this[i.idAttribute],u=this.toObject(),d=r(u.query||{});""!=d&&(l+="?"+d);var p=o.ajax({type:c,url:l,data:u});return p.done(function(t){t.status?(e.fetched(!0),e.trigger("save",t.result,n)):e.trigger("save-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),p},e.get=function(e){return this[e]},e.set=function(e,t,i){if("myobj"==e&&"object"==typeof t)a.extend(this,t);else if("randomNotePic"==e&&"object"==typeof t)a.extend(this,t);else if("object"==t)this[e]=t;else{var n=this[e];this[e]=t,i&&i.silent||(this.trigger("change:"+e,this,t,n),this.trigger("change",this))}},e},l={name:"collection",url:"/thing/filter"},u=function(e,t){n.observable(e),e._m=a.extend({},l),e._m=a.extend(e._m,t);var i=e._m;return e.fetched=function(e){return"undefined"==typeof e?i.fetched:i.fetched=e},e.fetch=function(t){var n=i;t&&(n=a.extend({},i))&&a.extend(n,t);var r=i.filter||{},s=n.url,c=o.ajax({type:n.method||"POST",url:s,data:{filter:r}});return c.done(function(i){i.status?(e.items=i.result,e.fetched(!0),e.trigger("fetch",i.result,t)):e.trigger("fetch-error",i,t)}).fail(function(i,n,o){e.trigger("error",o,t)}).always(function(){}),c},e.append=function(t){var n=i;t&&(n=a.extend({},i))&&a.extend(n,t);var r=i.filter||{},s=n.url,c=o.ajax({type:n.method||"POST",url:s,data:{filter:r}});return c.done(function(i){i.status?(e.items=i.result,e.fetched(!0),e.trigger("append",i.result,t)):e.trigger("append-error",i,t)}).fail(function(i,n,o){e.trigger("error",o,t)}).always(function(){}),c},e},d=function(e){e.hidden=!0,e.ready=!1,e.mask=!1;var t=function(t){e.hidden=!t,e.mask=!t,e.update({hidden:e.hidden})};e.on("show",function(e){t(e)});var i=function(t){e.ready=t,e.update({ready:e.ready}),"undefined"!=typeof r&&null!==r.parentNode&&(r.parentNode.removeChild(r),document.body.style.background="white",document.body.style.overflow="auto")};return e.on("ready",function(e){i(e)}),e.on("refresh",function(){console.info("start refreshing")}),e},p={modelable:function(e,t){return c(e,t)},collectable:function(e,t){return u(e,t)},presentable:function(e,t){return d(e,t)},viewable:function(e){var t=a.extend({},e);return t.init=function(e){if(this.mount(e),!this.tag)throw new Error("tag is not set");this.tag.on("view-route-to",function(){t.parent.trigger("view-route-to",t)}),this.tag.on("view-route-back",function(){t.parent.trigger("view-route-back",t)}),this.tag.on("model-changed",function(e,i,n){t.parent.trigger("app-changed",e,i,n)})},t.setParent=function(e){this.parent=e},t.leave=function(e,t){e.tag.trigger("leave",t.tag)},t.enter=function(e,t){t.tag.trigger("enter",e&&e.tag,e&&e.context)},t.reenter=function(){this.tag.trigger("reenter",this.context)},t.open=function(){this.tag.trigger("open")},t.close=function(){this.tag.trigger("close")},t.show=function(e){this.tag.trigger("show",e)},t.equalRoute=function(e){{var t=this.context&&this.context.req.query.route;e&&e.context.req.query.route}return t=t},t},emptyFn:function(){}};e.exports=p},function(e){var t=function(e){this.state=e};t.prototype.getUrl=function(){var e=window.location.hash||"";return this.state.url+e},t.prototype.getBaseUrl=function(){return this.state.baseUrl},t.prototype.setTitle=function(e){this.state.title=e,document&&(document.title=e)},t.prototype.saveTop=function(e){this.state.top=e,document&&(document.top=e)},t.prototype.getTop=function(){return this.state.top},t.prototype.getUser=function(){return this.state.user},t.prototype.getUser=function(){return this.state.user},__page.holder=function(){return __page._holder||(__page._holder=new t(__page)),__page._holder},e.exports=__page.holder()},function(e,t,i){var n=i(1),o=i(3),a=function(e){console.info("route to be parsed: "+e);var t=[],i="",n=e.split("#"),o=1==n.length?n[0]:n[1],a=o.split("?"),r=a[0]||i,s=a[1]||"",c={};c.route=r,c.expression=-1!=r.indexOf("_"),c.expression?(c.routeKey=r.replace(/_(\w+)/g,"_"),c.paramList=r.match(/_(\w+)/g)):(c.routeKey=r,c.paramList=[]);for(var l=c.paramList.length,u=0;l>u;u++)c.paramList[u]=c.paramList[u].slice(c.paramList[u].indexOf("_")+1);var d={};s&&s.split("&").forEach(function(e){var t=e.split("=");d[t[0]]=t[1]||""}),c.query=d;var p=r.split("/");return c.module=p[0]||"",c.topic=p[1]||"",c.subModule=p[2]||"",c.subTopic=p[3]||"",t.push(c),t},r=function(e){n.observable(this),this.history=[],this.routeMap={},this.routeViewCache={},this.defaultHash=e&&e.defaultHash||""},s={init:function(){var e=this;n.route.parser(a),n.route(e._doRoute.bind(e)),this.on("init",function(){}),this.on("before-view-route-to",e._doBeforeViewRouteTo.bind(e)),this.on("view-route-to",e._doViewRouteTo.bind(e)),this.on("view-route-back",e._doViewRouteBack.bind(e)),n.compile(function(){e.trigger("init")})},route:function(e,t){var i={};if(i.route=e,i.handler=t,i.expression=-1!=e.indexOf(":"),i.expression){var n=e.match(/_(:\w+)/g);i.routeKey=e.replace(/_(:\w+)/g,"_");for(var o=n.length,a=0;o>a;a++)n[a]=n[a].slice(n[a].indexOf("_:")+2);i.paramNames=n}else i.paramNames=[],i.routeKey=e;this.routeMap[i.routeKey]=i,console.info("a route rule is added:"),console.info(i)},routeView:function(e,t){var i=this;this.route(e,function(e){var n=i.routeViewCache[t.name];n||(n=i.routeViewCache[t.name]=t,n.setParent(i),n.init(e)),n.context=e,i.trigger("before-view-route-to",n),n.route(e)})},currentTrigger:function(){var e=this.currentView&&this.currentView.tag;e&&e.trigger.apply(e,arguments)},_doBeforeViewRouteTo:function(e){this.currentView==e&&this.currentView.equalRoute(e)?this.currentView&&this.currentView.reenter():(this.currentView&&this.currentView.leave(this.currentView,e),e.enter(this.currentView,e))},_doViewRouteTo:function(e){this.currentView&&this.currentView.show(!1),this.lastView=this.currentView,this.currentView=e,this.currentView&&this.currentView.show(!0)},_doViewRouteBack:function(){this.lastView&&this.lastView.context&&n.route(this.lastView.context.req.route)},_doRoute:function(e){var t=this,i={app:t,req:e},n=t.routeMap[e.routeKey];if(n){var o={};if(n.expression)for(var a=n.paramNames.length,r="",s=0;a>s;s++)r=n.paramNames[s],o[r]=e.paramList[s]||null;e.params=o;var c=n.handler;if(c)try{c(i)}catch(l){console.error(l),console.error("500 on "+e.route+" :"+l.message),t.trigger("500",e,l)}else console.info("404 on "+e.route),t.trigger("404",e)}else console.info("404 on "+e.route),t.trigger("404",e)},emptyFn:function(){}};o.extend(r.prototype,s),e.exports=r},function(e,t,i){e.exports=function(){var e=i(1);e.tag("activity-createsuccess",'<div if="{!hidden}" id="createsuccess_document" class="activity-createsuccess"> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_01.png"></div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_02.png"></div> <div class="t-c"> 提示 </div> <div class="t-c" > 已发布的活动可以在“我的活动”中查看和管理。 </div> <div class="footer_placeholder clear"></div> <div class="footer"> <div onclick="{homepage}"></div> <div class="button but2" style="width:36%;" onclick="{jumpActivitypPage}">查看活动</div> <div class="button but2" style="width:36%;" onclick="{jumpNewPage}">发布活动</div> </div> </div>',function(){var t=nest.presentable(this);t.env=__app.settings.env.NODE_ENV;var i=nest.modelable({},{url:__app.settings.api.url+"/pa/"});i._id=this._id=this.opts._id,i.on("fetch",function(e){console.info("activity is fetched"),t.item=e,t.picshow=util.calcImageUrl(t.item),t.update(),a()}),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this);var n=function(e){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),console.log(e),console.log(this._id),this._id=e||this._id,i.set("_id",this._id),i.fetch({action:"open"})}.bind(t),o=function(){this.trigger("ready",!1),i.fetch(this._id,{action:"refresh"})}.bind(t);this.on("open",function(e){console.log(e),console.info("tag activities is opening"),n(e),$(window).scrollTop("0px")}),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("refresh",function(){console.info("tag activity is refreshing"),o()}),this.homepage=function(){e.route("activity/index")}.bind(this),this.jumpNewPage=function(){e.route("activity/new")}.bind(this),this.jumpActivitypPage=function(){e.route("activity/_"+i._id)}.bind(this);var a=function(){var e=util.sharepic(t.item);$("#createsuccess_document").off("click").on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")}),wx.ready(function(){var n={title:t.item.name,desc:t.item.desc,link:__page.holder().getBaseUrl()+"/index#activity/_"+i._id,imgUrl:e};wx.onMenuShareAppMessage(n);var o={title:t.item.name,desc:t.item.desc,link:__page.holder().getBaseUrl()+"/index#activity/_"+i._id,imgUrl:e,success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",t.item.name||"",util.convertToValue(t.item.tags.type).join(",")||""])}};wx.onMenuShareTimeline(o)})};$(window).scrollTop("0px")}),e.tag("activity-detail",'<div class="view" if="{!hidden}" id="detail_document"> <mask-loading show="{mask}"></mask-loading> <div class="view" if="{!mask}"> <div if="{debug}"> <a href="#activity/index">返回</a> <a onclick="{refresh}" href="">刷新</a> <a href="#debug/index">调试</a> </div> <div class="activity-detail-banner"> <img riot-src="{picshow}"> <div> <p class="font-size_{status1 ? status1 : \'\'}">{statusName}</p> <span><i>{num ? num :\'0\'}</i></span>人 </div> </div> <div class="activity-detail-title"> <div> <div>{item.name.length > 28 ? item.name.substring(0, 28)+\'...\':item.name}</div> <ul><li each="{name,i in item.tags.type || []}">{__app.enums.TypeTags.values[name]}</li></ul> </div> <div onclick="{likeActivity}"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/{isActivityLike ? \'x_1\':\'x_2\'}.png" class="vertical"> <span class="likesum">{likes}</span> </div> </div> <div class="activity-detail-basic-info"> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_04.png"></div> <div> <p>活动时间</p> <p>{timeString}</p> <p>报名截止 {closingTimeString}</p> </div> </div> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_05.png"></div> <div> <p>活动地点</p> <p>{item.place}</p> </div> </div> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_06.png"></div> <div> <p>发起人</p> <p><img riot-src="{initiatorHeadUrl}" width="32" class="imgradius vertical"> <span id="initiatorNameinitiatorContacts"></span></p> </div> </div> <p class=" immediately" if="{status1==\'a\'}">我要报名</p> </div> <div class="acrivity_Introduction_nav"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div id="ac_detail" class="activity-detail-introduce">  </div> <div class="activity-detail-nav" onclick="{operationNav}">  <div class="{(currentIndex == 2) ? \'checked\' : \'\'}" alt="2">队友</div> <div class="{(currentIndex == 1) ? \'checked\' : \'\'}" alt="1">咨询</div> <div class="{(currentIndex == 3) ? \'checked\' : \'\'}" alt="3" id="random_notes_div1">随记</div> </div> <div class="clear"></div> <div class="activity-detail-applications" id="applications" if="{currentIndex==2}"> <div if="{applicShow === true}" > <div if="{isinitiator == false}"> <applications-item class="no_border" each="{applic}" tag="{this}"></applications-item> </div> <div if="{isinitiator == true}"> <div if="{sms_send == 0}"> <applications-item-initiator class="no_border" each="{applic}" tag="{this}"></applications-item-initiator> </div> <div if="{sms_send == 1}"> <form> <div class="check_all" onclick="{allSelect}"><p if="{selectbut == true}">全选</p><p if="{selectbut == false}">取消全选</p></div> <applications-item-initiator-sms class="no_border" each="{applic}" tag="{this}"></applications-item-initiator-sms> </form> </div> </div> </div> <div class="no-content" if="{applicShow === false}"> 没人报名，赶快去抢沙发吧~~~ </div>  </div> <div class="activity-detail-communication" if="{currentIndex==1}"> <div if="{cmtShow === true}"> <communication-index class="no_border" each="{comments}" tag="{this}"></communication-index> </div> <div class="no-content" if="{cmtShow === false}"> 没有内容，你来发表第一条吧~~~ </div> </div> <div class="activity-detail-randomnotes" if="{currentIndex==3}"> <randomnotes-item class="no_border" each="{randomNotes}" tag="{this}"></randomnotes-item> <div class="no-content" if="{randomNoteShow === false}"> 空空如也，你也来晒晒图吧~~~ </div> </div> <div class="activity-detail-recommend-title"> <div> <span></span> 相关推荐 </div> </div> <div> <activity-recommend-item each="{items}" curritem="{this}"></activity-recommend-item> </div> <div class="clear"></div> <div class="two_dimension_botder-top"></div> <div class="two_dimension"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/two_dimension.png"> </div> <div class="clear"></div> <div class="serv t-c" id="detail_serv"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_19.png"> 客服电话：400-680-9072</p> </div>  <div class="apply_wary activity-detail-apply"> <img src="/web/images/bmwhole.png" class="applyclosebtn_img"> <div id="applyclosebtn" onclick="{closeApplyLayer}" ></div> <div> <p if="{fieldIfExist(\'displayName\')}"><span class="vertical set_line_height26">姓名: </span><input type="text" class="userinfo" name="displayName" value="{contact.displayName}" id="displayName" placeholder="" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'phone\')}"><span class="vertical set_line_height26">手机: </span><input type="tel" class="userinfo" name="phone" id="phone" placeholder="" value="{contact.phone}" onclick="{preventEvent}"></p> <div if="{fieldIfExist(\'gender\')}"> <span class="vertical">性别: </span> <div class="{(contact.gender && contact.gender == \'1\') ? \'sex right1 checked\' : \'sex right1\'}" onclick="{sexSelect}" value="1">女</div> <div class="{(contact.gender && contact.gender == \'1\') ? \'sex right2\' : \'sex right2 checked\'}" onclick="{sexSelect}" value="0">男</div> <input name="gender" type="hidden" id="gender" value="{contact.gender || 0}"> </div> <div class="date_of_birth" if="{fieldIfExist(\'birthday\')}"> <span class="vertical">出生日期:</span> <input type="text" id="birthdayTxt" value="" readonly="readonly" class="userinfo textw1" style="width:70%;"> <input id="birthday" onchange="{birthdayChange}" onclick="{birthdayClick}" onblur="{birthdayBlur}" name="birthday" style="display: inline-block;margin-top:0px;width:70%;" type="date"> <p>请选择 </p> </div> <p if="{fieldIfExist(\'IDCard\')}"><span class="vertical set_line_height26">身份证: </span><input type="text" class="userinfo" name="IDCard" id="IDCard" placeholder="" value="{contact.IDCard}" onclick="{preventEvent}" style="width:75%;"></p> <p if="{fieldIfExist(\'company\')}"><span class="vertical set_line_height26">单位: </span><input type="text" class="userinfo" name="company" id="company" placeholder="" value="{contact.company}" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'position\')}"><span class="vertical set_line_height26">职位: </span><input type="text" class="userinfo" name="position" id="position" placeholder="" value="{contact.position}" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'business\')}"><span class="vertical set_line_height26">行业: </span><input type="text" class="userinfo" name="business" id="business" placeholder="" value="{contact.business}" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'school\')}"><span class="vertical set_line_height26">学校: </span><input type="text" class="userinfo" name="school" id="school" placeholder="" value="{contact.school}" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'discipline\')}"><span class="vertical set_line_height26">专业: </span><input type="text" class="userinfo" name="discipline" id="discipline" placeholder="" value="{contact.discipline}" onclick="{preventEvent}"></p> <p if="{fieldIfExist(\'class\')}"><span class="vertical set_line_height26">班级: </span><input type="text" class="userinfo" name="class" id="class" placeholder="" value="{contact.class}" onclick="{preventEvent}"></p> <div class="number_of_people"> <span class="vertical">人数: </span> <div value="+" class="add" id="add1" >+</div> <input type="text" class="sum_info" value="1" name="num" id="num" readonly><div value="-" class="minus" id="minus1" >-</div> </div> <input name="applicant" type="hidden" id="applicant" value="" class="userinfo"> <div class="message" if="{fieldIfExist(\'desc\')}"> <table class=""> <tr> <td valign="top" width="35"><span >备注: </span></td> <td valign="top"> <textarea name="desc" id="desc" placeholder="" class="textarea1" onclick="{preventEvent}" rows="2" ></textarea></td> </tr> </table> </div> <p class="presentation">以上信息仅活动发起人可见，不会透露给其他人</p> <div id="applyaddbtn" >提 交</div> </div> <div class="applysubbtn"></div> </div> <div class="body_shadow display_none"></div>  <div class="footer_placeholder clear"></div> <div class="footer" name="btnbox"> <div onclick="{returnPage}"></div> <div class="but1 star_undo button {isActivityStar ? \'star\':\'\'}" onclick="{activityStar}" if="{menu(status1,isinitiator,currentIndex,num).actions.star()}"></div> <div class="recall_but1 button but1" if="{menu(status1,isinitiator,currentIndex,num).actions.recall()}">撤回</div> <div class="button but1" onclick="{editpa}" if="{menu(status1,isinitiator,currentIndex,num).actions.modify()}">修改</div>  <div class="button but1_export" if="{menu(status1,isinitiator,currentIndex,num).actions.export() && sms_send == 0}" onclick="{showSendmail}">导出名单</div> <div class="button but1" onclick="{cancelSend}" if="{menu(status1,isinitiator,currentIndex,num).actions.smsSend() && sms_send == 1}">取消</div> <div class="button butmasstexting" if="{menu(status1,isinitiator,currentIndex,num).actions.massTexting() && sms_send == 0}" onclick="{addSend}">群发短信</div> <a href="#" onclick="javascript:var errorarr = []; errorarr.push(\'请选择要发送的队友\'); util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;" class="send" if="{menu(status1,isinitiator,currentIndex,num).actions.smsSend() && sms_send == 1}"><div class="button but2">发送</div></a>  <div class="immediately button but2 {(menu(status1,isinitiator,currentIndex,num).len==0) ? \'randomnote\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==3) ? \'butmasstexting_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==1) ? \'publish_width1\' : \'\'}" if="{menu(status1,isinitiator,currentIndex,sms_send).actions.application()}">我要报名</div>  <div class="release_but1 button but2" if="{menu(status1,isinitiator,currentIndex,num).actions.modify()}">立即发布</div>  <div class="button randomnote" onclick="{addRandomNote}" if="{menu(status1,isinitiator,currentIndex,num).actions.randomNote()}">添加随记</div>  <div class="button publish {(menu(status1,isinitiator,currentIndex,num).len==2) ? \'publish_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==3) ? \'publish_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len == 4) ? \'butmasstexting_width1\' : \'\'}" onclick="{showattention_by_publish}" if="{menu(status1,isinitiator,currentIndex,num).actions.publish()}">发布活动</div>  <div class="interflow_footer" if="{menu(status1,isinitiator,currentIndex,consult).actions.comment()}"> <input type="text" name="interflow_content" id="interflow_content" placeholder="说说你的想法..." onclick="{interruptedBubbling}" value=""> <span onclick="{addComment}">发送</span> </div> <div class="interflow_footer" if="{menu(status1,isinitiator,currentIndex,consult).actions.replyComments()}"> <input type="text" name="interflow_reply" id="interflow_reply" placeholder="" onclick="{interruptedBubbling}"> <span onclick="{replyComment}">发送</span> </div> </div> </div> <div class="body_shadow_pull display_none" onclick="{hideBodyShadowAll_detail}"></div> <div class="wechat-concern display_none"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/closebtn2.png" class="closebtn2" onclick="{hideBodyShadowAll_detail}"> <p class="t-c inde_font">关注“快乐种子”后，可以接收活动<br>提醒和使用其他更多服务！</p> <div if="{!fromButtonClick}"> <div class="but_left fl t-c" onclick="{openWxhref}">关注，支持一下</div> <div class="but_right fl t-c" onclick="{hideBodyShadowAll_detail}">残忍拒绝:(</div> </div> <button class="atten_but border_radius" onclick="{openWxhref}" if="{fromButtonClick}">立即关注</button> </div> <div class="together display_none together_detail" id="clickXHidden" onclick="{hideBodyShadowAll_detail}"> <img src="/public/images/shareInfo1.png" class="together_img"> </div> <div class="sendmail"> <input type="email" name="mailboxName" value="{contact.email}" id="mailboxName" placeholder="请输入您的邮箱"> <div onclick="{exportmail}">发送到邮箱</div> <div onclick="{hideBodyShadowAll_detail}">取消</div> </div> </div>',"activity-detail { } activity-detail input{ background:transparent; } activity-detail .typetagsul{ } activity-detail .typetagsul li{ float: left;line-height:18px; } activity-detail .imgPreviewer ul li{ float:left; }",function(){function t(){var e,t,i,n=f.guest,o=f.randomNotes;for(e=0,t=o.length;t>e;e+=1)if(o[e]._id===n){i=o[e],i&&i.pics&&i.pics.length>0&&util.wedgt.imgPreviewer($("#wary"),i.pics,{msg:i.desc});break}}function i(){if(f.randomNotes[0]){var e=f.randomNotes[0];wx.ready(function(){var t,i,n,o,a=e,r=f;if(f.shareinfo_detail(),a&&a.pics[0]&&a.pics[0]){var s={};s.images=[],s.images[0]={meta:a.pics[0].meta,url:a.pics[0].url},t="http://"+util.sharepic(s)}else t="/public/images/pabanner.png";i={title:'我在参加"'+r.item.name+'"活动,给小伙伴直播一下~~~~',desc:a.desc||r.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+r._id+"?guest="+e._id,imgUrl:t},n=Object.create(i),n.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",r.item.name||"",util.convertToValue(r.item.tags.type).join(",")||"",0])},o=Object.create(i),o.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",r.item.name||"",util.convertToValue(r.item.tags.type).join(",")||"",0])},wx.onMenuShareAppMessage(n),wx.onMenuShareTimeline(o)})}}function n(){$(".body_shadow").hide(),$(".apply_wary").hide()}function o(){$("#num").attr("value",1),document.getElementById("desc")&&(document.getElementById("desc").value="")}function a(){for(var e={},t=f.applicationFields,i=0;i<t.length;i++)e[t[i].name]=document.getElementById(t[i].name).value;return e.applicant=f.userId,e.num=document.getElementById("num").value,e}function r(){for(var e=a(),t=[],i=util.validator(),n=Object.keys(e),o=0;o<n.length;o++)switch(n[o]){case"displayName":i.empty(e.displayName)&&t.push("请输入姓名！");break;case"phone":i.empty(e.phone)&&t.push("请输入电话号码！");break;case"birthday":i.empty(e.birthday)&&t.push("请输入出生日期！");break;case"IDCard":i.empty(e.IDCard)&&t.push("请输入身份证号码！");break;case"company":i.empty(e.company)&&t.push("请输入单位名称！");break;case"position":i.empty(e.position)&&t.push("请输入职位名称！");break;case"business":i.empty(e.business)&&t.push("请输入行业名称！");break;case"school":i.empty(e.school)&&t.push("请输入学校！");break;case"class":i.empty(e.class)&&t.push("请输入班级！");break;case"discipline":i.empty(e.discipline)&&t.push("请输入专业名称！")}return t.length>0?(t.pop(),!1):(g.execute({id:f.id,temp:e}),void 0)}function s(){f.subscribe||void 0==util.getCookie("showAttentionPrompt")&&(showattention_detail(),util.setCookie("showAttentionPrompt","true",1))}function c(){$(".body_shadow_pull").hide(),$(".wechat-concern").hide(),$(".together_detail").hide(),$(".sendmail").hide()}function l(e){var t="add"+e,i="minus"+e,n="num";$("#"+t).off("click"),$("#"+t).click(function(){var e=Number($("#"+n).attr("value"));$("#"+n).attr("value",++e),console.info("+="+e)}),$("#"+i).off("click"),$("#"+i).click(function(){var e=Number($("#"+n).attr("value"));e>1?$("#"+n).attr("value",--e):$("#"+n).attr("value",e),console.info("-="+e)})}function u(){$("#interflow_content").blur(),$("#interflow_reply").blur(),$(".communication-index").parent().removeClass("com_wary_background_color"),f.consult=0,f.update()}function d(e){m.execute(f.id,e)}var p=this.app=this.opts.app,f=nest.presentable(this),h=domain.action("sendMailActivities"),g=domain.action("applyActivity"),m=domain.action("modifyStatusActivities"),v=domain.action("loadContact"),y=domain.action("replyActivity"),b=domain.action("applicantLoadMore");f.env=__app.settings.env.NODE_ENV,f.debug=__app.settings.env.debug,f.menu=function(e,t,i,n){var o=this,a=0,e=util.events._valueToKey(__app.enums.ProductActivityStatus.names)[e],r=__page.browser.Android;o.actions={publish:function(){return("Ready"===e||"Completed"===e||"Acting"==e||"Reviewing"===e||"Draft"==e||"Cancelled"==e&&!t)&&(0==i||2==i)},randomNote:function(){return 3==i},comment:function(){return 1==i&&0==n},replyComments:function(){return 1==i&&1==n},modify:function(){return("Draft"==e||"Cancelled"==e)&&t&&(0==i||2==i)},recall:function(){return"Applying"==e&&t&&0==n&&(0==i||2==i)},application:function(){return"Applying"==e&&(0==i||2==i)&&0==n},star:function(){return("Ready"===e||"Completed"===e||"Acting"==e||"Applying"==e)&&(!t||n>0)&&(0==i||2==i&&!t)},massTexting:function(){return"Draft"!=e&&r&&t&&2==i&&n>0},"export":function(){return"Draft"!=e&&t&&2==i&&n>0},smsSend:function(){return"Draft"!=e&&r&&t&&2==i&&n>0}};for(var s in o.actions)o.actions[s]()&&a++;return{len:a,actions:o.actions}};var _="";_=null==__page.user.displayName?"":"匿名"==__page.user.displayName?"":__page.user.displayName,f.contact={displayName:_},f.dName=_,f.subscribe=!0,f.wxhref=util.getWxhref(),f.fromButtonClick=!1;var w=domain.action("likeActivity"),x=domain.action("starActivity"),k=domain.action("commentActivity"),T=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),C={sort:{priorityRank:-1,statusrank:1,startTime:1},page:{size:5,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},"tags.type":{},privateFlag:!1}};__page.tenant&&(C.conditions.tenantId=__page.tenant);var N=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:C});__page.tenant&&(C.conditions.tenantId=__page.tenant),N.on("fetch",function(e){for(var t=e.length,i=!1,n=0;t>n;n++)if(e[n]._id==f._id){e.splice(n,1),i=!0;break}i||e.pop(),f.update({items:e})}),f.footershow=!0,T._id=this._id=this.opts._id,T.on("fetch",function(e){console.info("activity is fetched"),f.item=e,f.num=B(e),f.highlightsArray=H(e.desc.split("\n")),f.applic=U(e.applications),f.randomNotes=e.randomNotes?e.randomNotes:"",f.cmt=e.comments,f.status1=e.status,f.reviewStatus=e.reviewStatus,f.applicShow=f.applic.length?!0:!1,f.applicLoadMoreShow=e.applications.length>10?!0:!1,f.randomNoteShow=f.randomNotes.length?!0:!1,f.cmtShow=f.cmt.length?!0:!1,f.id=e._id,f._comments=e.comments,I(),f.userId=window.__page.user.id,f.replyTo="",f.replyToName="",f.initiator=e.initiator,f.picshow=util.calcImageUrl(f.item),f.startTime=util.dateFormat(new Date(e.startTime),"yyyy/MM/dd"),f.startTime_Week=util.getDateWeek(new Date(e.startTime)),f.endTime=util.dateFormat(new Date(e.endTime),"yyyy/MM/dd"),f.endTime_Week=util.getDateWeek(new Date(e.endTime)),f.closingTime=util.dateFormat(new Date(e.closingTime),"yyyy/MM/dd"),f.closingTime_Week=util.getDateWeek(new Date(e.closingTime)),f.timeString=f.endTime==f.startTime?f.startTime+" "+f.startTime_Week:f.startTime+" "+f.startTime_Week+" - "+f.endTime+" "+f.endTime_Week,f.closingTimeString=f.closingTime+" "+f.closingTime_Week,f.likes=e.meta.likes,f.stars=e.meta.stars,f.applicationFields=e.applicationFields,f.isinitiator=f.userId==f.initiator?!0:!1,f.currentIndex=2,f.consult=0,f.sms_send=0,f.isActivityLike=__page.user.meta.pa.likes[f.id],f.isActivityStar=__page.user.meta.pa.stars[f.id],f.statusName="r"==f.reviewStatus?__app.enums.ReviewStatus.values[f.reviewStatus]:__app.enums.ProductActivityStatus.values[f.status1],f.selectbut=!0,f.initiatorNameinitiatorContact=f.item.initiatorName+" "+f.item.initiatorContact,f.initiatorHeadUrl=f.item.userforHeadUrl.headImgUrl?f.item.userforHeadUrl.headImgUrl:"/public/images/head.png",f.update(),f.trigger("ready",!0),f.trigger("view-route-to"),K(util.replaceImgTemplate(e.desc)),$("#initiatorNameinitiatorContacts").text(f.initiatorNameinitiatorContact),R(),J(),z(),"true"===f.shareflag&&i(),f.guest?(f.currentIndex=3,f.update(),"true"!=f.guest&&t()):$(window).scrollTop(0),s(),console.log("cookie "+util.getCookie("applicants")),n()});var A={page:{size:10,no:1},finish:!1};this.applicantFetch=function(){0==A.finish&&b.execute(f.id,A)}.bind(this);var D=function(e){e.length>=A.page.size?(A.page.no++,A.finish=!1):A.finish=!0,f.update({applic:U(e)})};f.fieldIfExist=function(e){for(var t=!1,i=0,n=f.applicationFields.length;n>i;i++)if(f.applicationFields[i].name==e){t=!0;break}return t},this.editpa=function(){e.route("activity/edit/_"+f.id)}.bind(this),this.exportmail=function(){var e=this._id,t=$("#mailboxName").val().trim(),i=f.item.name,n=/^.+@.+\..{2,3}$/;return n.test(t)?(h.execute({id:e,mailboxName:t,name:i}),void 0):util.tipssuccess(1,"邮箱格式错误",1)}.bind(this);var I=function(){var e=f._comments.length;f.comments=[];for(var t=0;e>t;t++)"r"!=f._comments[t].reviewStatus&&f.comments.push(f._comments[t])},E=function(e){this.trigger("ready",!1),f.shareflag=e.share,f.guest=e.guest||null,this._id=e.id||this._id,T.set("_id",this._id),T.fetch({action:"open"}),N.fetch()}.bind(f),S=function(){this.trigger("ready",!1),T.fetch(this._id,{action:"refresh"})}.bind(f),F=function(e){f.isActivityLike||(e>f.likes?(_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.COLLECT+")",f.item.name||"",util.convertToValue(f.item.tags.type).join(",")||"",e.result]),f.isActivityLike=!0,__page.user.meta.pa.likes[f.id]=(new Date).getTime()):(f.isActivityLike=!1,delete __page.user.meta.pa.likes[f.id]),f.likes=e,f.update())
},M=function(e){e>f.stars?(_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.LIKES+")",f.item.name||"",util.convertToValue(f.item.tags.type).join(",")||"",e]),f.isActivityStar=!0,util.tipssuccess(0,"收藏成功!",1),__page.user.meta.pa.stars[f.id]=(new Date).getTime()):(f.isActivityStar=!1,delete __page.user.meta.pa.stars[f.id]),f.stars=e,f.update()},j=function(e){$("#interflow_content").val(""),$("#interflow_content").attr("placeholder","说说你的想法..."),f.comments=e,f.cmtShow=f.comments.length?!0:!1,f.update()},O=function(e){$("#interflow_content").val(""),$("#interflow_content").attr("placeholder","说说你的想法..."),f.comments=e,f.cmtShow=f.comments.length?!0:!1,f.update()},L=function(){util.tipssuccess(0,"邮件已发送！",1),c()},P=function(e){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.APPLICATE+")",f.item.name||"",util.convertToValue(f.item.tags.type).join(",")||"",e.length]),util.tipssuccess(0,"报名成功",1),f.applic=U(e),f.applicShow=f.applic.length?!0:!1;for(var t=0,i=0;i<f.applic.length;i++)t+=f.applic[i].num;f.num=t,f.update(),n(),o()},W=function(){var t=this.inputs[1];"recall"==t&&util.tipssuccess(0,"撤回成功!",1),"recall"==t?T.fetch():e.route("activity/createsuccess/_"+f.id)},q=function(){var e=this.inputs[1],t=[];"recall"==e?t.push("撤回失败!"):"publish"==e&&t.push("发布失败!"),util.tipssuccess(1,t[t.length-1],1),t.pop()};this.on("mount",function(){console.info("tag activity is mounted"),w.onDone(F),x.onDone(M),y.onDone(j),k.onDone(O),h.onDone(L),g.onDone(P),b.onDone(D),m.onDone(W),m.onFail(q)}),this.on("unmount",function(){console.info("tag activity is mounted"),w.offDone(F),x.offDone(M),y.offDone(j),k.offDone(O),h.offDone(L),g.offDone(P),b.offDone(D),m.offDone(W),m.offFail(q)}),this.on("leave",function(){util.wedgt.imgPreviewer.refresh($("#wary"))}),this.on("open",function(e){console.info("tag activity is opening"),T&&T.fetched()&&z(),E(e)}),this.on("leave",function(){f.mask=!0,f.update()}),this.on("reenter",function(){f.mask=!1,f.update()}),this.on("refresh",function(){console.info("tag activity is refreshing"),S()}),this.on("show",function(e){e&&__page.holder().setTitle(f.item.name),$(window).scrollTop("0px")}),this.refresh=function(){S()}.bind(this);var B=function(e){for(var t=0,i=0;i<e.applications.length;i++)t+=e.applications[i].num;return t},H=function(e){for(var t=0;t<e.length;t++)e[t]&&(e[t]=e[t].replace(/ /g,"&nbsp;"));return e},U=function(e){for(var t=0,i=e.length;i>t;t++)e[t].birthday&&(e[t].birthday=util.dateFormat(new Date(e[t].birthday),"yyyy/MM/dd")),e[t].gender&&(e[t].gender="0"==e[t].gender?"男":"女");return e},R=function(){$(".img_home").click(function(){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set")}),$(".home_close").click(function(){$(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1")}),l(1),$(".recall_but1").off("click").on("click",function(){d("recall")}),$(".release_but1").off("click").on("click",function(){d("publish")}),$(".immediately").off("click").on("click",function(){f.fromButtonClick=!0,f.update(),f.subscribe?(Q(),X()):showattention_detail()}),$(".body_shadow").off("click").on("click",function(){}),$("#applyaddbtn").off("click"),$("#applyaddbtn").on("click",function(){r()})},z=function(){var e=util.sharepic(f.item);wx.ready(function(){wx.onMenuShareAppMessage({title:f.item.name,desc:util.htmlParser.parse(f.item.desc),link:__page.holder().getBaseUrl()+"/#activity/_"+T._id,imgUrl:e,type:"",dataUrl:"",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",f.item.name||"",util.convertToValue(f.item.tags.type).join(",")||"",0])},cancel:function(){}}),wx.onMenuShareTimeline({title:f.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+T._id,imgUrl:e,success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",f.item.name||"",util.convertToValue(f.item.tags.type).join(",")||"",1])},cancel:function(){}})})};this.operationNav=function(e){f.currentIndex=$(e.target).attr("alt"),f.update()}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(100):$(".footer_navs_wary").slideDown(100),e.stopPropagation()}.bind(this),this.showattention_by_publish=function(){f.fromButtonClick=!0,f.subscribe?e.route("activity/new"):showattention_detail()}.bind(this),this.showattention_detail=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=$(".wechat-concern").height()-100,o=t>i?t:i,a=e+t/2-n/2-100;$(".body_shadow_pull").show().css("height",o+"px").css("z-index","699"),$(".wechat-concern").show().css("top",a+"px")}.bind(this);var V=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".together_detail").show().css("top",e+"px").css("z-index","700"),$(".body_shadow_pull").show().css("height",n+"px").css("z-index","699")};f.shareinfo_detail=V,this.hideBodyShadowAll_detail=function(){$(".body_shadow_pull").hide(),$(".wechat-concern").hide(),$(".together_detail").hide(),$(".sendmail").hide()}.bind(this),this.openWxhref=function(){$(".body_shadow_pull").hide(),$(".wechat-concern").hide(),util.setCookie("attentionUrl","activity/_"+f.id,1),window.location=f.wxhref}.bind(this),this.preventEvent=function(e){e.stopPropagation()}.bind(this),this.likeActivity=function(){f.isActivityLike?util.tipssuccess(0,"已点赞！",1):w.execute(f.id)}.bind(this),this.activityStar=function(){x.execute(f.id)}.bind(this);var X=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=$(".apply_wary").height()-100,o=$(".apply_wary").height(),a=t>i?t:i,r=e+t/2-n/2-20;o>t&&(r=10,$(window).scrollTop("0px")),$(".body_shadow").show().css("height",a+"px"),$(".body_shadow_pull").hide(),$(".attention_wary").hide(),$(".apply_wary").show().css("top",r+"px")};this.sexSelect=function(e){$(".sex").removeClass("checked"),$("#gender").val($(e.target).attr("value")),$(e.target).addClass("checked")}.bind(this),this.closeApplyLayer=function(){n(),o()}.bind(this),this.addRandomNote=function(){util.setCookie("detailId",f.id,30),e.route("activity/add-randomnotes")}.bind(this),this.returnPage=function(){e.route(p.history.length>0?p.history.pop():"activity/index")}.bind(this),this.changeHeight=function(e){var t=($(e.target)[0].value,$(e.target).width()),i=14*$(e.target)[0].value.length,n=Math.floor(i/t);if(console.log("length: "+$(e.target)[0].value.length),console.log("textWidth: "+t),console.log("infoWidth: "+i),console.log("infoWidth % textWidth: "+n),n>=1){n++;var o=32*n,a=40*n;$(e.target).height(o),$(".footer").height(a),$(".footer_placeholder").height(a),console.log("inputHeight:"+o),console.log("footerHeight:"+a),console.log(n)}}.bind(this),this.showSendmail=function(){Q();var e=$(window).height(),t=$("body").height(),i=e>t?e:t;$(".body_shadow_pull").show().css("height",i+"px").css("z-index","699"),$(".sendmail").show()}.bind(this);var J=function(){$("#detail_document").off("click").on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover"),u()})};this._resetFooterStyle=function(){u()}.bind(this),this._MassTextingURL=function(){for(var e="",t=$(".activity-detail-applications .add_info_checked"),i=$(".send"),n=0,o=t.length;o>n;n++){var a=t[n];e=0==n?$(a).attr("phone"):e+";"+$(a).attr("phone")}""!=e?(i.attr("href","sms:"+e),i.attr("onclick","")):(i.attr("href","#"),i.attr("onclick","javascript:var errorarr = []; errorarr.push('请选择要发送的队友');  util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;"))}.bind(this),this.allSelect=function(){f.selectbut?($(".add_info_checkbox_div1").addClass("add_info_checked"),f.selectbut=!1):($(".add_info_checkbox_div1").removeClass("add_info_checked"),f.selectbut=!0),f.update(),this._MassTextingURL()}.bind(this),this.cancelSend=function(){var e=$(".send");f.sms_send=0,$(".add_info_checkbox_div1").removeClass("add_info_checked"),f.selectbut=!0,f.update(),e.attr("href","#"),e.attr("onclick","javascript:var errorarr = []; errorarr.push('请选择要发送的队友');  util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;")}.bind(this),this.addSend=function(){f.sms_send=1,f.update()}.bind(this),this.interruptedBubbling=function(e){e.stopPropagation()}.bind(this),this.addComment=function(){var e={comment:"",commenter:"",commenterName:"",replyTo:"",replyToName:""};e.comment=document.getElementById("interflow_content").value,e.commenter=f.userId;var t=[],i=util.validator();return i.empty(e.comment)?(util.tipssuccess(1,t[t.length-1],1),!1):(k.execute({id:f.id,data:e}),n(),!0)}.bind(this),this.replyComment=function(){var e={comment:"",commenter:"",commenterName:"",replyTo:"",replyToName:""};e.comment=document.getElementById("interflow_reply").value;var t=[],i=util.validator();if(i.empty(e.comment)&&t.push("请输入回复内容！"),t.length>0)return util.tipssuccess(1,t[t.length-1],1),void 0;var n=":"+e.comment;return e.comment=n,e.commenter=f.userId,e.replyTo=f.replyTo,e.replyToName=f.replyToName,y.execute({id:f.id,data:e}),!0}.bind(this);var Y=f.newdate=new Date(__page.servertime);f.on("toabsolute",function(){f.btnbox.style.position="absolute",f.btnbox.style.bottom="0px"}),f.on("tofixed",function(){f.btnbox.style.position="fixed",f.btnbox.style.bottom="0px"});var Z=navigator.userAgent;Z.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.brithdayClick=function(){f.trigger("toabsolute")}.bind(this),this.birthdayBlur=function(){f.trigger("tofixed")}.bind(this)),this.birthdayChange=function(){var e=document.querySelector("#birthday"),t=document.querySelector("#birthdayTxt");return""==e.value&&util.getBrowser().android===!1?(e.value=Y,t.value=util.dateFormat(Y,"yyyy/MM/dd"),!1):(t.value=util.dateFormat(new Date(e.value),"yyyy/MM/dd"),void 0)}.bind(this);var K=function(e){$("#ac_detail").html(e)},Q=function(){var e=v.newInvocation(__page.user.id);e.onDone(function(e){if(e&&e.contact&&(f.contact=e.contact,f.update(),document.querySelector("#birthday")&&f.contact.birthday)){var t=document.querySelector("#birthday"),i=document.querySelector("#birthdayTxt");t.value=util.dateFormat(new Date(f.contact.birthday),"yyyy-MM-dd"),i.value=util.dateFormat(new Date(f.contact.birthday),"yyyy-MM-dd")}}).execute()}}),e.tag("activity-edit",' <div id="addactbody" if="{!hidden}"> <div class="activity-new-statement"> <p>提醒：活动内容包含违法、反动信息或者冒用他人/组织的名 义发布活动，平台有权删除其活动并提交公安机关处理</p> <img riot-src="/{env}/images/closebtn3.png" class="closebtn3" onclick="{closeStatement}"> </div> <form id="actform"> <div class="activity-new-basic-info"> <section> <div class="secleft"><img riot-src="/{env}/images/new1.png"></div> <div class="secright"> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="name" value="" placeholder=""> </div> </section> <section class="tag-type"> <div class="secleft"><p class="p1"><img riot-src="/{env}/images/new2.png"></p> <p class="p2" onclick="{showSelectType}">类型标签</p></div> <div class="secright"> <ul> <li each="{name,i in typetags}" data="{name}" class="{tagdefault:true,checked:parent.currtypetags.indexOf(name)>=0} {(i==3||i==7)?\'no_m_left\':\'\'}" onclick="{parent.selecttags}"> <i>{__app.enums.TypeTags.values[name]}</i> </li> </ul> </div> </section> <section class="activity-time"> <div class="secleft"><img riot-src="/{env}/images/new3.png"></div> <div class="secright"> <div class="fl div_left">活动时间</div> <div class="fl div_right"> <div id="startTimebtn" class="datediv"> <input type="text" id="startTimetxt" value="00/00" readonly="readonly"> <input id="startTime" onchange="{startchange}" onclick="{dateclick}" onblur="{dateblur}" name="startTime" style="display: inline-block;margin-top:0px;" type="date"> </div> <i style="display:block;position:absolute;top:20px;left:43%;width:20px;height:1px;border-top:1px solid #ccc"></i> <div id="endTimebtn" class="datedivright"> <input type="text" id="endTimetxt" value="00/00" readonly="readonly"> <input id="endTime" onchange="{endchange}" onclick="{dateclick}" onblur="{dateblur}" name="endTime" style="display: inline-block;margin-top:0px" type="date"> </div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new4.png"></div> <div class="secright"> <div></div> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="place" value="" placeholder=""> </div> </section> <section class="initiator"> <div class="secleft"><img riot-src="/{env}/images/new5.png"></div> <div class="secright"> <div class="fl div_left">发起人</div> <div class="fl div_right"> <div style="width:30%;float: left;line-height: 35px;"><input type="text" onfocus="{inputonfocus}" style="font-size:14px;" onblur="{inputonblur}" name="initiatorName" placeholder="姓名"></div> <div style="width:70%;float:right;position:relative;line-height: 35px;"><span class="borderleft"></span><input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" style="font-size:14px;" name="initiatorContact" placeholder="联系方式"></div> </div> </div> </section> <section class="deadline"> <div class="secleft"><img riot-src="/{env}/images/new6.png"></div> <div class="secright"> <div class="fl div_left">报名截止</div> <div class="fl div_right"> <div class="datediv datediv360"> <input id="closingTimebtn" type="text" attr="closingTime" value="00/00" readonly="readonly"> <input id="closingTime" onchange="{closingchange}" onclick="{dateclick}" onblur="{dateblur}" name="closingTime" style="display: inline-block;" type="date"> </div> </div> </div> </section> </div> <div class="activity-new-activity-introduction-title"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div> <div id="editor"></div>               </div> <div class="banner" onclick="{uploadimg}" if="{test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img style="width: 100%;" riot-src="{picshow}" class="imgsetwidth"> </div> <div class="banner" onclick="{uploadimg}" if="{!test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img id="banner" style="width: 100%;" riot-src="{imgsrc}"> </div> <div class="activity-new-more-options-title activity-new-more-options-title-checked" onclick="{moreOptions}"> <div class="activity_title"> <span></span> 更多选项 </div> </div> <div class="options activity-new-more-options" > <div class="new_hint_div1_div2"> <p>只允许被邀请的朋友参与</p> <div class="but_wary" id="but_wary"> <p id="but_radius"></p> </div> </div> <div class="user_options"> <div class="new_hint_div1_div3"> <p>报名填写项</p> </div> <ul onclick="{userOptions}"> <li each="{name,i in appFieldNameArr}" data="{name}" class="{parent.fieldIfSel(name) ? \'checked\' : \'\'}">{__page.appFields[name].title}</li> </ul> </div> </div> <div class="clear"></div> <div class="activity-new-presentation"> <div> <p class="new_hint_p1">提示:</p> <p class="new_hint_p2">请确认活动内容后再发布!因为一旦发布并且有用户报名后,活动就不允许取消和修改了。</p> </div> </div> <div class="clear"></div> <div class="serv t-c"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env}/images/1_19.png"> 客服电话：400-680-9072</p> </div> <div class="footer_placeholder"></div> <div class="footer" name="btnbox"> <div onclick="{homepage}"></div> <div class="button but1" style="width:27%;" onclick="{submitdraft}">保存草稿</div> <div class="button but2" style="width:45%;" onclick="{publishpa}">立即发布</div> </div> </form> </div>',function(){var t=nest.presentable(this);t.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+t.env);var i={localIds:[],fileNames:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[],this.fileNames=[]}},n=domain.action("multiImgUpload"),o=new util.wedgt.WcEditor({modules:{Bold:!0,Color:!0,Img:!0,TextAlign:!0},container:"editor"}),a=[],r=[],s=[],c={localIds:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[]}},l=this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),u=this.imgmodel=nest.modelable({},{url:__app.settings.api.url+"/img/"}),d=this.startTimetxt,p=this.startTime,f=this.endTimetxt,h=this.endTime,g=this.closingTimebtn,m=this.closingTime,v=this.name,y=this.place,b=__page.user.id,_=this.initiatorName,w=this.initiatorContact,x=(this.actform,this.btnbox),k=new Date(__page.servertime);t.appFields=__page.appFields,t.appFieldNameArr=Object.keys(t.appFields);var T=__app.enums.TypeTags.values;delete T.ex,delete T.tn,t.typetags=Object.keys(T),t.actobj={txtareastr:"【活动说明】</br></br>【活动日程】</br>【费用说明】自行消费</br>【集合时间】</br>【集合地点】</br>【交通方式】</br>【报名说明】</br>1、直接系统报名，报名名单中显示用户名字即报名成功；</br>2、本活动不限名额。/本活动限x人，以报名先后确认名额。</br>【温馨提示】</br>1、</br>2、</br>",initPage:function(e){d.value=e&&e.startTime&&util.dateFormat(new Date(e.startTime),"MM/dd")||util.dateFormat(k,"MM/dd"),f.value=e&&e.endTime&&util.dateFormat(new Date(e.endTime),"MM/dd")||util.dateFormat(k,"MM/dd"),g.value=e&&e.closingTime&&util.dateFormat(new Date(e.closingTime),"MM/dd")||util.dateFormat(k,"MM/dd"),v.value=e&&e.name||"",p.value=e&&e.startTime&&util.dateFormat(new Date(e.startTime),"yyyy-MM-dd")||util.dateFormat(k,"yyyy-MM-dd"),h.value=e&&e.endTime&&util.dateFormat(new Date(e.endTime),"yyyy-MM-dd")||util.dateFormat(k,"yyyy-MM-dd"),m.value=e&&e.closingTime&&util.dateFormat(new Date(e.closingTime),"yyyy-MM-dd")||util.dateFormat(k,"yyyy-MM-dd"),y.value=e&&e.place||"",b=__page.user.id,_.value=e&&e.initiatorName||"",w.value=e&&e.initiatorContact||"",t.currtypetags=e&&e.tags.type||[],t.applicationFields=e&&e.applicationFields||[],t.acDesc=util.replaceImgTemplate(e.desc),r=e.introImgs},getJsondata:function(){var e={name:v.value.trim(),startTime:p.value||k,endTime:h.value||k,place:y.value.trim(),initiator:__page.user.id,initiatorName:_.value.trim(),initiatorContact:w.value.trim(),closingTime:m.value.trim()||k,pics:[],desc:o.getContentHtml()&&util.events.htmlToTemplate(o.getContentHtml())||t.actobj.txtareastr,applicationFields:O()};return e.tags={region:"",custom:"",type:t.currtypetags||[]},e},validatefield:function(e){var i=[];return C.empty(e.name)&&i.push("活动名称不能为空"),t.currtypetags.length<=0&&i.push("请选择类型"),C.empty(e.place)&&i.push("活动地点不能为空"),C.empty(e.initiatorName)&&i.push("请填写发起人姓名"),C.empty(e.initiatorContact)&&i.push("请填写发起人联系方式"),util.compareDate(util.dateFormat(k,"yyyy-MM-dd"),p.value)&&i.push("开始时间不能早于今天"),util.compareDate(p.value,h.value)&&i.push("结束时间不能早于开始时间"),util.compareDate(m.value,p.value)&&i.push("截止时间不能晚于开始时间"),i},submitform:function(e){var t=this;i.refresh(),a=[],s=[];var c=$(util.events._wrapdiv(o.getContentHtml()));c.find("img").each(function(e){for(var t=!1,e=0,n=r.length;n>e;e++){var o=$(this).attr("fileName");if(r[e].name===o){s.push(r[e]),t=!0;break}}t||(i.localIds.push($(this).attr("localid")),i.fileNames.push($(this).attr("fileName")))}),i.localIds.length>0?t._upload4Wx(i.localIds,i.serverIds,function(o){if(o)return util.tipssuccess(1,"上传图片失败",0);for(var r,c=0,u=i.localIds.length;u>c;c++)r={localId:i.localIds[c],name:i.fileNames[c],mediaId:i.serverIds[c]},a.push(r);var d=n.newInvocation({imgArr:a});d.onDone(function(i){for(var n,o=i,a=0,r=o.length;r>a;a++)n={id:o[a]._id,name:o[a].name,mediaId:o[a].mediaId,localId:o[a].localId},s.push(n);l.set("introImgs",s),t._uploadPaObj(e)}).onFail(function(){alert("multiImgUpload fail")}).execute()}):t._uploadPaObj(e)},_uploadPaObj:function(e){c.localIds.length>0?wx.uploadImage({localId:c.localIds[0],success:function(i){var n={name:util.getFileName(),mediaId:i.serverId};u.set("myobj",n),u.save(),u.off("save").on("save",function(n){var o=[{id:n._id,mediaId:i.serverId,name:n.name}];e.images=o,e.pics[0]="/public/images/pabanner.png",e&&e.status&&"d"==e.status?l.set("query",{action:"draft"}):(t.update(),l.set("query",{action:"publish"})),e&&e.status&&delete e.status,l.set("myobj",e),l.set("privateFlag",D),l.save()})},fail:function(e){console.error(JSON.stringify(e))}}):(e&&e.status&&"d"==e.status?l.set("query",{action:"draft"}):l.set("query",{action:"publish"}),e&&e.status&&delete e.status,e.pics=["/public/images/pabanner.png"],l.set("myobj",e),l.set("privateFlag",D),l.save())},_upload4Wx:function(e,t,i){function n(){wx.uploadImage({localId:e[a],success:function(e){return t.push(e.serverId),a++,o-1>=a?(n(),void 0):i?i():void 0},fail:function(e){i(JSON.stringify(e)),console.error(JSON.stringify(e))}})}var o=e.length,a=0;n()}};var C=util.validator();l.on("save",function(t){"publish"==l.query.action&&e.route("activity/createsuccess/_"+t._id),"draft"==l.query.action&&(l&&l.query&&delete l.query,util.tipssuccess(0,"保存成功"),t&&t.introImgs&&(r=t.introImgs))}),l.on("save-error",function(){util.tipssuccess(1,"保存失败")}),l.on("error",function(){util.tipssuccess(1,"保存失败")}),this.selecttags=function(e){var i=e.item,n=t.currtypetags.indexOf(i.name);return n>=0?t.currtypetags.splice(n,1):t.currtypetags.push(i.name)}.bind(this),this.startchange=function(){return""==p.value&&util.getBrowser().android===!1?(p.value=k,d.value=util.dateFormat(k,"MM/dd"),!1):(d.value=util.dateFormatstr(p.value),(!h||h.value<p.value)&&(h.value=p.value,t.endchange()),(!m||m.value>p.value)&&(m.value=p.value,t.closingchange()),void 0)}.bind(this),this.endchange=function(){return""==h.value&&util.getBrowser().android===!1?(h.value=k,f.value=util.dateFormat(k,"MM/dd"),!1):(f.value=util.dateFormatstr(h.value),void 0)}.bind(this),this.closingchange=function(){return""==m.value&&util.getBrowser().android===!1?(m.value=k,g.value=util.dateFormat(k,"MM/dd"),!1):(g.value=util.dateFormatstr(m.value),void 0)}.bind(this),this.publishpa=function(){var e=t.actobj.getJsondata();console.log("initiator="+e.initiator),e.status="o";var i=t.actobj.validatefield(e);return i.length>0?(util.tipssuccess(1,i[0],1),void 0):(t.actobj.submitform(e),void 0)}.bind(this),this.submitdraft=function(){var e=t.actobj.getJsondata();e.status="d";var i=t.actobj.validatefield(e);return i.length>0?(util.tipssuccess(1,i[0],1),void 0):(t.actobj.submitform(e),void 0)}.bind(this),this.moreOptions=function(){$(".options").slideToggle(),$(".activity-new-more-options-title").toggleClass("activity-new-more-options-title-checked")}.bind(this);var N,A,D=!1,I=function(){var e=document.getElementById("but_wary");e.addEventListener("touchstart",E,!1),e.addEventListener("touchmove",S,!1),e.addEventListener("touchend",F,!1)},E=function(e){e.preventDefault();var e=e||window.event;N=e.touches[0].pageX},S=function(e){e.preventDefault();var e=e||window.event;A=e.touches[0].pageX},F=function(){A>N?($(".but_wary").addClass("but_right"),$(".but_wary").removeClass("but_left"),D=!0):N>A&&($(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right"),D=!1),N=0,A=0};t.on("toabsolute",function(){x.style.position="absolute",x.style.bottom="0px"}),t.on("tofixed",function(){x.style.position="fixed",x.style.bottom="0px"}),this.inputonfocus=function(){t.trigger("toabsolute")}.bind(this),this.inputonblur=function(){t.trigger("tofixed")}.bind(this),this.descfocus=function(){t.trigger("toabsolute")}.bind(this),this.descblur=function(){t.trigger("tofixed")}.bind(this);var M=navigator.userAgent;M.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){t.trigger("toabsolute")}.bind(this),this.dateblur=function(){t.trigger("tofixed")}.bind(this)),this.showSelectType=function(){var e=$(".tag-type").attr("class");e.indexOf("animation-show")>0?$(".tag-type").removeClass("animation-show").addClass("animation-hide"):$(".tag-type").removeClass("animation-hide").addClass("animation-show")}.bind(this);var j=function(e){this.trigger("ready",!1),l.set("_id",e||t.opts._id),l.fetch({action:"open"})}.bind(t);l.on("fetch",function(e){t.fecthjson=e,t.actobj.initPage(t.fecthjson),t.picshow=util.calcImageUrl(t.fecthjson),t.trigger("ready",!0),t.trigger("view-route-to"),o.init(),o.reset(),L(t.acDesc),$("#contentdiv").on("focus",function(){t.trigger("toabsolute")}),$("#contentdiv").on("blur",function(){t.trigger("tofixed")}),o.off("chooseImgBegin").on("chooseImgBegin",function(){wx.chooseImage({success:function(e){o.trigger("chooseImgComplete",e.localIds[0])}})}),t.update(),I()}),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),j(e),t.test=!0,wx.ready(function(){t.uploadimg=function(){wx.chooseImage({success:function(e){c.refresh(),c.localIds[0]=e.localIds[0],t.test=!1,t.update();var i=$("#banner");i.attr("src",e.localIds[0])}})},t.update()})});var O=function(){for(var e=[],i=$(".user_options .checked"),n=0;n<i.length;n++)e.push(t.appFields[$(i[n]).attr("data")]);return e};this.userOptions=function(e){"姓名"!=e.target.outerText&&"手机"!=e.target.outerText&&$(e.target).toggleClass("checked")}.bind(this),t.fieldIfSel=function(e){for(var i=!1,n=0,o=t.applicationFields.length;o>n;n++)if(t.applicationFields[n].name==e){i=!0;break}return i},this.homepage=function(){e.route("activity/index")}.bind(this);var L=function(e){$("#contentdiv").html(e)}}),e.tag("activity-filter",'<div class="activity-filter_placeholder"></div> <div class="activity-filter"> <div onclick="{parent.clickIndexNav}"> <div class="{opts.curritem.activity_filter == 1 ? \'checked\': \'\'} {opts.curritem.label_screening_select_the_conditions == true ? \'select_the_conditions\':\'\'}" alt="1" id="label_screeningId">类型筛选</div> <div class="{opts.curritem.activity_filter == 2 ? \'checked\': \'\'} {opts.curritem.date_select_the_conditions == true ? \'select_the_conditions\':\'\'}" alt="2" id="sel_date">时间筛选</div> <div class="{opts.curritem.activity_filter == 3 ? \'checked\': \'\'} {opts.curritem.sort_select_the_conditions == true ? \'select_the_conditions\':\'\'}" alt="3" id="sel_sort">排序</div> <a href="#activity/search"><img riot-src="/{env}/images/search_bj.png"></a> </div> <div class="label_screening select_pub {opts.curritem.activity_filter == 1 ? \'label_screening_animation\': \'\'} {opts.curritem.activity_filter == \'reset\' ? \'animation_reset\': \'\'}"> <ul onclick="{parent.select_type}" value="label_screening_select_the_conditions"> <li value="ca" class="set-checked-ca">校园活动</li> <li value="fa" class="set-checked-fa">亲子少儿</li> <li value="ch" class="set-checked-ch">讲座</li> <li value="tr" class="set-checked-tr">出游</li> <li value="of" class="set-checked-of">体育户外</li> <li value="pt" class="set-checked-pt">聚会派对</li> <li value="tb" class="set-checked-tb">团队建设</li> <li value="oa" class="set-checked-oa">其他活动</li> </ul> <div class="clear"></div> <div class="label_button"> <div class="label_button_div"> <button class="confirm_but1 border_radius fl" onclick="{parent.setAllType}"><img riot-src="/{env}/images/but_s1.png" class="vertical"> <span class="vertical" >全部</span></button> <button class="confirm_but2 border_radius fr" onclick="{parent.typeSelectObj}"><img riot-src="/{env}/images/but_s2.png" class="vertical"> <span class="vertical" >筛选</span></button> </div> </div> </div> <div class="select_info select_pub time_screen {opts.curritem.activity_filter == 2 ? \'time_screen_animation\': \'\'} {opts.curritem.activity_filter == \'reset\' ? \'animation_reset\': \'\'}"> <ul class="ul_sel_date" alt="sel_date" onclick="{parent.select_type}"> <li class="checked initial_checked" value="0">全部</li> <li value="1">最近三天</li> <li value="2">本周</li> <li value="3">下周</li> <li value="4">本月</li> <li value="5">下月</li> </ul> </div> <div class="select_info select_pub sort {opts.curritem.activity_filter == 3 ? \'sort_animation\': \'\'} {opts.curritem.activity_filter == \'reset\' ? \'animation_reset\': \'\'}"> <ul class="ul_sel_sort" alt="sel_sort" onclick="{parent.select_type}" value="sort_select_the_conditions"> <li class="checked initial_sort" value="acquiesce">默认（开始时间）</li> <li value="newest" class="set-checked-newest">最新（创建时间）</li> <li value="popularity" class="set-checked-popularity">人气</li> </ul> </div> </div>',function(){var e=nest.presentable(this);e.env="production"==__app.settings.env.NODE_ENV?"public":"web"}),e.tag("activity-index",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div if="{!mask}"> <div class="activity-index-filter"> <input type="text" placeholder="搜索感兴趣的活动" readonly="readonly" onclick="{resultSearch}"> </div> <div class="activity-index-scroll"> <ul> <li><a href="#activity/_dMxAsS"><img riot-src="/{env}/images/banner.jpg"></a></li> </ul> </div> <div class="activity-index-type"> <div> <div class="fl" value="newest" onclick="{pageResult}"> <img riot-src="/{env}/images/new_act.png" value="newest"> 最新活动 </div> <div class="fr" value="popularity" onclick="{pageResult}"> <img riot-src="/{env}/images/hot_act.png" value="popularity"> 最热活动 </div> </div> <div> <ul onclick="{pageResult}"> <li value="ca"><img riot-src="/{env}/images/type_img_1.png" value="ca">校园活动</li> <li value="fa"><img riot-src="/{env}/images/type_img_2.png" value="fa">亲子少儿</li> <li value="ch"><img riot-src="/{env}/images/type_img_3.png" value="ch">讲座</li> <li value="tr"><img riot-src="/{env}/images/type_img_4.png" value="tr">出游</li> <li value="of"><img riot-src="/{env}/images/type_img_5.png" value="of">体育户外</li> <li value="pt"><img riot-src="/{env}/images/type_img_6.png" value="pt">聚会派对</li> <li value="tb"><img riot-src="/{env}/images/type_img_7.png" value="tb">团队建设</li> <li value="oa"><img riot-src="/{env}/images/type_img_8.png" value="oa">其他活动</li> </ul> </div> </div> <div class="activity-index-recommend"> <div> <p>精彩推荐</p> <p onclick="{listAll}">全部活动</p> </div> <div class="clear"></div> <div> <activity-recommend-item each="{items}" curritem="{this}"></activity-recommend-item> </div> <div onclick="{listAll}"><p>查看全部活动</p></div> </div> <div class="footer_placeholder"></div> <div class="footer-index setleft"> <div> <a href="#activity/index"><i class="current"><img riot-src="/{env}/images/footer_nav_activity2.png"><br>活动</i></a> <a href="#travel/index"><i><img riot-src="/{env}/images/footer_nav_travel1.png"><br>场所</i></a> <a href="#mine/index"><i><img riot-src="/{env}/images/footer_nav_mine1.png"><br>我的</i></a> </div> <div> <i onclick="{showattention}">发布活动</i> </div> </div> <div class="body_shadow display_none" onclick="{hideBodyShadowAllHandler}"></div> <div class="wechat-concern display_none"> <img riot-src="/{env}/images/closebtn2.png" onclick="{hidewechat_concern}"> <p>关注“快乐种子”后，可以接收活动<br>提醒和使用其他更多服务！</p> <div if="{!fromButtonClick}"> <div onclick="{openWxhref}">关注，支持一下</div> <div onclick="{hidewechat_concern}">残忍拒绝:(</div> </div> <button onclick="{openWxhref}" if="{fromButtonClick}">立即关注</button> </div> </div> </div>',function(){function t(){$(".wechat-concern").hide(),$(".body_shadow").hide()}this.app=this.opts.app;var i=nest.presentable(this);i.env="production"==__app.settings.env.NODE_ENV?"public":"web",i.wxhref=util.getWxhref(),i.subscribe=1==__page.user.wx_subscribe?!0:!1;var n={sort:{priorityRank:-1,statusrank:1,startTime:1},page:{size:4,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},"tags.type":{},privateFlag:!1}};__page.tenant&&(n.conditions.tenantId=__page.tenant);var o=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:n});o.on("fetch",function(e){console.info("activities is fetched"),i.items=e,i.update(),i.trigger("ready",!0),i.trigger("view-route-to"),s(),$(window).scrollTop("0px"),o.trigger("fetched"),$(".activity-index-scroll").simslider()}),o.on("append",function(){console.info("activities is append"),i.trigger("ready",!0)});var a=function(e){this.trigger("ready",!1),this.filter=e||this.filter,void 0==o.fetched()||i.items&&0==i.items.length?o.fetch({filter:this.filter}):(i.update(),i.trigger("ready",!0),i.trigger("view-route-to")),$(window).scrollTop("0px")}.bind(i),r=function(){i.item=[],i.appended_list=[],n.page.size=10,n.page.no=1,this.trigger("ready",!1),setTimeout(function(){$("#pullDown").hide(),o.fetch({filter:this.filter})},500)}.bind(i);(function(){this.trigger("ready",!1),o.append({filter:this.filter})
}).bind(i),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("unmount",function(){console.info("tag activities is unmounted")}),this.on("open",function(e){console.info("tag activities is opening"),s(),a(e)}),this.on("leave",function(){i.mask=!0,i.update()}),this.on("reenter",function(){i.mask=!1,i.update()}),this.on("refresh",function(){console.info("tag activities is refreshing"),r()}),this.on("show",function(e){e&&__page.holder().setTitle("活动"),$(window).scrollTop(__page.holder().getTop())}),this.listAll=function(){e.route("activity/list?filter=all")}.bind(this),this.pageResult=function(t){var i=$(t.target).attr("value");e.route("activity/list?filter="+i)}.bind(this),this.showattention=function(){if(i.fromButtonClick=!0,i.subscribe)e.route("activity/new");else{var t=$(window).scrollTop(),n=$(window).height(),o=$("body").height(),a=$(".wechat-concern").height()-100,r=n>o?n:o,s=t+n/2-a/2-100;$(".body_shadow").show().css("height",r+"px").css("z-index","699"),$(".wechat-concern").show().css("top",s+"px")}}.bind(this),this.hideBodyShadowAllHandler=function(){t()}.bind(this),this.hidewechat_concern=function(){t()}.bind(this),this.resultSearch=function(){e.route("activity/search")}.bind(this),this.refresh=function(){r()}.bind(this),this.openWxhref=function(){util.setCookie("attentionUrl","activity/index",1),t(),window.location=i.wxhref}.bind(this);var s=function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",0])},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",1])},cancel:function(){}})}}),e.tag("activity-item",'<div class="screen"> <a href="#" onclick="{showPaDetail}"><img riot-src="{picshow}" class="activity-cover-img img1"></a> <div class="type-bar {status_background_color}">{statuszw}</div> <div class="top-bar"> <p><img riot-src="/{env}/images/item2.png" width="15" class="vertical"> <span class="vertical" >{this.opts.curritem.meta.apps || 0}</span></p> <p><img riot-src="{likes_imgsrc}" width="15"> <span class="vertical" >{this.opts.curritem.meta.likes || 0}</span></p> </div> <div class="bottom-bar"> <div> <p>{name.length > 15 ? name.substring(0, 15)+\'...\':name}</p> <p> <span></span>{startTimes_Week} {place.length > 12 ? place.substring(0, 12)+\'...\':place} </p> </div> </div> <div class="shadow"></div> </div>',function(){var t=this.opts.curritem;this.statuszw=__app.enums.ProductActivityStatus.values[t.status],"r"==t.reviewStatus&&(this.statuszw=__app.enums.ReviewStatus.values[t.reviewStatus]),this.num=t.meta.apps;var i=this;i.env="production"==__app.settings.env.NODE_ENV?"public":"web",i.picshow=util.calcImageUrl(t),i.likes=t.meta.likes||0,i.startTimes=util.dateFormat(new Date(t.startTime),"MM/dd"),i.Week=util.getDateWeek(new Date(t.startTime)),i.startTimes_Week=i.startTimes+" "+i.Week,i.reviewStatus=t.reviewStatus?t.reviewStatus:"",i.likes_imgsrc=__page.user.meta.pa.likes[t._id]?"/"+i.env+"/images/item1_like.png":"/"+i.env+"/images/item1.png",i.status_background_color=util.events._valueToKey(__app.enums.ProductActivityStatus.names)[t.status],this.showPaDetail=function(n){n.preventDefault(),_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",i.parent.name||"",util.convertToValue(i.parent.tags.type).join(",")||""]),e.route("activity/_"+t._id)}.bind(this),this.on("update",function(){this.likes_imgsrc=__page.user.meta.pa.likes[t._id]?"/"+i.env+"/images/item1_like.png":"/"+i.env+"/images/item1.png"})}),e.tag("activity-list",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div if="{!mask}"> <activity-filter curritem="{this}"></activity-filter> <div class="clear">&nbsp</div> <div id="pullDown" class="loading" style="display: none"> <span class="pullDownIcon"></span><span class="pullDownLabel">正在刷新列表...</span> </div> <div class="activity-list" id="scroll_body"> <activity-item class="activity-item" each="{items}" curritem="{this}"></activity-item> <activity-item class="activity-item" each="{appended_list}" curritem="{this}"></activity-item> </div> <div id="pullUp"> <span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多活动...</span> </div>  <wechat-menu if="{!subscribe}"></wechat-menu> <div id="noResult" class="noResult"> <p><img riot-src="/{env}/images/c_02.png" style="width: 35%"></p> <p class="m_top10">抱歉，没有找到相关活动</p> </div>  <div class="footer_placeholder"></div> <div class="footer setleft"> <div onclick="{returnPage}"></div> <div class="button publish" onclick="{showattention}">发布活动</div> </div> <div class="body_shadow display_none" onclick="{hideBodyShadowAllHandler}"></div> <div class="wechat-concern display_none"> <img riot-src="/{env}/images/closebtn2.png" onclick="{hidewechat_concern}"> <p>关注“快乐种子”后，可以接收活动<br>提醒和使用其他更多服务！</p> <div if="{!fromButtonClick}"> <div onclick="{openWxhref}">关注，支持一下</div> <div onclick="{hidewechat_concern}">残忍拒绝:(</div> </div> <button onclick="{openWxhref}" if="{fromButtonClick}">立即关注</button> </div> </div> </div>',function(){function t(){var e=$(window).height(),t=$("body").height(),i=e>t?e:t;$(".body_shadow").show().css("height",i+"px").css("z-index","500")}function i(){$(".wechat-concern").hide(),n()}function n(){$(".body_shadow").hide(),l.activity_filter="reset",l.update()}function o(){if(!l.subscribe&&void 0==util.getCookie("showAttentionPrompt")){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=$(".wechat-concern").height()-100,o=t>i?t:i,a=e+t/2-n/2-100;$(".body_shadow").show().css("height",o+"px").css("z-index","699"),$(".wechat-concern").show().css("top",a+"px"),util.setCookie("showAttentionPrompt","true",1)}}function a(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}function r(e){void 0!=e&&(e.forEach(function(e){l.items.push(e)}),console.log("self.items "+l.items.length))}function s(e){console.log(e),0==e.length?document.getElementById("pullUp").style.display="none":(document.getElementById("pullUp").style.display="block",m.className="",m.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}this.app=this.opts.app;var c,l=nest.presentable(this),u=domain.action("likeActivity"),d=domain.action("applyActivity"),p=!1;l.env="production"==__app.settings.env.NODE_ENV?"public":"web",l.subscribe=1==__page.user.wx_subscribe?!0:!1,l.wxhref=util.getWxhref(),l.fromButtonClick=!1,l.activity_filter=0,l.label_screening_select_the_conditions=!1,l.date_select_the_conditions=!1,l.sort_select_the_conditions=!1;var f={sort:{priorityRank:-1,statusrank:1,startTime:1},page:{size:10,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},"tags.type":{},privateFlag:!1}};__page.tenant&&(f.conditions.tenantId=__page.tenant);var h,g,m,v=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:f}),y=0,b=0,_=!1,w=!0;v.on("fetch",function(e){if(console.info("activities is fetched"),l.items=e,w=l.items.length%10==0?!0:!1,l.update(),l.trigger("ready",!0),l.trigger("view-route-to"),m=document.getElementById("pullUp"),g=$("#noResult"),h=document.getElementById("scroll_body"),s(e),0!=e.length?(e.length>3?$("#pullUp").show():$("#pullUp").hide(),g.hide()):($("#pullUp").hide(),g.show()),console.log("---------------------"),console.log(l.sort_select_the_conditions),D(),A(),I(),o(),$(window).scrollTop("0px"),c&&p){$(".activity-filter .checked").removeClass("checked"),$(".set-checked-"+c).addClass("checked");var t=$(".set-checked-"+c).parent().attr("value");l.label_screening_select_the_conditions=!1,l.date_select_the_conditions=!1,l.sort_select_the_conditions=!1,l[t]=!0,l.update(),"sort_select_the_conditions"!=t&&$(".initial_sort").addClass("checked"),$(".initial_checked").addClass("checked")}v.trigger("fetched")}),v.on("fetched",function(){_=!0}),v.on("append",function(e){console.info("activities is append"),r(l.appended_list),l.appended_list=e,console.log(l.appended_list),w=0==l.appended_list.length?!1:l.appended_list.length%10==0?!0:!1,l.update({appended_list:e}),s(e),l.trigger("ready",!0),A()});var x=function(e){this.trigger("ready",!1),this.filter=e||this.filter;var t=e.filter;if(t){var i=new Array;p=!0,i.push(t),$(".activity-filter .checked").removeClass("checked"),c=t,"all"===t?(f.sort={priorityRank:-1,statusrank:1,startTime:1},f.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{},privateFlag:!1}):"newest"===t||"popularity"===t?(f.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{},privateFlag:!1},f.sort="newest"==t?{crtOn:-1}:{"meta.likes":-1}):f.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{$in:i},privateFlag:!1}}void 0==v.fetched()||l.items&&0==l.items.length||t?v.fetch({filter:this.filter}):(l.update(),l.trigger("ready",!0),l.trigger("view-route-to"))}.bind(l),k=function(){l.item=[],l.appended_list=[],f.page.size=10,f.page.no=1,this.trigger("ready",!1),setTimeout(function(){$("#pullDown").hide(),v.fetch({filter:this.filter})},500)}.bind(l),T=function(){this.trigger("ready",!1),v.append({filter:this.filter})}.bind(l),C=function(e){l.items=l.items.concat(l.appended_list);for(var t=0;t<l.items.length;t++)if(l.items[t]._id==this.inputs[0]){l.appended_list=[],l.items[t].meta.likes=e,l.update();break}},N=function(e){l.items=l.items.concat(l.appended_list);for(var t=0;t<l.items.length;t++)if(l.items[t]._id==this.inputs[0].id){l.appended_list=[];for(var i=0,n=0;n<e.length;n++)i+=e[n].num;l.items[t].meta.apps=i,l.update();break}};this.on("mount",function(){console.info("tag activities is mounted"),u.onDone(C),d.onDone(N)}),this.on("unmount",function(){console.info("tag activities is unmounted"),u.offDone(C),d.offDone(N)}),this.on("open",function(e){console.info("tag activities is opening"),I(),x(e),A()}),this.on("leave",function(){l.mask=!0,l.update()}),this.on("reenter",function(){l.mask=!1,l.update()}),this.on("refresh",function(){console.info("tag activities is refreshing"),k()}),this.on("show",function(e){e&&__page.holder().setTitle("活动"),$(window).scrollTop(__page.holder().getTop())}),this.refresh=function(){k()}.bind(this),this.returnPage=function(){e.route("activity/index")}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this),this.clickIndexNav=function(e){var i=$(e.target).attr("alt")||"",o=$(e.target).attr("class");$(".select_the_conditions"),o.indexOf("checked")<0?(l.activity_filter=i,l.update(),t()):(l.activity_filter="reset",l.update(),n())}.bind(this),this.select_type=function(e){var t=$(e.target).attr("value"),n=$(e.target).text(),o=$(e.target).parent().attr("alt");if($("#"+o).text(n),$("#"+o).addClass("select_the_conditions"),p=!1,"sel_date"==o){$(".ul_sel_date li").removeClass("checked");var a;switch(t){case"0":a={},$("#"+o).text("时间筛选"),$("#"+o).removeClass("select_the_conditions");break;case"1":a={$gte:util.getLastDayStartDate(),$lte:util.getLastDayEndDate()};break;case"2":a={$gte:util.getWeekStartDate(),$lte:util.getWeekEndDate()};break;case"3":a={$gte:util.getNextWeekStartDate(),$lte:util.getNextWeekEndDate()};break;case"4":a={$gte:util.getMonthStartDate(),$lte:util.getMonthEndDate()};break;case"5":a={$gte:util.getNextMonthStartDate(),$lte:util.getNextMonthEndDate()};break;default:console.log("no match!!!")}f.conditions.startTime=a,k(),l.date_select_the_conditions=0!=t?!0:!1,i()}else"sel_sort"==o&&($(".ul_sel_sort li").removeClass("checked"),"acquiesce"==t?($("#"+o).text("排序"),$("#"+o).removeClass("select_the_conditions"),f.sort={priorityRank:-1,statusrank:1,startTime:1},l.sort_select_the_conditions=!1):"newest"==t?($("#"+o).text("最新"),f.sort="newest"==t?{crtOn:-1}:{"meta.apps":-1},l.sort_select_the_conditions=!0):(f.sort="newest"==t?{crtOn:-1}:{"meta.likes":-1},l.sort_select_the_conditions=!0),i(),k());$(e.target).toggleClass("checked")}.bind(this),this.typeSelectObj=function(){var e=$(".label_screening .checked");if(p=!1,e.length>0){for(var t=[],n=0;n<e.length;n++)t.push($(e[n]).attr("value"));f.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{$in:t},privateFlag:!1},__page.tenant&&(f.conditions.tenantId=__page.tenant),k();var o=function(){l.label_screening_select_the_conditions=!0,i(),v.off("fetch",o)};v.off("fetch",o).on("fetch",o)}}.bind(this),this.setAllType=function(){p=!1,$(".label_screening li").removeClass("checked"),f.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{},privateFlag:!1},__page.tenant&&(f.conditions.tenantId=__page.tenant),l.label_screening_select_the_conditions=!1,k(),i()}.bind(this),this.hidewechat_concern=function(){i()}.bind(this),this.hideBodyShadowAllHandler=function(){i()}.bind(this),this.openWxhref=function(){util.setCookie("attentionUrl","activity/index",1),i(),window.location=l.wxhref}.bind(this),this.showattention=function(){if(l.fromButtonClick=!0,l.subscribe)e.route("activity/new");else{var t=$(window).scrollTop(),i=$(window).height(),n=$("body").height(),o=$(".wechat-concern").height()-100,a=i>n?i:n,r=t+i/2-o/2-100;$(".body_shadow").show().css("height",a+"px").css("z-index","699"),$(".wechat-concern").show().css("top",r+"px")}}.bind(this);var A=function(){a()},D=function(){function e(e){var e=e||window.event;switch(e.type){case"touchstart":console.log("touchstart"),y=e.targetTouches[0].screenY;break;case"touchcancel":case"touchend":console.log("touchend"),m.className.match("flip")&&(m.className="loading",m.querySelector(".pullUpLabel").innerHTML="加载中...",1==w?(w=!1,f.page.no++,T()):document.getElementById("pullUp").style.display="none");break;case"touchmove":console.log("touchmove");var t=e.targetTouches[0],i=!1;"IMG"==$(t.target)[0].tagName&&$(t.target).attr("class").indexOf("activity-cover-img")>-1&&t.pageY>45&&(i=!0),b=t.screenY,b-y>0&&i&&0===$(window).scrollTop()&&_&&(_=!1,$("#pullDown").show(),k());var n=parseFloat($(window).height())+parseFloat($(window).scrollTop());__page.holder().saveTop($(window).scrollTop()),$(document).height()-25<=n&&$(document).height()<=n?m.className.match("flip")||(m.className="flip",m.querySelector(".pullUpLabel").innerHTML="松开加载更多活动..."):$(document).height()-50<=n&&$(document).height()-25>=n&&m.className.match("flip")&&(m.className="",m.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}}h.addEventListener("touchstart",e,!1),h.addEventListener("touchmove",e,!1),h.addEventListener("touchend",e,!1),h.addEventListener("touchcancel",e,!1),$(window).resize(function(){a()})},I=function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",0])},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",1])},cancel:function(){}})}}),e.tag("activity-menu",' <div class="footer_navs_wary display_none"> <a href="#activity/index" class="nav1">活动</a> <a href="#travel/index" class="nav2">场所</a> <a href="#mine/index" class="nav3">我的</a> <a href="{wxhref}" class="nav4" if="{!subscribe}">关注快乐种子</a> </div>',function(){self=this,self.subscribe=1==__page.user.wx_subscribe?!0:!1;var e=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};self.wxhref=util.getWxhref(),self.env=e(),console.log("env="+self.env)}),e.tag("activity-new",' <div id="addactbody" if="{!hidden}"> <div class="activity-new-statement"> <p>提醒：活动内容包含违法、反动信息或者冒用他人/组织的名义发布活动，平台有权删除其活动并提交公安机关处理</p> <img riot-src="/{env}/images/closebtn3.png" class="closebtn3" onclick="{closeStatement}"> </div> <form id="actform"> <div class="activity-new-basic-info"> <section> <div class="secleft"><img riot-src="/{env}/images/new1.png"></div> <div class="secright"> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="name" value="" placeholder="活动名称"> </div> </section> <section class="tag-type"> <div class="secleft"><p class="p1"><img riot-src="/{env}/images/new2.png"></p> <p class="p2" onclick="{showSelectType}">类型标签</p></div> <div class="secright"> <ul> <li each="{name,i in typetags}" data="{name}" class="{tagdefault:true,checked:parent.currtypetags.indexOf(name)>=0} {(i==3||i==7)?\'no_m_left\':\'\'}" onclick="{parent.selecttags}"> <i>{__app.enums.TypeTags.values[name]}</i> </li> </ul> </div> </section> <section class="activity-time"> <div class="secleft"><img riot-src="/{env}/images/new3.png"></div> <div class="secright"> <div class="fl div_left">活动时间</div> <div class="fl div_right"> <div id="startTimebtn" class="datediv"> <input type="text" id="startTimetxt" value="00/00" readonly="readonly"> <input id="startTime" onchange="{startchange}" onclick="{dateclick}" onblur="{dateblur}" name="startTime" style="display: inline-block;margin-top:0px;" type="date"> </div> <i></i> <div id="endTimebtn" class="datedivright"> <input type="text" id="endTimetxt" value="00/00" readonly="readonly"> <input id="endTime" onchange="{endchange}" onclick="{dateclick}" onblur="{dateblur}" name="endTime" style="display: inline-block;margin-top:0px" type="date"> </div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new4.png"></div> <div class="secright"> <div></div> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="place" value="" placeholder="活动地点"> </div> </section> <section class="initiator"> <div class="secleft"><img riot-src="/{env}/images/new5.png"></div> <div class="secright"> <div class="fl div_left">发起人</div> <div class="fl div_right"> <div><input type="text" id="displayName" onfocus="{inputonfocus}" onblur="{inputonblur}" name="initiatorName" placeholder="姓名" value="{__page.user.displayName}"></div> <div><span class="borderleft"></span><input type="text" onfocus="{inputonfocus}" id="phone" onblur="{inputonblur}" name="initiatorContact" placeholder="联系方式"></div> </div> </div> </section> <section class="deadline"> <div class="secleft"><img riot-src="/{env}/images/new6.png"></div> <div class="secright"> <div class="fl div_left">报名截止</div> <div class="fl div_right"> <div class="datediv datediv360"> <input id="closingTimebtn" type="text" attr="closingTime" value="00/00" readonly="readonly"> <input id="closingTime" onchange="{closingchange}" onclick="{dateclick}" onblur="{dateblur}" name="closingTime" style="display: inline-block;margin-left:0;" type="date"> </div> </div> </div> </section> </div> <div class="activity-new-activity-introduction-title"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div id="editor"></div>        <div class="banner" onclick="{uploadimg}" if="{test}" style="position: relative"> <img style="width: 100%" riot-src="/{env}/images/pabannershow.png"> </div> <div class="banner" onclick="{uploadimg}" if="{!test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img id="banner" style="width: 100%;" riot-src="{imgsrc}"> </div> <div class="activity-new-more-options-title activity-new-more-options-title-checked" onclick="{moreOptions}"> <div class="activity_title"> <span></span> 更多选项 </div> </div> <div class="options activity-new-more-options"> <div class="new_hint_div1_div2"> <p>只允许被邀请的朋友参与</p> <div class="but_wary" id="but_wary"> <p id="but_radius"></p> </div> </div> <div class="user_options"> <div class="new_hint_div1_div3"> <p>报名填写项</p> </div> <ul onclick="{userOptions}"> <li each="{name,i in appFieldNameArr}" data="{name}" class="{i < 2 || name == \'desc\' ? \'checked\':\'\'}">{__page.appFields[name].title}</li> </ul> </div> </div> <div class="clear"></div> <div class="activity-new-presentation"> <div> <p class="new_hint_p1">提示:</p> <p class="new_hint_p2">请确认活动内容后再发布!因为一旦发布并且有用户报名后,活动就不允许取消和修改了。</p> </div> </div> <div class="clear"></div> <div class="serv t-c"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env}/images/1_19.png"> 客服电话：400-680-9072</p> </div> <div class="footer_placeholder"></div> <div class="footer" name="btnbox"> <div onclick="{homepage}"></div> <div class="button but1" style="width:27%;" onclick="{submitdraft}">保存草稿</div> <div class="button but2" style="width:45%;" onclick="{publishpa}">立即发布</div> </div> </form> </div>',function(){var t=nest.presentable(this);t.env="production"==__app.settings.env.NODE_ENV?"public":"web";var i={localIds:[],fileNames:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[],this.fileNames=[]}},n=domain.action("loadContact"),o=domain.action("multiImgUpload"),a=domain.action("judgeIfTenantMember"),r=new util.wedgt.WcEditor({modules:{Bold:!0,Color:!0,Img:!0,TextAlign:!0},container:"editor"}),s=[],c=null,l=[],u={localIds:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[]}},d=this.imgmodel=nest.modelable({},{url:__app.settings.api.url+"/img/"}),p=this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),f=this.startTimetxt,h=this.startTime,g=this.endTimetxt,m=this.endTime,v=this.closingTimebtn,y=this.closingTime,b=this.name,_=this.place,w=__page.user.id,x=this.initiatorName,k=this.initiatorContact,T=(this.desc,this.actform,this.btnbox),C=new Date(__page.servertime);t.appFields=__page.appFields,t.appFieldNameArr=Object.keys(t.appFields);var N=__app.enums.TypeTags.values;delete N.ex,delete N.tn,t.typetags=Object.keys(N),t.test=!0,t.actobj={txtareastr:"【活动主题】</br></br> 【活动日程】</br>   8：00 在xx集合；</br>【费用说明】</br>【报名说明】</br>    1、直接系统报名，队友名单中显示用户名字即报名成功；</br>    2、本活动不限名额。</br>【温馨提示】",initPage:function(){f.value=util.dateFormat(C,"MM/dd"),g.value=util.dateFormat(C,"MM/dd"),v.value=util.dateFormat(C,"MM/dd"),b.value="",h.value=util.dateFormat(C,"yyyy-MM-dd"),m.value=util.dateFormat(C,"yyyy-MM-dd"),y.value=util.dateFormat(C,"yyyy-MM-dd"),_.value="",w=__page.user.id,x.value=__page.user.displayName,k.value="",r.setContentHtml(this.txtareastr);var e=n.newInvocation(__page.user.id);e.onDone(function(e){e.contact&&($("#displayName").val(e.contact.displayName),$("#phone").val(e.contact.phone))}).execute(),s=[],u.refresh(),i.refresh(),S(),O(),E=!1,$(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right")},getJsondata:function(){var e={name:b.value.trim(),startTime:h.value||C,endTime:m.value||C,place:_.value.trim(),initiator:__page.user.id,initiatorName:x.value.trim(),initiatorContact:k.value.trim(),closingTime:y.value.trim()||C,pics:[],desc:r.getContentHtml()&&util.events.htmlToTemplate(r.getContentHtml())||t.actobj.txtareastr,applicationFields:W()};return e.tags={region:"",custom:"",type:t.currtypetags||[]},e},validatefield:function(e){console.log(A);var i=[];return A.empty(e.name)&&i.push("活动名称不能为空"),t.currtypetags.length<=0&&i.push("请选择类型"),A.empty(e.place)&&i.push("活动地点不能为空"),A.empty(e.initiatorName)&&i.push("请填写发起人姓名"),A.empty(e.initiatorContact)&&i.push("请填写发起人联系方式"),util.compareDate(util.dateFormat(C,"yyyy-MM-dd"),h.value)&&i.push("开始时间不能早于今天"),util.compareDate(h.value,m.value)&&i.push("结束时间不能早于开始时间"),util.compareDate(y.value,h.value)&&i.push("截止时间不能晚于开始时间"),i},submitform:function(e){var t=this;i.refresh(),s=[],l=[];var n=$(util.events._wrapdiv(r.getContentHtml()));null!=c?n.find("img").each(function(e){for(var t=!1,e=0,n=c.length;n>e;e++){var o=$(this).attr("fileName");if(c[e].name===o){l.push(c[e]),t=!0;break}}t||(i.localIds.push($(this).attr("localid")),i.fileNames.push($(this).attr("fileName")))}):n.find("img").each(function(){i.localIds.push($(this).attr("localid")),i.fileNames.push($(this).attr("fileName"))}),i.localIds.length>0?t._upload4Wx(i.localIds,i.serverIds,function(n){if(n)return util.tipssuccess(1,"上传图片失败",0);for(var a,r=0,c=i.localIds.length;c>r;r++)a={localId:i.localIds[r],name:i.fileNames[r],mediaId:i.serverIds[r]},s.push(a);var u=o.newInvocation({imgArr:s});u.onDone(function(i){for(var n,o=i,a=0,r=o.length;r>a;a++)n={id:o[a]._id,name:o[a].name,mediaId:o[a].mediaId,localId:o[a].localId},l.push(n);p.set("introImgs",l),t._uploadPaObj(e)}).onFail(function(){alert("multiImgUpload fail")}).execute()}):t._uploadPaObj(e)},_uploadPaObj:function(e){u.localIds.length>0?wx.uploadImage({localId:u.localIds[0],success:function(i){var n={name:util.getFileName(),mediaId:i.serverId};d.set("myobj",n),d.save(),d.off("save").on("save",function(n){var o=[{id:n._id,mediaId:i.serverId,name:n.name}];e.images=o,e.pics[0]="/public/images/pabanner.png",e&&e.status&&"d"==e.status?p.set("query",{action:"draft"}):(t.update(),p.set("query",{action:"publish"})),e&&e.status&&delete e.status,p.set("myobj",e),p.set("privateFlag",E),p.save()})},fail:function(e){console.error(JSON.stringify(e))}}):(e&&e.status&&"d"==e.status?p.set("query",{action:"draft"}):p.set("query",{action:"publish"}),e&&e.status&&delete e.status,e.pics=["/public/images/pabanner.png"],p.set("myobj",e),p.set("privateFlag",E),p.save())},_upload4Wx:function(e,t,i){function n(){wx.uploadImage({localId:e[a],success:function(e){return t.push(e.serverId),a++,o-1>=a?(setTimeout(n,500),void 0):i?i():void 0},fail:function(e){i(JSON.stringify(e)),console.error(JSON.stringify(e))}})}var o=e.length,a=0;n()}},this.homepage=function(){e.route("activity/index")}.bind(this);var A=util.validator();p.on("save",function(i){p.set("_id",i._id),"publish"==p.query.action&&(_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.PUBLISH+")",i.name||"",util.convertToValue(t.currtypetags).join(",")||""]),e.route("#activity/createsuccess/_"+i._id)),"draft"==p.query.action&&(p&&p.query&&delete p.query,util.tipssuccess(0,"保存成功"),i&&i.introImgs&&(c=i.introImgs))}),p.on("save-error",function(){util.tipssuccess(1,"保存失败")}),p.on("error",function(){util.tipssuccess(1,"保存失败")}),this.selecttags=function(e){var i=e.item,n=t.currtypetags.indexOf(i.name);return n>=0?t.currtypetags.splice(n,1):t.currtypetags.push(i.name)}.bind(this),this.startchange=function(){return""==h.value&&util.getBrowser().android===!1?(h.value=C,f.value=util.dateFormat(C,"MM/dd"),!1):(f.value=util.dateFormatstr(h.value),(!m||m.value<h.value)&&(m.value=h.value,t.endchange()),(!y||y.value>h.value)&&(y.value=h.value,t.closingchange()),void 0)}.bind(this),this.endchange=function(){return""==m.value&&util.getBrowser().android===!1?(m.value=C,g.value=util.dateFormat(C,"MM/dd"),!1):(g.value=util.dateFormatstr(m.value),void 0)}.bind(this),this.closingchange=function(){return""==y.value&&util.getBrowser().android===!1?(y.value=C,v.value=util.dateFormat(C,"MM/dd"),!1):(v.value=util.dateFormatstr(y.value),void 0)}.bind(this),this.publishpa=function(){var e=t.actobj.getJsondata();console.log("initiator="+e.initiator),e.status="o";var i=t.actobj.validatefield(e);if(i.length>0)return util.tipssuccess(1,i[0],1),void 0;if(__page.tenant&&__page.user.wx_openid){var n={};n.tenantId=__page.tenant,n.wx_openid=__page.user.wx_openid;var o=a.newInvocation(n);o.onDone(function(i){i&&(e.tenantId=__page.tenant),t.actobj.submitform(e)}).onFail(function(){util.tipssuccess(1,"用户授权失败",1)}).execute()}else t.actobj.submitform(e)}.bind(this),this.submitdraft=function(){var e=t.actobj.getJsondata();e.status="d";var i=t.actobj.validatefield(e);if(i.length>0)return util.tipssuccess(1,i[0],1),void 0;if(__page.tenant&&__page.user.wx_openid){var n={};n.tenantId=__page.tenant,n.wx_openid=__page.user.wx_openid;var o=a.newInvocation(n);o.onDone(function(i){i&&(e.tenantId=__page.tenant),t.actobj.submitform(e)}).onFail(function(){util.tipssuccess(1,"用户授权失败",1)}).execute()}else t.actobj.submitform(e)}.bind(this),this.moreOptions=function(){$(".options").slideToggle(),$(".activity-new-more-options-title").toggleClass("activity-new-more-options-title-checked")}.bind(this),this.userOptions=function(e){"姓名"!=e.target.outerText&&"手机"!=e.target.outerText&&$(e.target).toggleClass("checked")}.bind(this);var D,I,E=!1,S=function(){var e=document.getElementById("but_wary");e.addEventListener("touchstart",F,!1),e.addEventListener("touchmove",M,!1),e.addEventListener("touchend",j,!1)},F=function(e){e.preventDefault();var e=e||window.event;D=e.touches[0].pageX},M=function(e){e.preventDefault();var e=e||window.event;I=e.touches[0].pageX},j=function(){I>D?($(".but_wary").addClass("but_right"),$(".but_wary").removeClass("but_left"),E=!0):D>I&&($(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right"),E=!1),D=0,I=0},O=function(){var e=util.getCookie("noSetatementShow");e&&$(".activity-new-statement").hide()};t.on("toabsolute",function(){T.style.position="absolute",T.style.bottom="0px"}),t.on("tofixed",function(){T.style.position="fixed",T.style.bottom="0px"}),this.inputonfocus=function(){t.trigger("toabsolute")}.bind(this),this.inputonblur=function(){t.trigger("tofixed")}.bind(this),this.descfocus=function(){t.trigger("toabsolute")}.bind(this),this.descblur=function(){t.trigger("tofixed")}.bind(this);var L=navigator.userAgent;L.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){t.trigger("toabsolute")}.bind(this),this.dateblur=function(){t.trigger("tofixed")}.bind(this)),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this),this.showSelectType=function(){var e=$(".tag-type").attr("class");e.indexOf("animation-show")>0?$(".tag-type").removeClass("animation-show").addClass("animation-hide"):$(".tag-type").removeClass("animation-hide").addClass("animation-show")}.bind(this),this.closeStatement=function(){$(".activity-new-statement").addClass("close_transition"),util.setCookie("noSetatementShow","true","7")}.bind(this);var P=function(){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),$("#textareadiv").one("click",function(){util.setCookie("ReadedPushlishTips","true",30),$("#textareatips").remove()}),r.init(),r.reset(),$("#contentdiv").on("focus",function(){t.trigger("toabsolute")}),$("#contentdiv").on("blur",function(){t.trigger("tofixed")}),r.off("chooseImgBegin").on("chooseImgBegin",function(){wx.chooseImage({success:function(e){r.trigger("chooseImgComplete",e.localIds[0])}})})}.bind(t);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("show",function(e){e&&__page.holder().setTitle("发布活动"),$(window).scrollTop(__page.holder().getTop())}),this.on("open",function(e){P(e),t.test=!0,t.actobj.initPage(),p&&p._id&&delete p._id,p&&p.query&&delete p.query,t.currtypetags=[],wx.ready(function(){t.uploadimg=function(){wx.chooseImage({success:function(e){u.refresh(),u.localIds[0]=e.localIds[0],t.test=!1,t.update();var i=$("#banner");i.attr("src",e.localIds[0])}})},t.update()}),$(window).scrollTop("0px")});var W=function(){for(var e=[],i=$(".user_options .checked"),n=0;n<i.length;n++)e.push(t.appFields[$(i[n]).attr("data")]);return e}}),e.tag("activity-recommend-item",'<div class="activity-recommend-item" onclick="{showPaDetail}"> <div> <img riot-src="{picshow}"> </div> <div> <p>{name.length > 24 ? name.substring(0, 24)+\'...\':name}</p> <p>{startTimes} {place.length > 8 ? place.substring(0, 8)+\'...\':place}</p> <p>{num}人报名 {likes}人点赞</p> </div> </div>',function(){var t=this.opts.curritem,i=this;i.num=t.meta.apps,i.picshow=util.calcImageUrl(t),i.likes=t.meta.likes||0,i.startTimes=util.dateFormat(new Date(t.startTime),"MM/dd"),i.Week=util.getDateWeek(new Date(t.startTime)),i.startTimes_Week=i.startTimes+" "+i.Week,i.name=t.name,this.showPaDetail=function(n){n.preventDefault(),_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",i.parent.name||"",util.convertToValue(i.parent.tags.type).join(",")||""]),e.route("activity/_"+t._id)
}.bind(this)}),e.tag("activity-search",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div id="scroll_body" if="{!mask}"> <mask-loading show = "{!ready}"></mask-loading> <div class="search"> <input type="text" name="name" id="search_info" placeholder="输入活动名搜索"><input type="button" onclick="{search}" value="搜索"> </div> <div class="search_placeholder"></div> <div id="pullDown" class="loading" style="display: none"> <span class="pullDownIcon"></span><span class="pullDownLabel">正在刷新列表...</span> </div> <div class="activity-list"> <activity-item class="activity-item" each="{items}" curritem="{this}"></activity-item> <activity-item class="activity-item" each="{appended_list}" curritem="{this}"></activity-item> </div> <div id="pullUp" style="display: none"> <span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多活动...</span> </div> <div id="noResult" style="display: none;text-align:center;padding-top:80px;font-size:14px;color:#666;"> <p><img riot-src="/{env}/images/c_02.png" style="width: 35%"></p> <p class="m_top10">抱歉，没有找到相关活动</p> </div>  <div class="footer_placeholder"></div> <div class="footer" name="btnbox"> <div onclick="{homepage}"></div> <div class="button publish" onclick="{showattention_by_publish}">发布活动</div> </div> </div> </div>',function(){function t(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}function i(e){void 0!=e&&(e.forEach(function(e){o.items.push(e)}),console.log("self.items "+o.items.length))}function n(e){console.log(e),0==e.length?document.getElementById("pullUp").style.display="none":(document.getElementById("pullUp").style.display="block",l.className="",l.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}this.app=this.opts.app;var o=nest.presentable(this);o.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+o.env);var a=this.name,r={sort:{priorityRank:-1,rank:-1},page:{size:10,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},privateFlag:!1}};__page.tenant&&(r.conditions.tenantId=__page.tenant);var s,c,l,u=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:r}),d=domain.action("likeActivity"),p=domain.action("applyActivity"),f=0,h=0,g=!1,m=!0;u.on("fetch",function(e){console.info("activities is fetched"),o.items=e,o.appended_list=[],m=o.items.length%10==0?!0:!1,o.update(),o.trigger("ready",!0),o.trigger("view-route-to"),l=document.getElementById("pullUp"),c=$("#noResult"),s=document.getElementById("scroll_body"),n(e),0!=e.length?(e.length>3?$("#pullUp").show():$("#pullUp").hide(),c.hide()):($("#pullUp").hide(),c.show()),T(),k(),x(),$(window).scrollTop("0px"),l.className="",u.trigger("fetched")}),u.on("fetched",function(){g=!0}),u.on("append",function(e){console.info("activities is append"),i(o.appended_list),o.appended_list=e,m=0==o.appended_list.length?!1:o.appended_list.length%10==0?!0:!1,o.update({appended_list:e}),o.trigger("ready",!0),n(e)});var v=function(e){this.trigger("ready",!1),this.filter=e||this.filter,u.fetch({filter:this.filter})}.bind(o),y=function(){this.trigger("ready",!1),u.append({filter:this.filter})}.bind(o),b=function(){return r.keyword=a.value.trim(),r.page.no=1,0==r.keyword.length?(util.tipssuccess(1,"搜索内容不能为空",1),setTimeout(function(){$("#pullDown").hide()},300),void 0):(setTimeout(function(){$("#pullDown").hide(),o.trigger("ready",!1),v()},500),void 0)};this.search=function(){return r.keyword=a.value.trim(),r.page.no=1,0==r.keyword.length?(util.tipssuccess(1,"搜索内容不能为空",1),void 0):($("#pullDown").hide(),o.trigger("ready",!1),v(),void 0)}.bind(this);var _=function(e){o.items=o.items.concat(o.appended_list);for(var t=0;t<o.items.length;t++)if(o.items[t]._id==this.inputs[0]){o.appended_list=[],o.items[t].meta.likes=e,o.update();break}},w=function(e){o.items=o.items.concat(o.appended_list);for(var t=0;t<o.items.length;t++)if(o.items[t]._id==this.inputs[0].id){o.appended_list=[];for(var i=0,n=0;n<e.length;n++)i+=e[n].num;o.items[t].meta.apps=i,o.update();break}};this.on("mount",function(){console.info("tag activities is mounted"),d.onDone(_),p.onDone(w)}),this.on("unmount",function(){console.info("tag activities is unmounted"),d.offDone(_),p.offDone(w)}),this.on("open",function(){console.info("tag activities is opening"),this.trigger("ready",!1),this.update(),this.trigger("ready",!0),o.trigger("view-route-to"),document.getElementById("search_info").focus()}),this.on("leave",function(){o.mask=!0,o.update()}),this.on("reenter",function(){o.mask=!1,o.update()}),this.on("show",function(e){o.trigger("ready",!0),e&&__page.holder().setTitle("搜索"),$(window).scrollTop(__page.holder().getTop())});var x=function(){$(document).on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")})},k=function(){t()};this.homepage=function(){e.route("activity/index")}.bind(this),this.showattention_by_publish=function(){e.route("activity/new")}.bind(this);var T=function(){function e(e){var e=e||window.event;switch(e.type){case"touchstart":console.log("touchstart"),f=e.targetTouches[0].screenY;break;case"touchcancel":case"touchend":console.log("touchend"),l.className.match("flip")&&(l.className="loading",l.querySelector(".pullUpLabel").innerHTML="加载中...",1==m?(m=!1,r.page.no++,y()):document.getElementById("pullUp").style.display="none");break;case"touchmove":console.log("touchmove");var t=e.targetTouches[0],i=!1;"IMG"==$(t.target)[0].tagName&&$(t.target).attr("class").indexOf("activity-cover-img")>-1&&t.pageY>45&&(i=!0),h=t.screenY,h-f>0&&i&&0===$(window).scrollTop()&&g&&(g=!1,$("#pullDown").show(),b());var n=parseFloat($(window).height())+parseFloat($(window).scrollTop());__page.holder().saveTop($(window).scrollTop()),$(document).height()-25<=n&&$(document).height()<=n?l.className.match("flip")||(l.className="flip",l.querySelector(".pullUpLabel").innerHTML="松开加载更多活动..."):$(document).height()-50<=n&&$(document).height()-25>=n&&l.className.match("flip")&&(l.className="",l.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}}s.addEventListener("touchstart",e,!1),s.addEventListener("touchmove",e,!1),s.addEventListener("touchend",e,!1),s.addEventListener("touchcancel",e,!1),$(window).resize(function(){t()}),wx.ready(function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){},cancel:function(){}})})}}),e.tag("add-randomnotes",'<div if="{!hidden}" class="add-randomnotes"> <textarea name="desc" onfocus="{inputonfocus}" onblur="{inputonblur}" placeholder="写点想说的话吧..."></textarea> <div class="random_img_wary"> <ul> <li each="{name, i in localIds}"> <img id="thumbnail" riot-src="{name}"> <div class="delete_img_button" ><span></span></div> <span onclick="{ parent.removeImg }" class="delete_img_click_area" ></span> </li> </ul> <div id="filePicker" class="random_img_but">+</div> </div> <div class="clear"></div> <div onclick="{shareOrNotToggle}"> <div class="{checked:!shareOrNot}" onclick="{ return; }"></div> <span class="vertical"> 分享到朋友圈或者朋友</span> </div> <div class="footer" name="btnbox"> <div onclick="{submitdraft}"></div> <div class="button randomnote" onclick="{sendNote}">发送</div> </div> </div>',"add-randomnotes ul li{ position:relative;overflow: hidden;float: left; }",function(){function t(e){var t={desc:"",pics:[],initiator:"",initiatorName:""};return t.desc=c.value.trim(),t.initiator=window.__page.user.id,t.pics="undefined"!=typeof e?e:[],s.execute({id:l,data:t}),!0}var i=nest.presentable(this),n=[],o=[];i.localIds=n,i.shareOrNot=!0,i.env="production"==__app.settings.env.NODE_ENV?"public":"web";var a=this.img_model=nest.modelable({},{url:__app.settings.api.url+"/img/"}),r=(this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),domain.action("multiupimgs4rnActivity")),s=domain.action("createRnActivity"),c=this.desc,l=util.getCookie("detailId");this.sendNote=function(){return i.localIds.length<=0&&""===c.value.trim()?(util.tipssuccess(1,"内容为空"),void 0):(util.forbidOperation_cp(),util.uploadtips("show","上传中,请稍后.."),h(n),void 0)}.bind(this),this.removeImg=function(e){i.localIds.splice(e.item.i,1)}.bind(this),this.shareOrNotToggle=function(){return i.shareOrNot?(i.shareOrNot=null,void 0):(i.shareOrNot=!0,void 0)}.bind(this);var u=function(){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),f()}.bind(i),d=function(){util.uploadtips("hide"),util.removeforbidOperation_cp(),i.shareOrNot?e.route("activity/_"+l+"?share=true&guest=true"):e.route("activity/_"+l+"?guest=true")},p=function(){util.uploadtips("hide"),util.tipssuccess(1,"失败,请查看您的网络"),util.removeforbidOperation_cp()};this.on("mount",function(){console.info("tag activities is mounted"),s.onDone(d),s.onFail(p)}),this.on("unmount",function(){console.info("tag activities is unmounted"),s.offDone(d),s.offFail(p)}),this.on("show",function(e){e&&__page.holder().setTitle("添加随记"),$(window).scrollTop(__page.holder().getTop())}),this.on("open",function(e){u(e),i.shareOrNot=!0,i.desc.value="",n=[],o=[],i.localIds=n,i.update(),wx.ready(function(){$("#filePicker").off("click").on("click",function(){wx.chooseImage({success:function(e){i.localIds=i.localIds.concat(e.localIds).slice(0,9),n=i.localIds,i.update()}})})}),$(window).scrollTop("0px")}),this.submitdraft=function(){e.route("activity/_"+l)}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this);var f=function(){$(document).on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")})},h=function(e){if(e.length<=0)return t();var n=e.pop();wx.uploadImage({localId:n,success:function(n){var s={name:util.getFileName(),mediaId:n.serverId};a.set("randomNotePic",s),a.save(),a.off("save").on("save",function(n){var a=r.newInvocation({id:l,resid:n._id});a.onDone(function(n){o.unshift(n),e.length>0?(i.update(),h(e)):t(o)}).onFail(function(){alert("upload note pic fail")}).execute()})}})}}),e.tag("applications-item-initiator-sms",'<div class="applications-item" onclick="{checkboxSelect}"> <div class="div1"> <div> <div class="add_info_checkbox_div1" phone="{phone}" ></div> <img riot-src="{headImg}" width="24" class="imgradius"> {applicantName} </div> <div> <table class=""> <tr> <td class=" td1">{_displayName}</td> <td class=" td2">{num}人</td> </tr> </table> </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId,e.smsImg="/"+e.env+"/images/sms.png",e.telImg="/"+e.env+"/images/tel.png",e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.moreOption=!1;for(var n=[],o=!1,a=0,r=e.appFieldNameArr.length;r>a;a++)"displayName"==e.appFieldNameArr[a]||"phone"==e.appFieldNameArr[a]?n.push(a):e.tag[e.appFieldNameArr[a]]&&!o&&(e.moreOption=!0,o=!0);for(var a=0,r=n.length;r>a;a++)e.appFieldNameArr.splice(n[a],1),n[a+1]=n[a+1]-1;var s=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=s();var c=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=c();var l=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=l();var u=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=u(),this.checkboxSelect=function(e){$(e.currentTarget).find(".add_info_checkbox_div1").toggleClass("add_info_checked"),i._MassTextingURL()}.bind(this)}),e.tag("applications-item-initiator",'<div class="applications-item" > <div class="div1"> <div onclick="{toggleMoreInfo}"><img riot-src="{headImg}" width="24" class="head-portrait"> {applicantName}</div> <div onclick="{toggleMoreInfo}"> <table> <tr> <td class="td1">{_displayName}</td> <td>{num}人</td> </tr> </table> </div> </div> <div class="clear"></div> <div class="div2 app_user_info"> <div if="{moreOption}"> <table class=""> <tr each = "{name, i in appFieldNameArr}" if="{parent[name]}"> <td class=" td1" valign="top">{parent.appFields[name].title}：</td> <td class=" td2">{parent[name]}</td> </tr> </table> </div> <div class="sms-tel"> <a href="sms:{phone}"><img riot-src="{smsImg}" class="vertical"> <span class="vertical">发短信</span></a> <a href="tel:{phone}"><img riot-src="{telImg}" class="vertical"> <span class="vertical">打电话</span> </a> </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId,e.smsImg="/"+e.env+"/images/sms.png",e.telImg="/"+e.env+"/images/tel.png",e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.moreOption=!1;for(var n=[],o=!1,a=0,r=e.appFieldNameArr.length;r>a;a++)"displayName"==e.appFieldNameArr[a]||"phone"==e.appFieldNameArr[a]?n.push(a):e.tag[e.appFieldNameArr[a]]&&!o&&(e.moreOption=!0,o=!0);for(var a=0,r=n.length;r>a;a++)e.appFieldNameArr.splice(n[a],1),n[a+1]=n[a+1]-1;var s=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=s();var c=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=c();var l=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=l();var u=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=u(),this.toggleMoreInfo=function(e){$(e.currentTarget).parent().parent().find(".app_user_info").toggle()}.bind(this)}),e.tag("applications-item",'<div class="applications-item"> <div class="div1"> <div><img riot-src="{headImg}" width="24" class="head-portrait"> {applicantName}</div> <div style="text-align:right;"> {num}人 </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId;var n=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=n();var o=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=o();var a=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=a();var r=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=r()}),e.tag("communication-index",'<div if="{!hidden}"> <div class="communication-index" onclick="{showEdit}" name="{commenter.displayName}" replyuserid="{commenter._id}"> <div><img riot-src="{commenter.headImgUrl}" width="24" class="imgradius"></div> <div> <p class="p1"><span>{commenter.displayName}：</span>{replyString}<span>{replyToName}</span>{comment}</p> <p class="p2"> {time} <span>&nbsp;&nbsp;</span><a onclick="{deleteComment}" alt="{_id}" class="delete" if="{commenter._id == window.__page.user.id}">删除</a></p> </div> <div class="clear"></div> </div> </div>',function(){var e=this;e.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+e.env);var t=this.opts.tag.parent,i=this.opts.tag.parent._id,n=this.opts.tag.crtOn;e.replyString=""==this.opts.tag.replyTo?"":"回复 ";var o=domain.action("deleteActivityComment"),a=util.formatDate(n);e.time=a,e.update(),this.deleteComment=function(e){console.log(e);var n=$(e.target).attr("alt"),a=o.newInvocation({id:i,deleteId:n});a.onDone(function(e){t.comments=e,t.update()}).onFail(function(){alert("delete comment failed")}).execute(),e.stopPropagation()}.bind(this),this.showEdit=function(e){var i=$(e.currentTarget).parent().attr("class");if(i)t._resetFooterStyle();else{var n=$(e.currentTarget).attr("name"),o=$(e.currentTarget).attr("replyUserId"),a="";try{a=n?n:""}catch(e){a=""}t.replyToName=a,t.replyTo=o,$("#interflow_reply").val(""),$("#interflow_reply").attr("placeholder","回复 "+a+":"),$(".communication-index").parent().removeClass("com_wary_background_color"),$(e.currentTarget).parent().addClass("com_wary_background_color"),t.consult=1,t.update(),document.getElementById("interflow_reply").focus()}e.stopPropagation()}}),e.tag("component-date",'<input type="text" id="{dateidtext}" value="00/00/00" readonly="readonly"> <input id="{dateid}" onchange="{datechange}" onclick="{dateclick}" onblur="{dateblur}" style="display: inline-block;margin-top:0px;" type="date">',function(){var e=nest.presentable(this);e.dateid=this.opts.dateid,e.datename=this.opts.datename,e.dateidtext=this.opts.dateidtext;var t=e.newdate=new Date(__page.servertime);e.on("toabsolute",function(){e.parent.btnbox.style.position="absolute",e.parent.btnbox.style.bottom="0px",e.parent.btnbox2.style.position="absolute",e.parent.btnbox2.style.bottom="0px"}),e.on("tofixed",function(){e.parent.btnbox.style.position="fixed",e.parent.btnbox.style.bottom="0px",e.parent.btnbox2.style.position="fixed",e.parent.btnbox2.style.bottom="0px"});var i=navigator.userAgent;i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){e.trigger("toabsolute")}.bind(this),this.dateblur=function(){e.trigger("tofixed")}.bind(this)),this.datechange=function(){var i=document.querySelector("#"+e.dateid),n=document.querySelector("#"+e.dateidtext);return""==i.value&&util.getBrowser().android===!1?(i.value=t,n.value=util.dateFormat(t,"yyyy/MM/dd"),!1):(n.value=util.dateFormat(new Date(i.value),"yyyy/MM/dd"),void 0)}.bind(this)}),e.tag("debug-index",'<div class="view" if="{!hidden}"> <div> <button onclick="{refresh}">刷新</button> <button onclick="{back}">返回</button> <button onclick="{userInfo}">用户信息</button> <button onclick="{userReset}">重置用户</button> <button onclick="{userResetForChannel}">重置用户渠道信息</button> <a href="/auth/signout">注销</a>  <br> <a onclick="triggerClickMe();"> click me </a><br> <a id="clickMeLink" href="weixin://profile/gh_ad1cd17862c0" onclick="WeiXinAddContact(\'<span style=" background-color:#ff0000;"=""> click me </a><br>  <a id="clickLinkDirectlyLink" href="weixin://profile/gh_ad1cd17862c0" onclick="clickLinkDirectly();"> 直接点链接 </a><br>  <a id="followSeedTripLink" href="weixin://profile/gh_ad1cd17862c0" onclick="followSeedTrip"> 模拟点链接, 间接调用方法 </a><br>  <a href="weixin://profile/gh_ad1cd17862c0" onclick="triggerFollowMe();"> 模拟点链接, 直接调用方法 </a><br> <a id="followMeLink" href="weixin://profile/gh_ad1cd17862c0" onclick="WeiXinAddContact();"> 模拟点链接, 直接调用方法 </a><br>   </div> 页面用户信息： <div id="user"> </div> 存储用户信息： <div id="userLoaded"> </div> COOKIE信息 <div id="cookie"> </div> </div>',function(){function e(e,t){return"undefined"==typeof WeixinJSBridge?(alert("WeixinJSBridge undefined"),!1):"undefined"==typeof WeixinJSBridge.invoke?(alert("WeixinJSBridge.invoke undefined"),!1):(WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e,i){alert(e.err_code),alert(e.err_msg),alert(i),t&&t(e.err_msg)}),void 0)}var t=nest.presentable(this);t.env=__app.settings.env.NODE_ENV,console.log("env="+t.env);var i=function(){t.trigger("view-route-to")},n=function(){t.update(),t.trigger("show",!0)};this.on("mount",function(){console.info("tag debug is mounted")}),this.on("open",function(){console.info("tag debug is opening"),i()}),this.on("refresh",function(){console.info("tag debug is refreshing"),n()}),this.on("show",function(e){e&&__page.holder().setTitle("调试页面")}),this.refresh=function(){n()}.bind(this),this.back=function(){t.trigger("view-route-back")}.bind(this),this.userInfo=function(){$("#user").html(JSON.stringify(__page.user)),$("#cookie").html("token: "+$.cookie("token")+"<br>agent: "+$.cookie("agent")+"<br>connect.sid: "+$.cookie("connect.sid")),__page.user.id&&$.getJSON(__app.settings.api.url+"/user/_"+__page.user.id).done(function(e){$("#userLoaded").text(JSON.stringify(e.result))}).fail(function(e,t,i){$("#userLoaded").text(JSON.stringify(i))})}.bind(this),this.userReset=function(){$.cookie("token",null,{path:"/"}),$.cookie("agent",null,{path:"/"})}.bind(this),this.userResetForChannel=function(){$.get(__app.settings.api.url+"/user/resetUserForChannel",function(e){alert(e)})}.bind(this),this.follow=function(){e("gh_ad1cd17862c0",function(e,t){alert(e),alert(t)})}.bind(this)}),e.tag("highlights-desc","<span></span>",function(){this.root.innerHTML=""==this.opts.content?"&nbsp;":this.opts.content}),e.tag("initactivity-menu",' <div class="xcgyimg xcgy_gz setwzcss border_radius" id="focus_on"><a href="/index#activity/new"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_04.png" class="border_radius"></a></div>',function(){self=this,self.env=__app.settings.env.NODE_ENV,console.log("env="+self.env)}),e.tag("introduce-item","<p>{name}</p>",function(){}),e.tag("mask-loading",'<div> <div class="container" riot-style="height:{winheight}"> <div class="mask_loading" > <div></div> <div></div> <p>小种子努力加载中...</p> </div> </div> </div>',"mask-loading { } mask-loading .container{ width:100%; height:100%; min-height:567px; }",function(){var e=nest.presentable(this);e.env=__app.settings.env.NODE_ENV,this.winheight=window.innerHeight+"px",this.on("mount",function(){}),this.show=this.opts.show}),e.tag("mine-index",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div if="{!mask}"> <div class="mine-top-bar-placeholder"></div> <div class="mine-top-bar"> <div class="mine_nav"> <div class="{mine_bar_checked == 1 ? \'checked\' : \'\'}" alt="1" onclick="{minenav}">参与的活动</div> <div class="{mine_bar_checked == 2 ? \'checked\' : \'\'}" alt="2" onclick="{minenav}">发布的活动</div> <div class="{mine_bar_checked == 3 ? \'checked\' : \'\'}" alt="3" onclick="{minenav}">收藏的活动</div> </div> </div> <div class="clear"></div> <div class="activity-list" id="attendee" if="{mine_bar_checked == 1}"> <activity-item class="activity-item" each="{items2}" curritem="{this}"></activity-item> </div> <div class="activity-list" id="initiator" if="{mine_bar_checked == 2}"> <activity-item class="activity-item" each="{items}" curritem="{this}"></activity-item> </div> <div class="activity-list" id="minelike" if="{mine_bar_checked == 3}"> <activity-item class="activity-item" each="{items3}" curritem="{this}"></activity-item> </div>  <div class="footer_placeholder"></div> <div class="footer-index setleft"> <div> <a href="#activity/index"><i><img riot-src="/{env}/images/footer_nav_activity1.png"><br>活动</i></a> <a href="#travel/index"><i><img riot-src="/{env}/images/footer_nav_travel1.png"><br>场所</i></a> <a href="#mine/index"><i class="current"><img riot-src="/{env}/images/footer_nav_mine2.png"><br>我的</i></a> </div> <div> <i onclick="{showattention}">发布活动</i> </div> </div> </div> </div>',function(){function t(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}var i=nest.presentable(this);i.env="production"==__app.settings.env.NODE_ENV?"public":"web",i.load=0;var n=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/initiated",filter:this.opts.filter}),o=this.collection2=nest.collectable({},{url:__app.settings.api.url+"/pa/applied",filter:this.opts.filter}),a=this.collection3=nest.collectable({},{url:__app.settings.api.url+"/pa/stard",filter:this.opts.filter});this.filter=this.opts.filter,n.on("fetch",function(e){console.info("activities is fetched"),i.items=e,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1}),o.on("fetch",function(e){console.info("activities is fetched 2"),i.items2=e,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1,l()}),a.on("fetch",function(e){console.info("activities is fetched 3"),i.items3=e,i.mine_bar_checked=1,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1});var r=function(e){this.trigger("ready",!1),this.filter=e||this.filter,i.load=0,n.fetch({filter:this.filter}),o.fetch({filter:this.filter}),a.fetch({filter:this.filter}),$("#wary").css({height:"auto",overflow:"visible"}),$("body").css({height:"auto",overflow:"visible"})}.bind(i),s=function(){this.trigger("ready",!1),i.load=0,n.fetch({filter:this.filter}),o.fetch({filter:this.filter}),a.fetch({filter:this.filter})}.bind(i);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),r(e)}),this.on("leave",function(){i.mask=!0,i.update()}),this.on("reenter",function(){i.mask=!1,i.update()}),this.on("show",function(e){e&&__page.holder().setTitle("我的"),$(window).scrollTop("0px")}),this.on("refresh",function(){console.info("tag activities is refreshing"),s()}),this.refresh=function(){s()}.bind(this);var c=function(){t()};this.showattention=function(){e.route("activity/new")}.bind(this);var l=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};$(window).resize(function(){t()}),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this),this.minenav=function(e){var t=$(e.target).attr("alt");i.mine_bar_checked=t,i.update()}.bind(this)}),e.tag("navigator",'<div if="{show}">  <div class="home_gy" style="bottom:28px;"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home.png" class="border_radius img_home"> <a href="#activity/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav1.png" class="home_nav"></a> <a href="#travel/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav2.png" class="home_nav"></a> <a href="#mine/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav3.png" class="home_nav"></a> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_close.png" class="home_close"> </div> </div>',function(){self=this,this.show=!0,self.env=__app.settings.env.NODE_ENV,console.log("env="+self.env)}),e.tag("randomnotes-item",'<div class="randomnotes-item"> <div class="fl" ><img src= "{initiator.headImgUrl || \'/public/images/head.png\'}" width="24" style="border-radius: 50em"></div> <div class="fl"> <div> <span>{initiator.displayName}：</span> <p onclick="{ shareinfo }"><img riot-src="/{env}/images/share_but.png" class=""> <span class="vertical"> 分享</span></p> </div> <p>{desc}</p> <div class="trave_img_wary"> <p each="{ pics }" ><img riot-src="{ parent.parseImg(meta, url) }" onclick="{parent.previewImg}" standard="{meta}"></p> </div> <p class="p2">{time} <a onclick="{deleteRandomNote}" alt="{_id}" class="delete" if="{initiator._id == window.__page.user.id}">删除</a></p> </div> <div class="clear"></div> </div>',function(){var e=this;e.env="production"==__app.settings.env.NODE_ENV?"public":"web";var t=domain.action("delRnActivity"),i=this.opts.tag.parent;e.currentRandomNote=e.opts.tag;var n=this.opts.tag.parent._id,o=this.opts.tag.crtOn,a=util.formatDate(o);e.time=a,e.parseImg=function(e,t){var i={meta:e,url:t};return util.parseImgUrl(i)},this.on("mount",function(){t.onDone(function(e){i.randomNotes=e,i.update()})}),this.previewImg=function(){e.currentRandomNote&&e.currentRandomNote.pics&&e.currentRandomNote.desc?util.wedgt.imgPreviewer($("#wary"),e.currentRandomNote.pics,{msg:e.currentRandomNote.desc}):e.currentRandomNote&&e.currentRandomNote.pics&&util.wedgt.imgPreviewer($("#wary"),e.currentRandomNote.pics,{msg:""})}.bind(this),this.deleteRandomNote=function(e){var i=$(e.target).attr("alt");t.execute({id:n,deleteId:i}),e.stopPropagation()}.bind(this),this.shareinfo=function(){var e,t,i,n,o=this,a=this.parent.parent;if(a.shareinfo_detail(),o&&o.pics[0]&&o.pics[0]){var r={};r.images=[],r.images[0]={meta:o.pics[0].meta,url:o.pics[0].url},e="http://"+util.sharepic(r)}else e="/public/images/pabanner.png";t={title:'我在参加"'+a.item.name+'"活动,给小伙伴直播一下~~~~',desc:o.desc||a.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+a._id+"?guest="+o._id,imgUrl:e},i=Object.create(t),i.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",a.item.name+"随记"||"",util.convertToValue(a.item.tags.type).join(",")||"",0])},n=Object.create(t),n.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",a.item.name+"随记"||"",util.convertToValue(a.item.tags.type).join(",")||"",0])},wx.onMenuShareAppMessage(i),wx.onMenuShareTimeline(n)}.bind(this)}),e.tag("travel-detail",'<div if="{!hidden}" class="travel-detail"> <div id="wary"> <div class="travel-detail-screen"> <img riot-src="{picshow}" class="img1"> <div class="scr tt_setheight_line"> <div class="scr_left">{item.name}</div> <div class="scr_right"><img src="/public/images/3_03.png"> <span class="likesum">{item.meta.likes}</span></div> </div> <div class="shadow tt_setheight"></div> </div> <div class="pun t-c set_width2"> {item.promotionWords} </div> <div class="pub_tit t-c m_top10"> 亮点 </div> <ul class="ld_ul1"> <li each="{ i in highlightsArray }">• {i}</li> </ul> <div class="pub_tit t-c m_top10"> 概览 </div> <div class="pun m_top10 set_width1"> {item.summary} </div> <div class="pub_tit t-c m_top10"> 介绍 </div> <div class="introduce nav_info"> <div class="detail_pub m_top10" each="{element,i in item.elements }"> <p class="FB"><img src="/public/images/3_01.png" class="img_width vertical"> <span class="vertical" >{i+1}.{element.name}</span></p> <travel-spot each="{element.spots}"></travel-spot> </div> <div class="xcgyimg border_radius xcgy_gz" id="showCatalog" onclick="{showcatalogue}"> <img src="/public/images/3_09.png" class="border_radius"> </div> </div> <div class="comment display_none nav_info" id="commentId"></div> <div class="detail_pub m_top10 position_rel border_radius_3px"> <a href="http://mp.weixin.qq.com/s?__biz=MzA3MjIwNTk4Mg==&mid=204371161&idx=1&sn=51f61cc7634389147a7050a5a2e97a6f#rd" class="butA"><img src="../public/images/guanzhu.jpg" alt="提示" class="border_radius_3px"> </a> </div>  <div class="footer_placeholder"></div> <div class="footer"> <div onclick="{returnPage}"></div> <div class="but1 button travel-detail-live" onclick="{live}"></div> <div class="button but2" onclick="{shareinfo}">分享</div> </div> <div class="footer_shadow"></div> <div class="body_shadow display_none" onclick="{hideShadow}"></div> <div class="xcgy_wary display_none"> <div class="xcgy_wary_div1">介绍目录</div> <div class="xcgy_wary_div2"> <ul> <li each="{element,i in item.elements}"><p></p>{i+1}.{element.name} </li> </ul> </div> </div> <div class="comments_wary display_none border_radius"> <img src="/public/images/close.png" class="but_close_img"> <div class="comm_cz_sbss">随便说说</div> <textarea class="textarea border_radius"></textarea> <button class="comm_but border_radius">提交</button> </div> <div class="together display_none" id="clickXHidden" onclick="{hideShadow}"> <img src="/public/images/4_02.png" class="together_img"> </div> <wechat-menu if="{!subscribe}"></wechat-menu> </div> </div>',function(){var t=nest.presentable(this);
t.env=__app.settings.env.NODE_ENV;var i=nest.modelable({},{url:__app.settings.api.url+"/tt/"});t.footershow=!0,i._id=this._id=this.opts._id,i.on("fetch",function(e){console.info("activity is fetched"),t.item=e,t.id=e._id,t.name=e.name,t.promotionWords=e.promotionWords,t.highlightsArray=e.highlights.split("\r\n"),console.log(e.highlights),t.userId=window.__page.user.id,t.user=JSON.stringify(window.__page.user),t.picshow=util.calcImageUrl(t.item),t.likes=e.meta.likes,t.subscribe=1==__page.user.wx_subscribe?!0:!1,t.update({item:e}),t.trigger("ready",!0),t.trigger("view-route-to"),a(),s(),r()});var n=function(e){this.trigger("ready",!1),this._id=e||this._id,i.set("_id",this._id),i.fetch({action:"open"})}.bind(t),o=function(){this.trigger("ready",!1),i.fetch(this._id,{action:"refresh"})}.bind(t);this.on("mount",function(){console.info("tag activity is mounted")}),this.on("open",function(e){console.info("tag activity is opening"),n(e)}),this.on("refresh",function(){console.info("tag activity is refreshing"),o()}),this.on("show",function(e){e&&__page.holder().setTitle(t.item.name),$(window).scrollTop("0px")});var a=function(){var e=__page.user.meta.likes[t.id];e?$(".footer .but1").removeClass("travel-detail-live").addClass("travel-detail-live1"):$(".footer .but1").removeClass("travel-detail-live1").addClass("travel-detail-live")},r=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};this.returnPage=function(){e.route("travel/index")}.bind(this),this.live=function(){$.ajax({type:"GET",url:__app.settings.api.url+"/tt/_"+t.id+"/like",success:function(e){e.status&&(e.result>t.likes?__page.user.meta.likes[t.id]="11111":delete __page.user.meta.likes[t.id],i.fetch())}})}.bind(this),this.shareinfo=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".together").show().css("top",e+"px"),$(".body_shadow").show().css("height",n+"px")}.bind(this),this.showcatalogue=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".body_shadow").show().css("height",n+"px"),$(".xcgy_wary").show().css("top",e+20+"px")}.bind(this),this.hideShadow=function(){$(".body_shadow").hide(),$(".xcgy_wary").hide(),$(".comments_wary").hide(),$(".together").hide()}.bind(this);var s=function(){wx.ready(function(){wx.onMenuShareAppMessage({title:t.name,desc:t.promotionWords,link:__page.holder().getBaseUrl()+"/index#travel/_"+t.id,imgUrl:t.picshow,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:t.name,link:__page.holder().getBaseUrl()+"/index#travel/_"+t.id,imgUrl:t.picshow,success:function(){},cancel:function(){}})})}}),e.tag("travel-index",'<div if="{!hidden}"> <div class="clear">&nbsp</div> <div class="activity-list"> <travel-item each="{items}" curritem="{this}" class="activity-item travel-item"></travel-item> </div> <wechat-menu if="{!subscribe}"></wechat-menu>  <div class="footer_placeholder"></div> <div class="footer-index setleft"> <div> <a href="#activity/index"><i><img riot-src="/{env}/images/footer_nav_activity1.png"><br>活动</i></a> <a href="#travel/index"><i class="current"><img riot-src="/{env}/images/footer_nav_travel2.png"><br>场所</i></a> <a href="#mine/index"><i><img riot-src="/{env}/images/footer_nav_mine1.png"><br>我的</i></a> </div> <div> <i onclick="{showattention}">发布活动</i> </div> </div> </div>',function(){function t(){var e=Math.round(260*Math.round(.95*$("#wary").width())/600)-3;$(".img1").css("height",e+5)}var i=nest.presentable(this);i.env="production"==__app.settings.env.NODE_ENV?"public":"web";var n={sort:{updOn:-1},conditions:{}},o=this.collection=nest.collectable({},{url:__app.settings.api.url+"/tt/filter",filter:n});o.on("fetch",function(e){console.info("activities is fetched"),i.items=e,i.subscribe=1==__page.user.wx_subscribe?!0:!1,i.update(),i.trigger("ready",!0),i.trigger("view-route-to"),s(),c()});var a=function(e){this.trigger("ready",!1),this.filter=e||this.filter,o.fetch({filter:this.filter})}.bind(i),r=function(){this.trigger("ready",!1),o.fetch({filter:this.filter})}.bind(i);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),a(e)}),this.on("refresh",function(){console.info("tag activities is refreshing"),r()}),this.on("show",function(e){e&&__page.holder().setTitle("场所"),$(window).scrollTop("0px")}),this.refresh=function(){r()}.bind(this);var s=function(){t()};$(window).resize(function(){t()});var c=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};this.showattention=function(){e.route("activity/new")}.bind(this),wx.ready(function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){},cancel:function(){}})})}),e.tag("travel-item",'                  <div class="screen"> <a href="#travel/_{_id}"><img riot-src="{picshow}" class="activity-cover-img img1"></a> <div class="bottom-bar"> <div> <p>{name.length > 15 ? name.substring(0, 15)+\'...\':name}</p> <p> <span></span>{promotionWords.length > 16 ? promotionWords.substring(0, 16)+\'...\':promotionWords} </p> </div> <div><img src= "{path}"> <span>{likes}</span></div> </div> <div class="shadow"></div> </div>',function(){var e=this.opts.curritem,t=this,i=__page.user;t.env=__app.settings.env.NODE_ENV;var n="development"==t.env?"web":"public";t.picshow=util.calcImageUrl(e),t.likes="0",t.path="";var o=function(){if(i.id){var o=i.meta.likes[e._id];o?(t.path="/"+n+"/images/3_06_h.png",t.likes=e.meta.likes):(t.path="/"+n+"/images/3_03.png",t.likes=e.meta.likes)}else t.path="/"+n+"/images/3_03.png",t.likes=e.meta.likes;console.log(t.path)};this.on("mount",function(){console.info("tag activities is mounted"),o(),this.update()})}),e.tag("travel-spot",'<p each="{pic in pics}"> <img riot-src="{pic}" class="activity-cover-img img1 border_radius"> </p> <p>{desc}</p>',function(){}),e.tag("wechat-menu",'<div class="wechat-menu" id="focus_on"> <img riot-src="/{env}/images/logo_1.png"> </div> <a href="{wxhref}"><div class="xcgyimg_flash xcgyimg_1"></div></a>',function(){self=this;var e=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};self.wxhref=util.getWxhref(),self.env=e()})}},function(e,t,i){var n=i(5);i(20),e.exports=n.actions()},function(e,t,i){var n=i(5),o=n.restApi();n.action("filterActivities").onExecute(function(e){o.post("/pa/find").drive(this).send({filter:e})}),n.action("loadActivity").onExecute(function(e){o.get("/pa/_"+e).drive(this).send()}),n.action("commentActivity").onExecute(function(e){o.post("/pa/_"+e.id+"/comment").drive(this).send(e.data)}),n.action("deleteActivityComment").onExecute(function(e){o.delete("/pa/_"+e.id+"/comment").drive(this).send({deleteId:e.deleteId})}),n.action("createRnActivity").onExecute(function(e){o.post("/pa/_"+e.id+"/sendNote").drive(this).send(e.data)}),n.action("delRnActivity").onExecute(function(e){o.delete("/pa/_"+e.id+"/deleteNote").drive(this).send({deleteId:e.deleteId})}),n.action("likeActivity").onExecute(function(e){o.get("/pa/_"+e+"/like").drive(this).send()}),n.action("modifyStatusActivities").onExecute(function(e,t){o.get("/pa/_"+e+"/"+t).drive(this).send()}),n.action("multiupimgs4rnActivity").onExecute(function(e){o.post("/pa/_"+e.id+"/uploadNotePic").drive(this).send(e.resid)}),n.action("replyActivity").onExecute(function(e){o.post("/pa/_"+e.id+"/comment").drive(this).send(e.data)}),n.action("sendMailActivities").onExecute(function(e){o.get("/pa/_"+e._id+"/applications?action=mail&mailbox="+e.mailboxName+"&name="+e.name).drive(this).send()}),n.action("starActivity").onExecute(function(e){o.get("/pa/_"+e+"/star").drive(this).send()}),n.action("loadContact").onExecute(function(e){o.get("/user/_"+e+"/contact").drive(this).send()}),n.action("multiImgUpload").onExecute(function(e){o.post("/img/images").drive(this).send(e)}),n.action("applyActivity").onExecute(function(e){o.post("/pa/_"+e.id+"/apply").drive(this).send(e.temp)}),n.action("judgeIfTenantMember").onExecute(function(e){o.get("/tenant/_"+e.tenantId+"/ifTenantMember").drive(this).send({wx_openid:e.wx_openid})}),n.action("applicantLoadMore").onExecute(function(e,t){o.post("/pa/_"+e+"/applications").drive(this).send({filter:t})}),e.exports=null},function(e,t,i){{var n=i(5);i(19)}e.exports=n},function(e,t,i){var n={},o=i(4),a=i(1).observable,r=function(e,t,i){var n=[t];Array.prototype.push.apply(n,i),e.trigger.apply(e,n)},s=function(e,t,i,n){for(var o=i[n],a=o.length,r=null,s=0;a>s;s++)r=o[s],t.on(n,r.bind(e))},c=function(e,t){this.id=o.nextId(e.name()),this.action=e,this.inputs=t,this.outputs=null,this.error=null,this.executed=!1;var i=this._events=a({}),n=this.action._listeners;s(this,i,n,"execute"),s(this,i,n,"unexecute"),s(this,i,n,"done"),s(this,i,n,"fail"),s(this,i,n,"always")};c.prototype.execute=function(){r(this._events,"execute",this.inputs)},c.prototype.unexecute=function(){r(this._events,"unexecute",this.inputs)},c.prototype.onDone=function(e){return this._events.on("done",e.bind(this)),this},c.prototype.onFail=function(e){return this._events.on("fail",e.bind(this)),this},c.prototype.onAlways=function(e){return this._events.on("always",e.bind(this)),this},c.prototype.done=function(){var e=o.getArguments(arguments);this.outputs=e,this.executed=!0,r(this._events,"done",e),r(this._events,"always",e)},c.prototype.fail=function(){var e=o.getArguments(arguments);this.error=e[0],this.executed=!0,r(this._events,"fail",e),r(this._events,"always",e)};var l=function(e,t){this._domain=e,this._name=t,this._events=a({}),this._listeners={execute:[],unexecute:[],done:[],fail:[],always:[]}};l.prototype.name=function(e){return e?(this._name=e,this):this._name},l.prototype.onExecute=function(e){return this._listeners.execute.push(e),this},l.prototype.onUnexecute=function(e){return this._listeners.unexecute.push(e),this},l.prototype.onDone=function(e){return this._listeners.done.push(e),this},l.prototype.onFail=function(e){return this._listeners.fail.push(e),this},l.prototype.onAlways=function(e){return this._listeners.always.push(e),this},l.prototype.offDone=function(e){return o.remove(this._listeners.done,e),this},l.prototype.offFail=function(e){return o.remove(this._listeners.fail,e),this},l.prototype.offAlways=function(e){return o.remove(this._listeners.always,e),this},l.prototype.execute=function(){var e=new c(this,o.getArguments(arguments));return e.execute(),e},l.prototype.newInvocation=function(){return new c(this,o.getArguments(arguments))},n.Action=l,n.ActionInvocation=c,e.exports=n},function(e,t,i){var n={version:"WIP",settings:{}},o=i(4),a=i(8).ApiErrorFactory,r=$&&$.ajax||i(2),s={dataType:"json"},c=function(e){this._options=o.extend({},s),this.options(e||{})};c.defaultOptions=s,c.prototype.options=function(e){o.extend(this._options,e)};var l=function(e,t){e[t]=function(e){var i=new u(this._options),n=i.o;return n.method=t,n.url=(n.baseUrl||"")+e,i}};l(c.prototype,"get"),l(c.prototype,"post"),l(c.prototype,"put"),l(c.prototype,"delete");var u=function(e){this.o=o.extend({},e||{})},d=function(e,t){e[t]=function(e){return this.o[t]=e,this}};u.prototype.drive=function(e){return this.o.action=e,this},d(u.prototype,"done"),d(u.prototype,"fail"),d(u.prototype,"success"),d(u.prototype,"error"),d(u.prototype,"always"),u.prototype.onDone=function(e){if(e&&e.errcode){var t=a.bizError(e.errcode,e.errmsg);this.o.fail(t)}else e&&"undefined"!=typeof e.result?this.o.done(e.result):this.o.done(e)},u.prototype.onFail=function(e,t,i){var n=a.ajaxError(t,i);this.o.fail(n)},u.prototype.send=function(e){var t=r({type:this.o.method,url:this.o.url,dataType:this.o.dataType,data:e||null});if(this.o.action){var i=this.o.action;this.done(function(e){i.done(e)}).fail(function(e){i.fail(e)})}return this.o.done||this.o.fail?(t.done(this.onDone.bind(this)),t.fail(this.onFail.bind(this))):(this.o.success&&t.done(this.o.success),this.o.error&&t.fail(this.o.error)),this.o.always&&t.always(this.o.always),t},n.RestApi=u,n.RestApiFactory=c,e.exports=n},function(e){var t={};e.exports=t},function(e,t,i){var n={version:"WIP",settings:{}},o=i(4),a=i(8);o.extend(n,a);var r=i(23);o.extend(n,r);var s=i(24);o.extend(n,s);var c=i(22);o.extend(n,c);var l=function(){this._actions={},this._restApiFactories={},this._wsApiFactories={}};l.prototype.action=function(e){var t=this._actions[e];return t?t:this._actions[e]=new n.Action(this,e)},l.prototype.actions=function(){return this._actions},l.prototype.restApi=function(e,t){var i="object"==typeof e||"object"==typeof t,o="string"!=typeof e,a=o?"default":e,r=o?e:t;if(i){var s=!!this._restApiFactories[a];!s&&(this._restApiFactories[a]=new n.RestApiFactory(r)),s&&this._restApiFactories[a].options(r)}return this._restApiFactories[a]},l.prototype.wsApi=function(e,t){var i="string"!=typeof e,n=i?"default":e;return this._wsApiFactories[n]},n.domain=function(){return new l},e.exports=n},function(e,t,i){var n=i(25);e.exports=n},function(e,t,i){var n;n=function(e,t,n){var o=i(2);!function(e,t,i){function n(e){return e}function o(e){return a(decodeURIComponent(e.replace(s," ")))}function a(e){return 0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e}function r(e){return c.json?JSON.parse(e):e}var s=/\+/g,c=e.cookie=function(a,s,l){if(s!==i){if(l=e.extend({},c.defaults,l),null===s&&(l.expires=-1),"number"==typeof l.expires){var u=l.expires,d=l.expires=new Date;d.setDate(d.getDate()+u)}return s=c.json?JSON.stringify(s):String(s),t.cookie=[encodeURIComponent(a),"=",c.raw?s:encodeURIComponent(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var p=c.raw?n:o,f=t.cookie.split("; "),h=a?null:{},g=0,m=f.length;m>g;g++){var v=f[g].split("="),y=p(v.shift()),b=p(v.join("="));if(a&&a===y){h=r(b);break}a||(h[y]=r(b))}return h};c.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}}(o,document),n.exports=o}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}]);